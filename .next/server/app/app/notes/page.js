(()=>{var a={};a.id=244,a.ids=[244],a.modules={261:a=>{"use strict";a.exports=require("next/dist/shared/lib/router/utils/app-paths")},3295:a=>{"use strict";a.exports=require("next/dist/server/app-render/after-task-async-storage.external.js")},8605:(a,b,c)=>{"use strict";c.r(b),c.d(b,{default:()=>d});let d=(0,c(97954).registerClientReference)(function(){throw Error("Attempted to call the default export of \"/Users/ramanakumar/TaskGlyph/src/app/app/notes/page.tsx\" from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"/Users/ramanakumar/TaskGlyph/src/app/app/notes/page.tsx","default")},8849:(a,b,c)=>{"use strict";c.d(b,{A:()=>d});let d=(0,c(23339).A)("plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]])},9212:(a,b,c)=>{"use strict";c.d(b,{A:()=>d});let d=(0,c(23339).A)("rotate-ccw",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]])},10846:a=>{"use strict";a.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},11889:(a,b,c)=>{"use strict";async function d(a){try{let b=await fetch("/api/s3-delete",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({url:a})});if(!b.ok){let a=await b.json();return console.error("Failed to delete from S3:",a.error),!1}return!0}catch(a){return console.error("Error in deleteFromS3:",a),!1}}c.d(b,{e:()=>d})},19121:a=>{"use strict";a.exports=require("next/dist/server/app-render/action-async-storage.external.js")},24838:(a,b,c)=>{Promise.resolve().then(c.bind(c,89885))},26713:a=>{"use strict";a.exports=require("next/dist/shared/lib/router/utils/is-bot")},28354:a=>{"use strict";a.exports=require("util")},29294:a=>{"use strict";a.exports=require("next/dist/server/app-render/work-async-storage.external.js")},33086:(a,b,c)=>{Promise.resolve().then(c.bind(c,8605))},33873:a=>{"use strict";a.exports=require("path")},41025:a=>{"use strict";a.exports=require("next/dist/server/app-render/dynamic-access-async-storage.external.js")},52385:(a,b,c)=>{"use strict";c.d(b,{N:()=>l});var d=c(21124),e=c(38301),f=c(47089),g=c(53826),h=c(25658),i=c(53519),j=c(30887),k=c(71613);function l({onClose:a,onAdd:b}){let[c,l]=(0,e.useState)(!1),[m,n]=(0,e.useState)(null),[o,p]=(0,e.useState)(null),[q,r]=(0,e.useState)(!1),s=(0,e.useRef)(null),t=(0,e.useRef)([]),u=(0,e.useRef)(null),[v,w]=(0,e.useState)(!1),x=async()=>{try{let a=await navigator.mediaDevices.getUserMedia({audio:!0});l(!0),n(null),p(null),t.current=[],s.current=new MediaRecorder(a),s.current.ondataavailable=a=>{t.current.push(a.data)},s.current.onstop=()=>{let a=new Blob(t.current,{type:"audio/wav"}),b=URL.createObjectURL(a),c=new File([a],"recording.wav",{type:"audio/wav"});n(b),p(c)},s.current.start()}catch(a){console.error("Error starting recording:",a),r(!0)}};return(0,d.jsx)("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/50",onClick:a,children:(0,d.jsxs)("div",{onClick:a=>a.stopPropagation(),className:"bg-white rounded-lg shadow-xl w-96 p-6",children:[(0,d.jsxs)("div",{className:"flex justify-between items-center mb-4",children:[(0,d.jsx)("h3",{className:"text-lg font-semibold",children:"Record Audio"}),(0,d.jsx)("button",{onClick:a,className:"p-1 rounded-full hover:bg-gray-200",children:(0,d.jsx)(f.A,{className:"w-5 h-5"})})]}),q&&(0,d.jsxs)("div",{className:"bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded relative",role:"alert",children:[(0,d.jsx)("strong",{className:"font-bold",children:"Error:"}),(0,d.jsxs)("span",{className:"block sm:inline",children:[" ","Microphone permission denied. Please allow mic access in your browser settings."]})]}),(0,d.jsxs)("div",{className:"flex flex-col items-center justify-center h-32",children:[!m&&(0,d.jsx)("button",{type:"button",onClick:c?()=>{s.current&&c&&(s.current.stop(),l(!1))}:x,className:`flex items-center justify-center w-20 h-20 rounded-full text-white transition-all
                ${c?"bg-red-500 hover:bg-red-600":"bg-blue-500 hover:bg-blue-600"}
              `,disabled:q,children:c?(0,d.jsx)(g.A,{className:"w-8 h-8"}):(0,d.jsx)(h.A,{className:"w-8 h-8"})}),m&&(0,d.jsxs)("div",{className:"w-full flex items-center gap-3",children:[(0,d.jsx)("button",{type:"button",onClick:()=>{u.current&&(v?u.current.pause():u.current.play(),w(!v))},className:"flex-shrink-0 w-12 h-12 rounded-full bg-gray-200 hover:bg-gray-300 flex items-center justify-center",children:v?(0,d.jsx)(i.A,{className:"w-6 h-6"}):(0,d.jsx)(j.A,{className:"w-6 h-6"})}),(0,d.jsx)("audio",{ref:u,src:m,onEnded:()=>w(!1),className:"w-full"})]})]}),(0,d.jsxs)("div",{className:"flex justify-end gap-3 mt-6 border-t pt-4",children:[(0,d.jsx)("button",{type:"button",onClick:a,className:"px-4 py-2 text-sm font-medium bg-gray-200 rounded-md hover:bg-gray-300 focus:outline-none",children:"Cancel"}),(0,d.jsxs)("button",{type:"button",onClick:()=>{o&&(b(o),a())},disabled:!o,className:"px-4 py-2 text-sm font-medium text-white bg-black rounded-md hover:bg-gray-800 focus:outline-none disabled:opacity-50",children:[(0,d.jsx)(k.A,{className:"w-4 h-4 inline-block mr-1"}),"Add to Note"]})]})]})})}},63033:a=>{"use strict";a.exports=require("next/dist/server/app-render/work-unit-async-storage.external.js")},77598:a=>{"use strict";a.exports=require("node:crypto")},82594:(a,b,c)=>{"use strict";async function d(a,b){try{let c=await fetch("/api/s3-upload",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({fileName:a.name,fileType:a.type,entityType:b})});if(!c.ok){let a=await c.json();throw Error(a.error||"Failed to get upload URL")}let{uploadUrl:d,s3Key:e}=await c.json();if(!(await fetch(d,{method:"PUT",headers:{"Content-Type":a.type},body:a})).ok)throw Error("Failed to upload file to S3");let f=`https://taskglyph-uploads-ramana.s3.ap-south-2.amazonaws.com/${e}`;return{s3Key:e,url:f,fileName:a.name,fileSize:a.size}}catch(a){throw console.error("S3 Upload Error:",a),Error(a.message||"Upload failed")}}c.d(b,{h:()=>d})},83970:(a,b,c)=>{"use strict";c.r(b),c.d(b,{GlobalError:()=>D.a,__next_app__:()=>J,handler:()=>L,pages:()=>I,routeModule:()=>K,tree:()=>H});var d=c(49754),e=c(9117),f=c(46595),g=c(32324),h=c(39326),i=c(38928),j=c(20175),k=c(12),l=c(54290),m=c(12696),n=c(82802),o=c(77533),p=c(45229),q=c(32822),r=c(261),s=c(26453),t=c(52474),u=c(26713),v=c(51356),w=c(62685),x=c(36225),y=c(63446),z=c(2762),A=c(45742),B=c(86439),C=c(81170),D=c.n(C),E=c(62506),F=c(91203),G={};for(let a in E)0>["default","tree","pages","GlobalError","__next_app__","routeModule","handler"].indexOf(a)&&(G[a]=()=>E[a]);c.d(b,G);let H={children:["",{children:["app",{children:["notes",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(c.bind(c,8605)),"/Users/ramanakumar/TaskGlyph/src/app/app/notes/page.tsx"]}]},{}]},{layout:[()=>Promise.resolve().then(c.bind(c,79816)),"/Users/ramanakumar/TaskGlyph/src/app/app/layout.tsx"],metadata:{icon:[async a=>(await Promise.resolve().then(c.bind(c,70440))).default(a)],apple:[],openGraph:[],twitter:[],manifest:void 0}}]},{layout:[()=>Promise.resolve().then(c.bind(c,51472)),"/Users/ramanakumar/TaskGlyph/src/app/layout.tsx"],"global-error":[()=>Promise.resolve().then(c.t.bind(c,81170,23)),"next/dist/client/components/builtin/global-error.js"],"not-found":[()=>Promise.resolve().then(c.t.bind(c,87028,23)),"next/dist/client/components/builtin/not-found.js"],forbidden:[()=>Promise.resolve().then(c.t.bind(c,90461,23)),"next/dist/client/components/builtin/forbidden.js"],unauthorized:[()=>Promise.resolve().then(c.t.bind(c,32768,23)),"next/dist/client/components/builtin/unauthorized.js"],metadata:{icon:[async a=>(await Promise.resolve().then(c.bind(c,70440))).default(a)],apple:[],openGraph:[],twitter:[],manifest:void 0}}]}.children,I=["/Users/ramanakumar/TaskGlyph/src/app/app/notes/page.tsx"],J={require:c,loadChunk:()=>Promise.resolve()},K=new d.AppPageRouteModule({definition:{kind:e.RouteKind.APP_PAGE,page:"/app/notes/page",pathname:"/app/notes",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:H},distDir:".next",relativeProjectDir:""});async function L(a,b,d){var C;let G="/app/notes/page";"/index"===G&&(G="/");let M=(0,h.getRequestMeta)(a,"postponed"),N=(0,h.getRequestMeta)(a,"minimalMode"),O=await K.prepare(a,b,{srcPage:G,multiZoneDraftMode:!1});if(!O)return b.statusCode=400,b.end("Bad Request"),null==d.waitUntil||d.waitUntil.call(d,Promise.resolve()),null;let{buildId:P,query:Q,params:R,parsedUrl:S,pageIsDynamic:T,buildManifest:U,nextFontManifest:V,reactLoadableManifest:W,serverActionsManifest:X,clientReferenceManifest:Y,subresourceIntegrityManifest:Z,prerenderManifest:$,isDraftMode:_,resolvedPathname:aa,revalidateOnlyGenerated:ab,routerServerContext:ac,nextConfig:ad,interceptionRoutePatterns:ae}=O,af=S.pathname||"/",ag=(0,r.normalizeAppPath)(G),{isOnDemandRevalidate:ah}=O,ai=K.match(af,$),aj=!!$.routes[aa],ak=!!(ai||aj||$.routes[ag]),al=a.headers["user-agent"]||"",am=(0,u.getBotType)(al),an=(0,p.isHtmlBotRequest)(a),ao=(0,h.getRequestMeta)(a,"isPrefetchRSCRequest")??"1"===a.headers[t.NEXT_ROUTER_PREFETCH_HEADER],ap=(0,h.getRequestMeta)(a,"isRSCRequest")??!!a.headers[t.RSC_HEADER],aq=(0,s.getIsPossibleServerAction)(a),ar=(0,m.checkIsAppPPREnabled)(ad.experimental.ppr)&&(null==(C=$.routes[ag]??$.dynamicRoutes[ag])?void 0:C.renderingMode)==="PARTIALLY_STATIC",as=!1,at=!1,au=ar?M:void 0,av=ar&&ap&&!ao,aw=(0,h.getRequestMeta)(a,"segmentPrefetchRSCRequest"),ax=!al||(0,p.shouldServeStreamingMetadata)(al,ad.htmlLimitedBots);an&&ar&&(ak=!1,ax=!1);let ay=!0===K.isDev||!ak||"string"==typeof M||av,az=an&&ar,aA=null;_||!ak||ay||aq||au||av||(aA=aa);let aB=aA;!aB&&K.isDev&&(aB=aa),K.isDev||_||!ak||!ap||av||(0,k.d)(a.headers);let aC={...E,tree:H,pages:I,GlobalError:D(),handler:L,routeModule:K,__next_app__:J};X&&Y&&(0,o.setReferenceManifestsSingleton)({page:G,clientReferenceManifest:Y,serverActionsManifest:X,serverModuleMap:(0,q.createServerModuleMap)({serverActionsManifest:X})});let aD=a.method||"GET",aE=(0,g.getTracer)(),aF=aE.getActiveScopeSpan();try{let f=K.getVaryHeader(aa,ae);b.setHeader("Vary",f);let k=async(c,d)=>{let e=new l.NodeNextRequest(a),f=new l.NodeNextResponse(b);return K.render(e,f,d).finally(()=>{if(!c)return;c.setAttributes({"http.status_code":b.statusCode,"next.rsc":!1});let d=aE.getRootSpanAttributes();if(!d)return;if(d.get("next.span_type")!==i.BaseServerSpan.handleRequest)return void console.warn(`Unexpected root span type '${d.get("next.span_type")}'. Please report this Next.js issue https://github.com/vercel/next.js`);let e=d.get("next.route");if(e){let a=`${aD} ${e}`;c.setAttributes({"next.route":e,"http.route":e,"next.span_name":a}),c.updateName(a)}else c.updateName(`${aD} ${a.url}`)})},m=async({span:e,postponed:f,fallbackRouteParams:g})=>{let i={query:Q,params:R,page:ag,sharedContext:{buildId:P},serverComponentsHmrCache:(0,h.getRequestMeta)(a,"serverComponentsHmrCache"),fallbackRouteParams:g,renderOpts:{App:()=>null,Document:()=>null,pageConfig:{},ComponentMod:aC,Component:(0,j.T)(aC),params:R,routeModule:K,page:G,postponed:f,shouldWaitOnAllReady:az,serveStreamingMetadata:ax,supportsDynamicResponse:"string"==typeof f||ay,buildManifest:U,nextFontManifest:V,reactLoadableManifest:W,subresourceIntegrityManifest:Z,serverActionsManifest:X,clientReferenceManifest:Y,setIsrStatus:null==ac?void 0:ac.setIsrStatus,dir:c(33873).join(process.cwd(),K.relativeProjectDir),isDraftMode:_,isRevalidate:ak&&!f&&!av,botType:am,isOnDemandRevalidate:ah,isPossibleServerAction:aq,assetPrefix:ad.assetPrefix,nextConfigOutput:ad.output,crossOrigin:ad.crossOrigin,trailingSlash:ad.trailingSlash,previewProps:$.preview,deploymentId:ad.deploymentId,enableTainting:ad.experimental.taint,htmlLimitedBots:ad.htmlLimitedBots,devtoolSegmentExplorer:ad.experimental.devtoolSegmentExplorer,reactMaxHeadersLength:ad.reactMaxHeadersLength,multiZoneDraftMode:!1,incrementalCache:(0,h.getRequestMeta)(a,"incrementalCache"),cacheLifeProfiles:ad.experimental.cacheLife,basePath:ad.basePath,serverActions:ad.experimental.serverActions,...as?{nextExport:!0,supportsDynamicResponse:!1,isStaticGeneration:!0,isRevalidate:!0,isDebugDynamicAccesses:as}:{},experimental:{isRoutePPREnabled:ar,expireTime:ad.expireTime,staleTimes:ad.experimental.staleTimes,cacheComponents:!!ad.experimental.cacheComponents,clientSegmentCache:!!ad.experimental.clientSegmentCache,clientParamParsing:!!ad.experimental.clientParamParsing,dynamicOnHover:!!ad.experimental.dynamicOnHover,inlineCss:!!ad.experimental.inlineCss,authInterrupts:!!ad.experimental.authInterrupts,clientTraceMetadata:ad.experimental.clientTraceMetadata||[]},waitUntil:d.waitUntil,onClose:a=>{b.on("close",a)},onAfterTaskError:()=>{},onInstrumentationRequestError:(b,c,d)=>K.onRequestError(a,b,d,ac),err:(0,h.getRequestMeta)(a,"invokeError"),dev:K.isDev}},l=await k(e,i),{metadata:m}=l,{cacheControl:n,headers:o={},fetchTags:p}=m;if(p&&(o[y.NEXT_CACHE_TAGS_HEADER]=p),a.fetchMetrics=m.fetchMetrics,ak&&(null==n?void 0:n.revalidate)===0&&!K.isDev&&!ar){let a=m.staticBailoutInfo,b=Object.defineProperty(Error(`Page changed from static to dynamic at runtime ${aa}${(null==a?void 0:a.description)?`, reason: ${a.description}`:""}
see more here https://nextjs.org/docs/messages/app-static-to-dynamic-error`),"__NEXT_ERROR_CODE",{value:"E132",enumerable:!1,configurable:!0});if(null==a?void 0:a.stack){let c=a.stack;b.stack=b.message+c.substring(c.indexOf("\n"))}throw b}return{value:{kind:v.CachedRouteKind.APP_PAGE,html:l,headers:o,rscData:m.flightData,postponed:m.postponed,status:m.statusCode,segmentData:m.segmentData},cacheControl:n}},o=async({hasResolved:c,previousCacheEntry:f,isRevalidating:g,span:i})=>{let j,k=!1===K.isDev,l=c||b.writableEnded;if(ah&&ab&&!f&&!N)return(null==ac?void 0:ac.render404)?await ac.render404(a,b):(b.statusCode=404,b.end("This page could not be found")),null;if(ai&&(j=(0,w.parseFallbackField)(ai.fallback)),j===w.FallbackMode.PRERENDER&&(0,u.isBot)(al)&&(!ar||an)&&(j=w.FallbackMode.BLOCKING_STATIC_RENDER),(null==f?void 0:f.isStale)===-1&&(ah=!0),ah&&(j!==w.FallbackMode.NOT_FOUND||f)&&(j=w.FallbackMode.BLOCKING_STATIC_RENDER),!N&&j!==w.FallbackMode.BLOCKING_STATIC_RENDER&&aB&&!l&&!_&&T&&(k||!aj)){let b;if((k||ai)&&j===w.FallbackMode.NOT_FOUND)throw new B.NoFallbackError;if(ar&&!ap){let c="string"==typeof(null==ai?void 0:ai.fallback)?ai.fallback:k?ag:null;if(b=await K.handleResponse({cacheKey:c,req:a,nextConfig:ad,routeKind:e.RouteKind.APP_PAGE,isFallback:!0,prerenderManifest:$,isRoutePPREnabled:ar,responseGenerator:async()=>m({span:i,postponed:void 0,fallbackRouteParams:k||at?(0,n.u)(ag):null}),waitUntil:d.waitUntil}),null===b)return null;if(b)return delete b.cacheControl,b}}let o=ah||g||!au?void 0:au;if(as&&void 0!==o)return{cacheControl:{revalidate:1,expire:void 0},value:{kind:v.CachedRouteKind.PAGES,html:x.default.EMPTY,pageData:{},headers:void 0,status:void 0}};let p=T&&ar&&((0,h.getRequestMeta)(a,"renderFallbackShell")||at)?(0,n.u)(af):null;return m({span:i,postponed:o,fallbackRouteParams:p})},p=async c=>{var f,g,i,j,k;let l,n=await K.handleResponse({cacheKey:aA,responseGenerator:a=>o({span:c,...a}),routeKind:e.RouteKind.APP_PAGE,isOnDemandRevalidate:ah,isRoutePPREnabled:ar,req:a,nextConfig:ad,prerenderManifest:$,waitUntil:d.waitUntil});if(_&&b.setHeader("Cache-Control","private, no-cache, no-store, max-age=0, must-revalidate"),K.isDev&&b.setHeader("Cache-Control","no-store, must-revalidate"),!n){if(aA)throw Object.defineProperty(Error("invariant: cache entry required but not generated"),"__NEXT_ERROR_CODE",{value:"E62",enumerable:!1,configurable:!0});return null}if((null==(f=n.value)?void 0:f.kind)!==v.CachedRouteKind.APP_PAGE)throw Object.defineProperty(Error(`Invariant app-page handler received invalid cache entry ${null==(i=n.value)?void 0:i.kind}`),"__NEXT_ERROR_CODE",{value:"E707",enumerable:!1,configurable:!0});let p="string"==typeof n.value.postponed;ak&&!av&&(!p||ao)&&(N||b.setHeader("x-nextjs-cache",ah?"REVALIDATED":n.isMiss?"MISS":n.isStale?"STALE":"HIT"),b.setHeader(t.NEXT_IS_PRERENDER_HEADER,"1"));let{value:q}=n;if(au)l={revalidate:0,expire:void 0};else if(N&&ap&&!ao&&ar)l={revalidate:0,expire:void 0};else if(!K.isDev)if(_)l={revalidate:0,expire:void 0};else if(ak){if(n.cacheControl)if("number"==typeof n.cacheControl.revalidate){if(n.cacheControl.revalidate<1)throw Object.defineProperty(Error(`Invalid revalidate configuration provided: ${n.cacheControl.revalidate} < 1`),"__NEXT_ERROR_CODE",{value:"E22",enumerable:!1,configurable:!0});l={revalidate:n.cacheControl.revalidate,expire:(null==(j=n.cacheControl)?void 0:j.expire)??ad.expireTime}}else l={revalidate:y.CACHE_ONE_YEAR,expire:void 0}}else b.getHeader("Cache-Control")||(l={revalidate:0,expire:void 0});if(n.cacheControl=l,"string"==typeof aw&&(null==q?void 0:q.kind)===v.CachedRouteKind.APP_PAGE&&q.segmentData){b.setHeader(t.NEXT_DID_POSTPONE_HEADER,"2");let c=null==(k=q.headers)?void 0:k[y.NEXT_CACHE_TAGS_HEADER];N&&ak&&c&&"string"==typeof c&&b.setHeader(y.NEXT_CACHE_TAGS_HEADER,c);let d=q.segmentData.get(aw);return void 0!==d?(0,A.sendRenderResult)({req:a,res:b,generateEtags:ad.generateEtags,poweredByHeader:ad.poweredByHeader,result:x.default.fromStatic(d,t.RSC_CONTENT_TYPE_HEADER),cacheControl:n.cacheControl}):(b.statusCode=204,(0,A.sendRenderResult)({req:a,res:b,generateEtags:ad.generateEtags,poweredByHeader:ad.poweredByHeader,result:x.default.EMPTY,cacheControl:n.cacheControl}))}let r=(0,h.getRequestMeta)(a,"onCacheEntry");if(r&&await r({...n,value:{...n.value,kind:"PAGE"}},{url:(0,h.getRequestMeta)(a,"initURL")}))return null;if(p&&au)throw Object.defineProperty(Error("Invariant: postponed state should not be present on a resume request"),"__NEXT_ERROR_CODE",{value:"E396",enumerable:!1,configurable:!0});if(q.headers){let a={...q.headers};for(let[c,d]of(N&&ak||delete a[y.NEXT_CACHE_TAGS_HEADER],Object.entries(a)))if(void 0!==d)if(Array.isArray(d))for(let a of d)b.appendHeader(c,a);else"number"==typeof d&&(d=d.toString()),b.appendHeader(c,d)}let s=null==(g=q.headers)?void 0:g[y.NEXT_CACHE_TAGS_HEADER];if(N&&ak&&s&&"string"==typeof s&&b.setHeader(y.NEXT_CACHE_TAGS_HEADER,s),!q.status||ap&&ar||(b.statusCode=q.status),!N&&q.status&&F.RedirectStatusCode[q.status]&&ap&&(b.statusCode=200),p&&b.setHeader(t.NEXT_DID_POSTPONE_HEADER,"1"),ap&&!_){if(void 0===q.rscData){if(q.postponed)throw Object.defineProperty(Error("Invariant: Expected postponed to be undefined"),"__NEXT_ERROR_CODE",{value:"E372",enumerable:!1,configurable:!0});return(0,A.sendRenderResult)({req:a,res:b,generateEtags:ad.generateEtags,poweredByHeader:ad.poweredByHeader,result:q.html,cacheControl:av?{revalidate:0,expire:void 0}:n.cacheControl})}return(0,A.sendRenderResult)({req:a,res:b,generateEtags:ad.generateEtags,poweredByHeader:ad.poweredByHeader,result:x.default.fromStatic(q.rscData,t.RSC_CONTENT_TYPE_HEADER),cacheControl:n.cacheControl})}let u=q.html;if(!p||N||ap)return(0,A.sendRenderResult)({req:a,res:b,generateEtags:ad.generateEtags,poweredByHeader:ad.poweredByHeader,result:u,cacheControl:n.cacheControl});if(as)return u.push(new ReadableStream({start(a){a.enqueue(z.ENCODED_TAGS.CLOSED.BODY_AND_HTML),a.close()}})),(0,A.sendRenderResult)({req:a,res:b,generateEtags:ad.generateEtags,poweredByHeader:ad.poweredByHeader,result:u,cacheControl:{revalidate:0,expire:void 0}});let w=new TransformStream;return u.push(w.readable),m({span:c,postponed:q.postponed,fallbackRouteParams:null}).then(async a=>{var b,c;if(!a)throw Object.defineProperty(Error("Invariant: expected a result to be returned"),"__NEXT_ERROR_CODE",{value:"E463",enumerable:!1,configurable:!0});if((null==(b=a.value)?void 0:b.kind)!==v.CachedRouteKind.APP_PAGE)throw Object.defineProperty(Error(`Invariant: expected a page response, got ${null==(c=a.value)?void 0:c.kind}`),"__NEXT_ERROR_CODE",{value:"E305",enumerable:!1,configurable:!0});await a.value.html.pipeTo(w.writable)}).catch(a=>{w.writable.abort(a).catch(a=>{console.error("couldn't abort transformer",a)})}),(0,A.sendRenderResult)({req:a,res:b,generateEtags:ad.generateEtags,poweredByHeader:ad.poweredByHeader,result:u,cacheControl:{revalidate:0,expire:void 0}})};if(!aF)return await aE.withPropagatedContext(a.headers,()=>aE.trace(i.BaseServerSpan.handleRequest,{spanName:`${aD} ${a.url}`,kind:g.SpanKind.SERVER,attributes:{"http.method":aD,"http.target":a.url}},p));await p(aF)}catch(b){throw b instanceof B.NoFallbackError||await K.onRequestError(a,b,{routerKind:"App Router",routePath:G,routeType:"render",revalidateReason:(0,f.c)({isRevalidate:ak,isOnDemandRevalidate:ah})},ac),b}}},86439:a=>{"use strict";a.exports=require("next/dist/shared/lib/no-fallback-error.external")},89885:(a,b,c)=>{"use strict";let d,e;c.r(b),c.d(b,{default:()=>gE});var f,g,h,i=c(21124),j=c(38301),k=c.t(j,2);let l=(0,j.createContext)(null);l.displayName="PanelGroupContext";let m={group:"data-panel-group",groupDirection:"data-panel-group-direction",groupId:"data-panel-group-id",panel:"data-panel",panelCollapsible:"data-panel-collapsible",panelId:"data-panel-id",panelSize:"data-panel-size",resizeHandle:"data-resize-handle",resizeHandleActive:"data-resize-handle-active",resizeHandleEnabled:"data-panel-resize-handle-enabled",resizeHandleId:"data-panel-resize-handle-id",resizeHandleState:"data-resize-handle-state"},n=k["useId".toString()],o="function"==typeof n?n:()=>null,p=0;function q(a=null){let b=o(),c=(0,j.useRef)(a||b||null);return null===c.current&&(c.current=""+p++),null!=a?a:c.current}function r({children:a,className:b="",collapsedSize:c,collapsible:d,defaultSize:e,forwardedRef:f,id:g,maxSize:h,minSize:i,onCollapse:k,onExpand:n,onResize:o,order:p,style:r,tagName:s="div",...t}){let u=(0,j.useContext)(l);if(null===u)throw Error("Panel components must be rendered within a PanelGroup container");let{collapsePanel:v,expandPanel:w,getPanelSize:x,getPanelStyle:y,groupId:z,isPanelCollapsed:A,reevaluatePanelConstraints:B,registerPanel:C,resizePanel:D,unregisterPanel:E}=u,F=q(g),G=(0,j.useRef)({callbacks:{onCollapse:k,onExpand:n,onResize:o},constraints:{collapsedSize:c,collapsible:d,defaultSize:e,maxSize:h,minSize:i},id:F,idIsFromProps:void 0!==g,order:p});(0,j.useRef)({didLogMissingDefaultSizeWarning:!1}),(0,j.useImperativeHandle)(f,()=>({collapse:()=>{v(G.current)},expand:a=>{w(G.current,a)},getId:()=>F,getSize:()=>x(G.current),isCollapsed:()=>A(G.current),isExpanded:()=>!A(G.current),resize:a=>{D(G.current,a)}}),[v,w,x,A,F,D]);let H=y(G.current,e);return(0,j.createElement)(s,{...t,children:a,className:b,id:F,style:{...H,...r},[m.groupId]:z,[m.panel]:"",[m.panelCollapsible]:d||void 0,[m.panelId]:F,[m.panelSize]:parseFloat(""+H.flexGrow).toFixed(1)})}let s=(0,j.forwardRef)((a,b)=>(0,j.createElement)(r,{...a,forwardedRef:b}));r.displayName="Panel",s.displayName="forwardRef(Panel)";let t=null,u=-1,v=null;function w(a,b,c){var e,f,g;let h=function(a,b,c){let d=(b&G)!=0,e=(b&H)!=0,f=(b&I)!=0,g=(b&J)!=0;if(b){if(d)if(f)return"se-resize";else if(g)return"ne-resize";else return"e-resize";else if(e)if(f)return"sw-resize";else if(g)return"nw-resize";else return"w-resize";else if(f)return"s-resize";else if(g)return"n-resize"}switch(a){case"horizontal":return"ew-resize";case"intersection":return"move";case"vertical":return"ns-resize"}}(a,b,0);t!==h&&(t=h,null===v&&(v=document.createElement("style"),d&&v.setAttribute("nonce",d),document.head.appendChild(v)),u>=0&&(null==(g=v.sheet)||g.removeRule(u)),u=null!=(e=null==(f=v.sheet)?void 0:f.insertRule(`*{cursor: ${h} !important;}`))?e:-1)}function x(a){return"keydown"===a.type}function y(a){return a.type.startsWith("pointer")}function z(a){return a.type.startsWith("mouse")}function A(a){if(y(a)){if(a.isPrimary)return{x:a.clientX,y:a.clientY}}else if(z(a))return{x:a.clientX,y:a.clientY};return{x:1/0,y:1/0}}let B=/\b(?:position|zIndex|opacity|transform|webkitTransform|mixBlendMode|filter|webkitFilter|isolation)\b/;function C(a){let b=a.length;for(;b--;){let c=a[b];if(Y(c,"Missing node"),function(a){let b=getComputedStyle(a);return!!("fixed"===b.position||"auto"!==b.zIndex&&("static"!==b.position||function(a){var b;let c=getComputedStyle(null!=(b=F(a))?b:a).display;return"flex"===c||"inline-flex"===c}(a))||1>+b.opacity||"transform"in b&&"none"!==b.transform||"webkitTransform"in b&&"none"!==b.webkitTransform||"mixBlendMode"in b&&"normal"!==b.mixBlendMode||"filter"in b&&"none"!==b.filter||"webkitFilter"in b&&"none"!==b.webkitFilter||"isolation"in b&&"isolate"===b.isolation||B.test(b.willChange))||"touch"===b.webkitOverflowScrolling}(c))return c}return null}function D(a){return a&&Number(getComputedStyle(a).zIndex)||0}function E(a){let b=[];for(;a;)b.push(a),a=F(a);return b}function F(a){let{parentNode:b}=a;return b&&b instanceof ShadowRoot?b.host:b}let G=1,H=2,I=4,J=8,K="coarse"===function(){if("function"==typeof matchMedia)return matchMedia("(pointer:coarse)").matches?"coarse":"fine"}(),L=[],M=!1,N=new Map,O=new Map,P=new Set;function Q(a){let{target:b}=a,{x:c,y:d}=A(a);M=!0,U({target:b,x:c,y:d}),W(),L.length>0&&(X("down",a),V(),a.preventDefault(),T(b)||a.stopImmediatePropagation())}function R(a){let{x:b,y:c}=A(a);if(M&&"pointerleave"!==a.type&&0===a.buttons&&(M=!1,X("up",a)),!M){let{target:d}=a;U({target:d,x:b,y:c})}X("move",a),V(),L.length>0&&a.preventDefault()}function S(a){let{target:b}=a,{x:c,y:d}=A(a);O.clear(),M=!1,L.length>0&&(a.preventDefault(),T(b)||a.stopImmediatePropagation()),X("up",a),U({target:b,x:c,y:d}),V(),W()}function T(a){let b=a;for(;b;){if(b.hasAttribute(m.resizeHandle))return!0;b=b.parentElement}return!1}function U({target:a,x:b,y:c}){L.splice(0);let d=null;(a instanceof HTMLElement||a instanceof SVGElement)&&(d=a),P.forEach(a=>{let{element:e,hitAreaMargins:f}=a,g=e.getBoundingClientRect(),{bottom:h,left:i,right:j,top:k}=g,l=K?f.coarse:f.fine;if(b>=i-l&&b<=j+l&&c>=k-l&&c<=h+l){if(null!==d&&document.contains(d)&&e!==d&&!e.contains(d)&&!d.contains(e)&&function(a,b){let c;if(a===b)throw Error("Cannot compare node with itself");let d={a:E(a),b:E(b)};for(;d.a.at(-1)===d.b.at(-1);)a=d.a.pop(),b=d.b.pop(),c=a;Y(c,"Stacking order can only be calculated for elements with a common ancestor");let e={a:D(C(d.a)),b:D(C(d.b))};if(e.a===e.b){let a=c.childNodes,b={a:d.a.at(-1),b:d.b.at(-1)},e=a.length;for(;e--;){let c=a[e];if(c===b.a)return 1;if(c===b.b)return -1}}return Math.sign(e.a-e.b)}(d,e)>0){let a=d,b=!1;for(;a;){var m;if(a.contains(e))break;if(m=a.getBoundingClientRect(),m.x<g.x+g.width&&m.x+m.width>g.x&&m.y<g.y+g.height&&m.y+m.height>g.y){b=!0;break}a=a.parentElement}if(b)return}L.push(a)}})}function V(){let a=!1,b=!1;L.forEach(c=>{let{direction:d}=c;"horizontal"===d?a=!0:b=!0});let c=0;O.forEach(a=>{c|=a}),a&&b?w("intersection",c,M):a?w("horizontal",c,M):b?w("vertical",c,M):null!==v&&(document.head.removeChild(v),t=null,v=null,u=-1)}function W(){var a;null==(a=e)||a.abort();let b={capture:!0,signal:(e=new AbortController).signal};P.size&&(M?(L.length>0&&N.forEach((a,c)=>{let{body:d}=c;a>0&&(d.addEventListener("contextmenu",S,b),d.addEventListener("pointerleave",R,b),d.addEventListener("pointermove",R,b))}),N.forEach((a,c)=>{let{body:d}=c;d.addEventListener("pointerup",S,b),d.addEventListener("pointercancel",S,b)})):N.forEach((a,c)=>{let{body:d}=c;a>0&&(d.addEventListener("pointerdown",Q,b),d.addEventListener("pointermove",R,b))}))}function X(a,b){P.forEach(c=>{let{setResizeHandlerState:d}=c;d(a,L.includes(c),b)})}function Y(a,b){if(!a)throw console.error(b),Error(b)}function Z(a,b,c=10){return a.toFixed(c)===b.toFixed(c)?0:a>b?1:-1}function $(a,b,c=10){return 0===Z(a,b,c)}function _(a,b,c){return 0===Z(a,b,c)}function aa({panelConstraints:a,panelIndex:b,size:c}){let d=a[b];Y(null!=d,`Panel constraints not found for index ${b}`);let{collapsedSize:e=0,collapsible:f,maxSize:g=100,minSize:h=0}=d;return 0>Z(c,h)&&(c=f&&0>Z(c,(e+h)/2)?e:h),c=parseFloat((c=Math.min(g,c)).toFixed(10))}function ab({delta:a,initialLayout:b,panelConstraints:c,pivotIndices:d,prevLayout:e,trigger:f}){if(_(a,0))return b;let g=[...b],[h,i]=d;Y(null!=h,"Invalid first pivot index"),Y(null!=i,"Invalid second pivot index");let j=0;if("keyboard"===f){{let d=a<0?i:h,e=c[d];Y(e,`Panel constraints not found for index ${d}`);let{collapsedSize:f=0,collapsible:g,minSize:j=0}=e;if(g){let c=b[d];if(Y(null!=c,`Previous layout not found for panel index ${d}`),_(c,f)){let b=j-c;Z(b,Math.abs(a))>0&&(a=a<0?0-b:b)}}}{let d=a<0?h:i,e=c[d];Y(e,`No panel constraints found for index ${d}`);let{collapsedSize:f=0,collapsible:g,minSize:j=0}=e;if(g){let c=b[d];if(Y(null!=c,`Previous layout not found for panel index ${d}`),_(c,j)){let b=c-f;Z(b,Math.abs(a))>0&&(a=a<0?0-b:b)}}}}{let d=a<0?1:-1,e=a<0?i:h,f=0;for(;;){let a=b[e];if(Y(null!=a,`Previous layout not found for panel index ${e}`),f+=aa({panelConstraints:c,panelIndex:e,size:100})-a,(e+=d)<0||e>=c.length)break}let g=Math.min(Math.abs(a),Math.abs(f));a=a<0?0-g:g}{let d=a<0?h:i;for(;d>=0&&d<c.length;){let e=Math.abs(a)-Math.abs(j),f=b[d];Y(null!=f,`Previous layout not found for panel index ${d}`);let h=aa({panelConstraints:c,panelIndex:d,size:f-e});if(!_(f,h)&&(j+=f-h,g[d]=h,j.toFixed(3).localeCompare(Math.abs(a).toFixed(3),void 0,{numeric:!0})>=0))break;a<0?d--:d++}}if(function(a,b,c){if(a.length!==b.length)return!1;for(let c=0;c<a.length;c++)if(!_(a[c],b[c],void 0))return!1;return!0}(e,g))return e;{let d=a<0?i:h,e=b[d];Y(null!=e,`Previous layout not found for panel index ${d}`);let f=e+j,k=aa({panelConstraints:c,panelIndex:d,size:f});if(g[d]=k,!_(k,f)){let b=f-k,d=a<0?i:h;for(;d>=0&&d<c.length;){let e=g[d];Y(null!=e,`Previous layout not found for panel index ${d}`);let f=aa({panelConstraints:c,panelIndex:d,size:e+b});if(_(e,f)||(b-=f-e,g[d]=f),_(b,0))break;a>0?d--:d++}}}return _(g.reduce((a,b)=>b+a,0),100)?g:e}function ac(a,b=document){return Array.from(b.querySelectorAll(`[${m.resizeHandleId}][data-panel-group-id="${a}"]`))}function ad(a,b,c=document){let d=ac(a,c).findIndex(a=>a.getAttribute(m.resizeHandleId)===b);return null!=d?d:null}function ae(a,b,c){let d=ad(a,b,c);return null!=d?[d,d+1]:[-1,-1]}function af(a,b=document){if((b instanceof HTMLElement||"object"==typeof b&&null!==b&&"tagName"in b&&"getAttribute"in b)&&b.dataset.panelGroupId==a)return b;let c=b.querySelector(`[data-panel-group][data-panel-group-id="${a}"]`);return c||null}function ag(a,b=document){let c=b.querySelector(`[${m.resizeHandleId}="${a}"]`);return c||null}function ah(a,b){let{x:c,y:d}=A(b);return"horizontal"===a?c:d}function ai(a,b,c){b.forEach((b,d)=>{let e=a[d];Y(e,`Panel data not found for index ${d}`);let{callbacks:f,constraints:g,id:h}=e,{collapsedSize:i=0,collapsible:j}=g,k=c[h];if(null==k||b!==k){c[h]=b;let{onCollapse:a,onExpand:d,onResize:e}=f;e&&e(b,k),j&&(a||d)&&(d&&(null==k||$(k,i))&&!$(b,i)&&d(),a&&(null==k||!$(k,i))&&$(b,i)&&a())}})}function aj(a,b){if(a.length!==b.length)return!1;for(let c=0;c<a.length;c++)if(a[c]!=b[c])return!1;return!0}function ak(a){try{if("undefined"!=typeof localStorage)a.getItem=a=>localStorage.getItem(a),a.setItem=(a,b)=>{localStorage.setItem(a,b)};else throw Error("localStorage not supported in this environment")}catch(b){console.error(b),a.getItem=()=>null,a.setItem=()=>{}}}function al(a){return`react-resizable-panels:${a}`}function am(a,b,c,d,e){var f;let g=al(a),h=b.map(a=>{let{constraints:b,id:c,idIsFromProps:d,order:e}=a;return d?c:e?`${e}:${JSON.stringify(b)}`:JSON.stringify(b)}).sort((a,b)=>a.localeCompare(b)).join(","),i=null!=(f=function(a,b){try{let c=al(a),d=b.getItem(c);if(d){let a=JSON.parse(d);if("object"==typeof a&&null!=a)return a}}catch(a){}return null}(a,e))?f:{};i[h]={expandToSizes:Object.fromEntries(c.entries()),layout:d};try{e.setItem(g,JSON.stringify(i))}catch(a){console.error(a)}}let an={getItem:a=>(ak(an),an.getItem(a)),setItem:(a,b)=>{ak(an),an.setItem(a,b)}},ao={};function ap({autoSaveId:a=null,children:b,className:c="",direction:d,forwardedRef:e,id:f=null,onLayout:g=null,keyboardResizeBy:h=null,storage:i=an,style:k,tagName:n="div",...o}){let p=q(f),r=(0,j.useRef)(null),[s,t]=(0,j.useState)(null),[u,v]=(0,j.useState)([]),w=function(){let[a,b]=(0,j.useState)(0);return(0,j.useCallback)(()=>b(a=>a+1),[])}(),A=(0,j.useRef)({}),B=(0,j.useRef)(new Map),C=(0,j.useRef)(0),D=(0,j.useRef)({autoSaveId:a,direction:d,dragState:s,id:p,keyboardResizeBy:h,onLayout:g,storage:i}),E=(0,j.useRef)({layout:u,panelDataArray:[],panelDataArrayChanged:!1});(0,j.useRef)({didLogIdAndOrderWarning:!1,didLogPanelConstraintsWarning:!1,prevPanelIds:[]}),(0,j.useImperativeHandle)(e,()=>({getId:()=>D.current.id,getLayout:()=>{let{layout:a}=E.current;return a},setLayout:a=>{let{onLayout:b}=D.current,{layout:c,panelDataArray:d}=E.current,e=function({layout:a,panelConstraints:b}){let c=[...a],d=c.reduce((a,b)=>a+b,0);if(c.length!==b.length)throw Error(`Invalid ${b.length} panel layout: ${c.map(a=>`${a}%`).join(", ")}`);if(!_(d,100)&&c.length>0)for(let a=0;a<b.length;a++){let b=c[a];Y(null!=b,`No layout data found for index ${a}`);let e=100/d*b;c[a]=e}let e=0;for(let a=0;a<b.length;a++){let d=c[a];Y(null!=d,`No layout data found for index ${a}`);let f=aa({panelConstraints:b,panelIndex:a,size:d});d!=f&&(e+=d-f,c[a]=f)}if(!_(e,0))for(let a=0;a<b.length;a++){let d=c[a];Y(null!=d,`No layout data found for index ${a}`);let f=aa({panelConstraints:b,panelIndex:a,size:d+e});if(d!==f&&(e-=f-d,c[a]=f,_(e,0)))break}return c}({layout:a,panelConstraints:d.map(a=>a.constraints)});!function(a,b){if(a.length!==b.length)return!1;for(let c=0;c<a.length;c++)if(a[c]!==b[c])return!1;return!0}(c,e)&&(v(e),E.current.layout=e,b&&b(e),ai(d,e,A.current))}}),[]),function({committedValuesRef:a,eagerValuesRef:b,groupId:c,layout:d,panelDataArray:e,panelGroupElement:f,setLayout:g}){(0,j.useRef)({didWarnAboutMissingResizeHandle:!1}),(0,j.useEffect)(()=>{if(!f)return;let a=b.current;Y(a,"Eager values not found");let{panelDataArray:e}=a;Y(null!=af(c,f),`No group found for id "${c}"`);let h=ac(c,f);Y(h,`No resize handles found for group id "${c}"`);let i=h.map(a=>{let b=a.getAttribute(m.resizeHandleId);Y(b,"Resize handle element has no handle id attribute");let[h,i]=function(a,b,c,d=document){var e,f,g,h;let i=ag(b,d),j=ac(a,d),k=i?j.indexOf(i):-1;return[null!=(e=null==(f=c[k])?void 0:f.id)?e:null,null!=(g=null==(h=c[k+1])?void 0:h.id)?g:null]}(c,b,e,f);if(null==h||null==i)return()=>{};let j=a=>{if(!a.defaultPrevented&&"Enter"===a.key){a.preventDefault();let i=e.findIndex(a=>a.id===h);if(i>=0){let a=e[i];Y(a,`No panel data found for index ${i}`);let h=d[i],{collapsedSize:j=0,collapsible:k,minSize:l=0}=a.constraints;if(null!=h&&k){let a=ab({delta:_(h,j)?l-j:j-h,initialLayout:d,panelConstraints:e.map(a=>a.constraints),pivotIndices:ae(c,b,f),prevLayout:d,trigger:"keyboard"});d!==a&&g(a)}}}};return a.addEventListener("keydown",j),()=>{a.removeEventListener("keydown",j)}});return()=>{i.forEach(a=>a())}},[f,a,b,c,d,e,g])}({committedValuesRef:D,eagerValuesRef:E,groupId:p,layout:u,panelDataArray:E.current.panelDataArray,setLayout:v,panelGroupElement:r.current}),(0,j.useEffect)(()=>{let{panelDataArray:b}=E.current;if(a){if(0===u.length||u.length!==b.length)return;let c=ao[a];null==c&&(c=function(a,b=10){let c=null;return(...d)=>{null!==c&&clearTimeout(c),c=setTimeout(()=>{a(...d)},b)}}(am,100),ao[a]=c),c(a,[...b],new Map(B.current),u,i)}},[a,u,i]),(0,j.useEffect)(()=>{});let F=(0,j.useCallback)(a=>{let{onLayout:b}=D.current,{layout:c,panelDataArray:d}=E.current;if(a.constraints.collapsible){let e=d.map(a=>a.constraints),{collapsedSize:f=0,panelSize:g,pivotIndices:h}=as(d,a,c);if(Y(null!=g,`Panel size not found for panel "${a.id}"`),!$(g,f)){B.current.set(a.id,g);let i=ab({delta:ar(d,a)===d.length-1?g-f:f-g,initialLayout:c,panelConstraints:e,pivotIndices:h,prevLayout:c,trigger:"imperative-api"});aj(c,i)||(v(i),E.current.layout=i,b&&b(i),ai(d,i,A.current))}}},[]),K=(0,j.useCallback)((a,b)=>{let{onLayout:c}=D.current,{layout:d,panelDataArray:e}=E.current;if(a.constraints.collapsible){let f=e.map(a=>a.constraints),{collapsedSize:g=0,panelSize:h=0,minSize:i=0,pivotIndices:j}=as(e,a,d),k=null!=b?b:i;if($(h,g)){let b=B.current.get(a.id),g=null!=b&&b>=k?b:k,i=ab({delta:ar(e,a)===e.length-1?h-g:g-h,initialLayout:d,panelConstraints:f,pivotIndices:j,prevLayout:d,trigger:"imperative-api"});aj(d,i)||(v(i),E.current.layout=i,c&&c(i),ai(e,i,A.current))}}},[]),L=(0,j.useCallback)(a=>{let{layout:b,panelDataArray:c}=E.current,{panelSize:d}=as(c,a,b);return Y(null!=d,`Panel size not found for panel "${a.id}"`),d},[]),M=(0,j.useCallback)((a,b)=>{let{panelDataArray:c}=E.current,d=ar(c,a);return function({defaultSize:a,dragState:b,layout:c,panelData:d,panelIndex:e,precision:f=3}){let g=c[e];return{flexBasis:0,flexGrow:null==g?void 0!=a?a.toFixed(f):"1":1===d.length?"1":g.toFixed(f),flexShrink:1,overflow:"hidden",pointerEvents:null!==b?"none":void 0}}({defaultSize:b,dragState:s,layout:u,panelData:c,panelIndex:d})},[s,u]),N=(0,j.useCallback)(a=>{let{layout:b,panelDataArray:c}=E.current,{collapsedSize:d=0,collapsible:e,panelSize:f}=as(c,a,b);return Y(null!=f,`Panel size not found for panel "${a.id}"`),!0===e&&$(f,d)},[]),P=(0,j.useCallback)(a=>{let{layout:b,panelDataArray:c}=E.current,{collapsedSize:d=0,collapsible:e,panelSize:f}=as(c,a,b);return Y(null!=f,`Panel size not found for panel "${a.id}"`),!e||Z(f,d)>0},[]),Q=(0,j.useCallback)(a=>{let{panelDataArray:b}=E.current;b.push(a),b.sort((a,b)=>{let c=a.order,d=b.order;return null==c&&null==d?0:null==c?-1:null==d?1:c-d}),E.current.panelDataArrayChanged=!0,w()},[w]),R=(0,j.useCallback)(a=>{let b=!1,c=r.current;return c&&"rtl"===window.getComputedStyle(c,null).getPropertyValue("direction")&&(b=!0),function(c){var d,e;c.preventDefault();let f=r.current;if(!f)return()=>null;let{direction:g,dragState:h,id:i,keyboardResizeBy:j,onLayout:k}=D.current,{layout:l,panelDataArray:n}=E.current,{initialLayout:o}=null!=h?h:{},p=ae(i,a,f),q=function(a,b,c,d,e,f){if(x(a)){let b="horizontal"===c,d=0;d=a.shiftKey?100:null!=e?e:10;let f=0;switch(a.key){case"ArrowDown":f=b?0:d;break;case"ArrowLeft":f=b?-d:0;break;case"ArrowRight":f=b?d:0;break;case"ArrowUp":f=b?0:-d;break;case"End":f=100;break;case"Home":f=-100}return f}return null==d?0:function(a,b,c,d,e){let f="horizontal"===c,g=ag(b,e);Y(g,`No resize handle element found for id "${b}"`);let h=g.getAttribute(m.groupId);Y(h,"Resize handle element has no group id attribute");let{initialCursorPosition:i}=d,j=ah(c,a),k=af(h,e);Y(k,`No group element found for id "${h}"`);let l=k.getBoundingClientRect();return(j-i)/(f?l.width:l.height)*100}(a,b,c,d,f)}(c,a,g,h,j,f),s="horizontal"===g;s&&b&&(q=-q);let t=ab({delta:q,initialLayout:null!=o?o:l,panelConstraints:n.map(a=>a.constraints),pivotIndices:p,prevLayout:l,trigger:x(c)?"keyboard":"mouse-or-touch"}),u=!aj(l,t);(y(c)||z(c))&&C.current!=q&&((C.current=q,u||0===q)?O.set(a,0):s?(d=q<0?G:H,O.set(a,d)):(e=q<0?I:J,O.set(a,e))),u&&(v(t),E.current.layout=t,k&&k(t),ai(n,t,A.current))}},[]),S=(0,j.useCallback)((a,b)=>{let{onLayout:c}=D.current,{layout:d,panelDataArray:e}=E.current,f=e.map(a=>a.constraints),{panelSize:g,pivotIndices:h}=as(e,a,d);Y(null!=g,`Panel size not found for panel "${a.id}"`);let i=ab({delta:ar(e,a)===e.length-1?g-b:b-g,initialLayout:d,panelConstraints:f,pivotIndices:h,prevLayout:d,trigger:"imperative-api"});aj(d,i)||(v(i),E.current.layout=i,c&&c(i),ai(e,i,A.current))},[]),T=(0,j.useCallback)((a,b)=>{let{layout:c,panelDataArray:d}=E.current,{collapsedSize:e=0,collapsible:f}=b,{collapsedSize:g=0,collapsible:h,maxSize:i=100,minSize:j=0}=a.constraints,{panelSize:k}=as(d,a,c);null!=k&&(f&&h&&$(k,e)?$(e,g)||S(a,g):k<j?S(a,j):k>i&&S(a,i))},[S]),U=(0,j.useCallback)((a,b)=>{let{direction:c}=D.current,{layout:d}=E.current;if(!r.current)return;let e=ag(a,r.current);Y(e,`Drag handle element not found for id "${a}"`);let f=ah(c,b);t({dragHandleId:a,dragHandleRect:e.getBoundingClientRect(),initialCursorPosition:f,initialLayout:d})},[]),V=(0,j.useCallback)(()=>{t(null)},[]),W=(0,j.useCallback)(a=>{let{panelDataArray:b}=E.current,c=ar(b,a);c>=0&&(b.splice(c,1),delete A.current[a.id],E.current.panelDataArrayChanged=!0,w())},[w]),X=(0,j.useMemo)(()=>({collapsePanel:F,direction:d,dragState:s,expandPanel:K,getPanelSize:L,getPanelStyle:M,groupId:p,isPanelCollapsed:N,isPanelExpanded:P,reevaluatePanelConstraints:T,registerPanel:Q,registerResizeHandle:R,resizePanel:S,startDragging:U,stopDragging:V,unregisterPanel:W,panelGroupElement:r.current}),[F,s,d,K,L,M,p,N,P,T,Q,R,S,U,V,W]);return(0,j.createElement)(l.Provider,{value:X},(0,j.createElement)(n,{...o,children:b,className:c,id:f,ref:r,style:{display:"flex",flexDirection:"horizontal"===d?"row":"column",height:"100%",overflow:"hidden",width:"100%",...k},[m.group]:"",[m.groupDirection]:d,[m.groupId]:p}))}let aq=(0,j.forwardRef)((a,b)=>(0,j.createElement)(ap,{...a,forwardedRef:b}));function ar(a,b){return a.findIndex(a=>a===b||a.id===b.id)}function as(a,b,c){let d=ar(a,b),e=d===a.length-1,f=c[d];return{...b.constraints,panelSize:f,pivotIndices:e?[d-1,d]:[d,d+1]}}function at({children:a=null,className:b="",disabled:c=!1,hitAreaMargins:d,id:e,onBlur:f,onClick:g,onDragging:h,onFocus:i,onPointerDown:k,onPointerUp:n,style:o={},tabIndex:p=0,tagName:r="div",...s}){var t,u;let v=(0,j.useRef)(null),w=(0,j.useRef)({onClick:g,onDragging:h,onPointerDown:k,onPointerUp:n});(0,j.useEffect)(()=>{w.current.onClick=g,w.current.onDragging=h,w.current.onPointerDown=k,w.current.onPointerUp=n});let x=(0,j.useContext)(l);if(null===x)throw Error("PanelResizeHandle components must be rendered within a PanelGroup container");let{direction:y,groupId:z,registerResizeHandle:A,startDragging:B,stopDragging:C,panelGroupElement:D}=x,E=q(e),[F,G]=(0,j.useState)("inactive"),[H,I]=(0,j.useState)(!1),[J,K]=(0,j.useState)(null),M=(0,j.useRef)({state:F});(0,j.useEffect)(()=>{if(c)K(null);else{let a=A(E);K(()=>a)}},[c,E,A]);let Q=null!=(t=null==d?void 0:d.coarse)?t:15,R=null!=(u=null==d?void 0:d.fine)?u:5;return(0,j.useEffect)(()=>{if(c||null==J)return;let a=v.current;Y(a,"Element ref not attached");let b=!1;return function(a,b,c,d,e){var f;let{ownerDocument:g}=b,h={direction:c,element:b,hitAreaMargins:d,setResizeHandlerState:e},i=null!=(f=N.get(g))?f:0;return N.set(g,i+1),P.add(h),W(),function(){var b;O.delete(a),P.delete(h);let c=null!=(b=N.get(g))?b:1;if(N.set(g,c-1),W(),1===c&&N.delete(g),L.includes(h)){let a=L.indexOf(h);a>=0&&L.splice(a,1),V(),e("up",!0,null)}}}(E,a,y,{coarse:Q,fine:R},(a,c,d)=>{if(!c)return void G("inactive");switch(a){case"down":{G("drag"),b=!1,Y(d,'Expected event to be defined for "down" action'),B(E,d);let{onDragging:a,onPointerDown:c}=w.current;null==a||a(!0),null==c||c();break}case"move":{let{state:a}=M.current;b=!0,"drag"!==a&&G("hover"),Y(d,'Expected event to be defined for "move" action'),J(d);break}case"up":{G("hover"),C();let{onClick:a,onDragging:c,onPointerUp:d}=w.current;null==c||c(!1),null==d||d(),b||null==a||a()}}})},[Q,y,c,R,A,E,J,B,C]),!function({disabled:a,handleId:b,resizeHandler:c,panelGroupElement:d}){(0,j.useEffect)(()=>{if(a||null==c||null==d)return;let e=ag(b,d);if(null==e)return;let f=a=>{if(!a.defaultPrevented)switch(a.key){case"ArrowDown":case"ArrowLeft":case"ArrowRight":case"ArrowUp":case"End":case"Home":a.preventDefault(),c(a);break;case"F6":{a.preventDefault();let c=e.getAttribute(m.groupId);Y(c,`No group element found for id "${c}"`);let f=ac(c,d),g=ad(c,b,d);Y(null!==g,`No resize element found for id "${b}"`);let h=a.shiftKey?g>0?g-1:f.length-1:g+1<f.length?g+1:0;f[h].focus()}}};return e.addEventListener("keydown",f),()=>{e.removeEventListener("keydown",f)}},[d,a,b,c])}({disabled:c,handleId:E,resizeHandler:J,panelGroupElement:D}),(0,j.createElement)(r,{...s,children:a,className:b,id:e,onBlur:()=>{I(!1),null==f||f()},onFocus:()=>{I(!0),null==i||i()},ref:v,role:"separator",style:{touchAction:"none",userSelect:"none",...o},tabIndex:p,[m.groupDirection]:y,[m.groupId]:z,[m.resizeHandle]:"",[m.resizeHandleActive]:"drag"===F?"pointer":H?"keyboard":void 0,[m.resizeHandleEnabled]:!c,[m.resizeHandleId]:E,[m.resizeHandleState]:F})}ap.displayName="PanelGroup",aq.displayName="forwardRef(PanelGroup)",at.displayName="PanelResizeHandle";var au=c(4289),av=c(35664),aw=c(11697),ax=c(91462),ay=c(61498),az=c(11889);function aA(){let a=!!(0,ax.o)(),b=(0,au.kk)(async()=>{let a=await av.A.notes.filter(a=>null===a.deletedAt).sortBy("updatedAt");return a.reverse(),a.sort((a,b)=>!!b.isPinned-!!a.isPinned)},[]),c=async(b,c)=>{let d=Date.now(),e={...c,updatedAt:d};if(await av.A.notes.update(b,e),a){let a=await av.A.notes.get(b);if(a){let b={id:(0,aw.A)(),entityType:"note",operation:"update",payload:a,timestamp:d};await av.A.syncOutbox.add(b),(0,ay.gz)()}}},d=async b=>{let c=Date.now(),d={id:(0,aw.A)(),title:b.title,content:b.content,createdAt:c,updatedAt:c,folderId:b.folderId||null,isPinned:!1,isLocked:!1,isQuickNote:b.isQuickNote||!1,deletedAt:null,tags:[]};if(await av.A.notes.add(d),a){let a={id:(0,aw.A)(),entityType:"note",operation:"create",payload:d,timestamp:c};await av.A.syncOutbox.add(a),(0,ay.gz)()}return d},e=async a=>d({...a,isQuickNote:!0}),f=async a=>(console.log(`ðŸ—‘ï¸ Moving note to trash: ${a}`),c(a,{deletedAt:Date.now(),isPinned:!1})),g=async a=>(console.log(`â™»ï¸ Recovering note from trash: ${a}`),c(a,{deletedAt:null})),h=async(a,b)=>{let d=await av.A.notes.get(a);if(!d)return;let e=b.trim().toLowerCase();if(e&&!(d.tags||[]).includes(e))return c(a,{tags:[...d.tags||[],e]})},i=async(a,b)=>{let d=await av.A.notes.get(a);if(!d)return;let e=b.trim().toLowerCase();return c(a,{tags:(d.tags||[]).filter(a=>a!==e)})};return{notes:b,addNote:d,addQuickNote:e,updateNote:c,deleteNote:f,deleteNotePermanently:async b=>{console.log(`ðŸ”¥ Permanently deleting note: ${b}`);let c=await av.A.notes.get(b);if(c&&c.content)try{let a=new DOMParser().parseFromString(c.content,"text/html").querySelectorAll("img, video, audio, a"),b=[];a.forEach(a=>{let c=a.getAttribute("src")||a.getAttribute("href");c&&c.startsWith("http")&&(console.log("Deleting attachment from S3:",c),b.push((0,az.e)(c)))}),b.length>0&&await Promise.all(b)}catch(a){console.error("Error cleaning up S3 attachments:",a)}if(await av.A.notes.delete(b),a){let a={id:(0,aw.A)(),entityType:"note",operation:"delete",payload:{id:b},timestamp:Date.now()};await av.A.syncOutbox.add(a),(0,ay.gz)()}},recoverNote:g,pinNote:a=>c(a,{isPinned:!0}),unpinNote:a=>c(a,{isPinned:!1}),lockNote:a=>c(a,{isLocked:!0}),unlockNote:a=>c(a,{isLocked:!1}),moveNoteToFolder:(a,b)=>c(a,{folderId:b}),addTagToNote:h,removeTagFromNote:i,verifyMasterPassword:async a=>{if("undefined"!=typeof navigator&&!navigator.onLine)throw Error("You are offline. Connect to internet to unlock notes.");try{let b=await fetch("/api/notes-password",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({action:"verify",password:a})}),c=await b.json();if(!b.ok)throw Error(c.error||"Incorrect password");return!0}catch(a){if(a.message.includes("offline")||a.message.includes("fetch"))throw Error("You are offline. Connect to internet to unlock notes.");throw a}}}}function aB(){return{trashedNotes:(0,au.kk)(()=>av.A.notes.filter(a=>null!==a.deletedAt).sortBy("deletedAt"),[])}}function aC(){return{tags:(0,au.kk)(async()=>{let a=await av.A.notes.toArray(),b=new Set;return a.forEach(a=>{(a.tags||[]).forEach(a=>b.add(a))}),Array.from(b).sort()},[])}}function aD(){return{metadata:(0,au.kk)(()=>av.A.userMetadata.limit(1).first(),[])}}var aE=c(23339);let aF=(0,aE.A)("panel-right-close",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M15 3v18",key:"14nvp0"}],["path",{d:"m8 9 3 3-3 3",key:"12hl5m"}]]),aG=(0,aE.A)("folder-plus",[["path",{d:"M12 10v6",key:"1bos4e"}],["path",{d:"M9 13h6",key:"1uhe8q"}],["path",{d:"M20 20a2 2 0 0 0 2-2V8a2 2 0 0 0-2-2h-7.9a2 2 0 0 1-1.69-.9L9.6 3.9A2 2 0 0 0 7.93 3H4a2 2 0 0 0-2 2v13a2 2 0 0 0 2 2Z",key:"1kt360"}]]);var aH=c(46422);let aI=(0,aE.A)("notebook",[["path",{d:"M2 6h4",key:"aawbzj"}],["path",{d:"M2 10h4",key:"l0bgd4"}],["path",{d:"M2 14h4",key:"1gsvsf"}],["path",{d:"M2 18h4",key:"1bu2t1"}],["rect",{width:"16",height:"20",x:"4",y:"2",rx:"2",key:"1nb95v"}],["path",{d:"M16 2v20",key:"rotuqe"}]]);var aJ=c(40284);let aK=(0,aE.A)("folder",[["path",{d:"M20 20a2 2 0 0 0 2-2V8a2 2 0 0 0-2-2h-7.9a2 2 0 0 1-1.69-.9L9.6 3.9A2 2 0 0 0 7.93 3H4a2 2 0 0 0-2 2v13a2 2 0 0 0 2 2Z",key:"1kt360"}]]),aL=(0,aE.A)("tag",[["path",{d:"M12.586 2.586A2 2 0 0 0 11.172 2H4a2 2 0 0 0-2 2v7.172a2 2 0 0 0 .586 1.414l8.704 8.704a2.426 2.426 0 0 0 3.42 0l6.58-6.58a2.426 2.426 0 0 0 0-3.42z",key:"vktsd0"}],["circle",{cx:"7.5",cy:"7.5",r:".5",fill:"currentColor",key:"kqv944"}]]),aM=(0,aE.A)("panel-left-close",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M9 3v18",key:"fh3hqa"}],["path",{d:"m16 15-3-3 3-3",key:"14y99z"}]]);function aN(a,b,{checkForDefaultPrevented:c=!0}={}){return function(d){if(a?.(d),!1===c||!d.defaultPrevented)return b?.(d)}}function aO(a,b=[]){let c=[],d=()=>{let b=c.map(a=>j.createContext(a));return function(c){let d=c?.[a]||b;return j.useMemo(()=>({[`__scope${a}`]:{...c,[a]:d}}),[c,d])}};return d.scopeName=a,[function(b,d){let e=j.createContext(d),f=c.length;c=[...c,d];let g=b=>{let{scope:c,children:d,...g}=b,h=c?.[a]?.[f]||e,k=j.useMemo(()=>g,Object.values(g));return(0,i.jsx)(h.Provider,{value:k,children:d})};return g.displayName=b+"Provider",[g,function(c,g){let h=g?.[a]?.[f]||e,i=j.useContext(h);if(i)return i;if(void 0!==d)return d;throw Error(`\`${c}\` must be used within \`${b}\``)}]},function(...a){let b=a[0];if(1===a.length)return b;let c=()=>{let c=a.map(a=>({useScope:a(),scopeName:a.scopeName}));return function(a){let d=c.reduce((b,{useScope:c,scopeName:d})=>{let e=c(a)[`__scope${d}`];return{...b,...e}},{});return j.useMemo(()=>({[`__scope${b.scopeName}`]:d}),[d])}};return c.scopeName=b.scopeName,c}(d,...b)]}"undefined"!=typeof window&&window.document&&window.document.createElement;var aP=c(23312);function aQ(a,b){if("function"==typeof a)return a(b);null!=a&&(a.current=b)}function aR(...a){return b=>{let c=!1,d=a.map(a=>{let d=aQ(a,b);return c||"function"!=typeof d||(c=!0),d});if(c)return()=>{for(let b=0;b<d.length;b++){let c=d[b];"function"==typeof c?c():aQ(a[b],null)}}}}function aS(...a){return j.useCallback(aR(...a),a)}function aT(a){let b=function(a){let b=j.forwardRef((a,b)=>{let{children:c,...d}=a;if(j.isValidElement(c)){var e;let a,f,g=(e=c,(f=(a=Object.getOwnPropertyDescriptor(e.props,"ref")?.get)&&"isReactWarning"in a&&a.isReactWarning)?e.ref:(f=(a=Object.getOwnPropertyDescriptor(e,"ref")?.get)&&"isReactWarning"in a&&a.isReactWarning)?e.props.ref:e.props.ref||e.ref),h=function(a,b){let c={...b};for(let d in b){let e=a[d],f=b[d];/^on[A-Z]/.test(d)?e&&f?c[d]=(...a)=>{let b=f(...a);return e(...a),b}:e&&(c[d]=e):"style"===d?c[d]={...e,...f}:"className"===d&&(c[d]=[e,f].filter(Boolean).join(" "))}return{...a,...c}}(d,c.props);return c.type!==j.Fragment&&(h.ref=b?aR(b,g):g),j.cloneElement(c,h)}return j.Children.count(c)>1?j.Children.only(null):null});return b.displayName=`${a}.SlotClone`,b}(a),c=j.forwardRef((a,c)=>{let{children:d,...e}=a,f=j.Children.toArray(d),g=f.find(aV);if(g){let a=g.props.children,d=f.map(b=>b!==g?b:j.Children.count(a)>1?j.Children.only(null):j.isValidElement(a)?a.props.children:null);return(0,i.jsx)(b,{...e,ref:c,children:j.isValidElement(a)?j.cloneElement(a,void 0,d):null})}return(0,i.jsx)(b,{...e,ref:c,children:d})});return c.displayName=`${a}.Slot`,c}var aU=Symbol("radix.slottable");function aV(a){return j.isValidElement(a)&&"function"==typeof a.type&&"__radixId"in a.type&&a.type.__radixId===aU}var aW=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"].reduce((a,b)=>{let c=aT(`Primitive.${b}`),d=j.forwardRef((a,d)=>{let{asChild:e,...f}=a;return"undefined"!=typeof window&&(window[Symbol.for("radix-ui")]=!0),(0,i.jsx)(e?c:b,{...f,ref:d})});return d.displayName=`Primitive.${b}`,{...a,[b]:d}},{});function aX(a,b){a&&aP.flushSync(()=>a.dispatchEvent(b))}function aY(a){let b=a+"CollectionProvider",[c,d]=aO(b),[e,f]=c(b,{collectionRef:{current:null},itemMap:new Map}),g=a=>{let{scope:b,children:c}=a,d=j.useRef(null),f=j.useRef(new Map).current;return(0,i.jsx)(e,{scope:b,itemMap:f,collectionRef:d,children:c})};g.displayName=b;let h=a+"CollectionSlot",k=aT(h),l=j.forwardRef((a,b)=>{let{scope:c,children:d}=a,e=aS(b,f(h,c).collectionRef);return(0,i.jsx)(k,{ref:e,children:d})});l.displayName=h;let m=a+"CollectionItemSlot",n="data-radix-collection-item",o=aT(m),p=j.forwardRef((a,b)=>{let{scope:c,children:d,...e}=a,g=j.useRef(null),h=aS(b,g),k=f(m,c);return j.useEffect(()=>(k.itemMap.set(g,{ref:g,...e}),()=>void k.itemMap.delete(g))),(0,i.jsx)(o,{...{[n]:""},ref:h,children:d})});return p.displayName=m,[{Provider:g,Slot:l,ItemSlot:p},function(b){let c=f(a+"CollectionConsumer",b);return j.useCallback(()=>{let a=c.collectionRef.current;if(!a)return[];let b=Array.from(a.querySelectorAll(`[${n}]`));return Array.from(c.itemMap.values()).sort((a,c)=>b.indexOf(a.ref.current)-b.indexOf(c.ref.current))},[c.collectionRef,c.itemMap])},d]}var aZ=new WeakMap;function a$(a,b){if("at"in Array.prototype)return Array.prototype.at.call(a,b);let c=function(a,b){let c=a.length,d=a_(b),e=d>=0?d:c+d;return e<0||e>=c?-1:e}(a,b);return -1===c?void 0:a[c]}function a_(a){return a!=a||0===a?0:Math.trunc(a)}(class a extends Map{#a;constructor(a){super(a),this.#a=[...super.keys()],aZ.set(this,!0)}set(a,b){return aZ.get(this)&&(this.has(a)?this.#a[this.#a.indexOf(a)]=a:this.#a.push(a)),super.set(a,b),this}insert(a,b,c){let d,e=this.has(b),f=this.#a.length,g=a_(a),h=g>=0?g:f+g,i=h<0||h>=f?-1:h;if(i===this.size||e&&i===this.size-1||-1===i)return this.set(b,c),this;let j=this.size+ +!e;g<0&&h++;let k=[...this.#a],l=!1;for(let a=h;a<j;a++)if(h===a){let f=k[a];k[a]===b&&(f=k[a+1]),e&&this.delete(b),d=this.get(f),this.set(b,c)}else{l||k[a-1]!==b||(l=!0);let c=k[l?a:a-1],e=d;d=this.get(c),this.delete(c),this.set(c,e)}return this}with(b,c,d){let e=new a(this);return e.insert(b,c,d),e}before(a){let b=this.#a.indexOf(a)-1;if(!(b<0))return this.entryAt(b)}setBefore(a,b,c){let d=this.#a.indexOf(a);return -1===d?this:this.insert(d,b,c)}after(a){let b=this.#a.indexOf(a);if(-1!==(b=-1===b||b===this.size-1?-1:b+1))return this.entryAt(b)}setAfter(a,b,c){let d=this.#a.indexOf(a);return -1===d?this:this.insert(d+1,b,c)}first(){return this.entryAt(0)}last(){return this.entryAt(-1)}clear(){return this.#a=[],super.clear()}delete(a){let b=super.delete(a);return b&&this.#a.splice(this.#a.indexOf(a),1),b}deleteAt(a){let b=this.keyAt(a);return void 0!==b&&this.delete(b)}at(a){let b=a$(this.#a,a);if(void 0!==b)return this.get(b)}entryAt(a){let b=a$(this.#a,a);if(void 0!==b)return[b,this.get(b)]}indexOf(a){return this.#a.indexOf(a)}keyAt(a){return a$(this.#a,a)}from(a,b){let c=this.indexOf(a);if(-1===c)return;let d=c+b;return d<0&&(d=0),d>=this.size&&(d=this.size-1),this.at(d)}keyFrom(a,b){let c=this.indexOf(a);if(-1===c)return;let d=c+b;return d<0&&(d=0),d>=this.size&&(d=this.size-1),this.keyAt(d)}find(a,b){let c=0;for(let d of this){if(Reflect.apply(a,b,[d,c,this]))return d;c++}}findIndex(a,b){let c=0;for(let d of this){if(Reflect.apply(a,b,[d,c,this]))return c;c++}return -1}filter(b,c){let d=[],e=0;for(let a of this)Reflect.apply(b,c,[a,e,this])&&d.push(a),e++;return new a(d)}map(b,c){let d=[],e=0;for(let a of this)d.push([a[0],Reflect.apply(b,c,[a,e,this])]),e++;return new a(d)}reduce(...a){let[b,c]=a,d=0,e=c??this.at(0);for(let c of this)e=0===d&&1===a.length?c:Reflect.apply(b,this,[e,c,d,this]),d++;return e}reduceRight(...a){let[b,c]=a,d=c??this.at(-1);for(let c=this.size-1;c>=0;c--){let e=this.at(c);d=c===this.size-1&&1===a.length?e:Reflect.apply(b,this,[d,e,c,this])}return d}toSorted(b){return new a([...this.entries()].sort(b))}toReversed(){let b=new a;for(let a=this.size-1;a>=0;a--){let c=this.keyAt(a),d=this.get(c);b.set(c,d)}return b}toSpliced(...b){let c=[...this.entries()];return c.splice(...b),new a(c)}slice(b,c){let d=new a,e=this.size-1;if(void 0===b)return d;b<0&&(b+=this.size),void 0!==c&&c>0&&(e=c-1);for(let a=b;a<=e;a++){let b=this.keyAt(a),c=this.get(b);d.set(b,c)}return d}every(a,b){let c=0;for(let d of this){if(!Reflect.apply(a,b,[d,c,this]))return!1;c++}return!0}some(a,b){let c=0;for(let d of this){if(Reflect.apply(a,b,[d,c,this]))return!0;c++}return!1}});var a0=j.createContext(void 0);function a1(a){let b=j.useContext(a0);return a||b||"ltr"}function a2(a){let b=j.useRef(a);return j.useEffect(()=>{b.current=a}),j.useMemo(()=>(...a)=>b.current?.(...a),[])}var a3="dismissableLayer.update",a4=j.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),a5=j.forwardRef((a,b)=>{let{disableOutsidePointerEvents:c=!1,onEscapeKeyDown:d,onPointerDownOutside:e,onFocusOutside:f,onInteractOutside:h,onDismiss:k,...l}=a,m=j.useContext(a4),[n,o]=j.useState(null),p=n?.ownerDocument??globalThis?.document,[,q]=j.useState({}),r=aS(b,a=>o(a)),s=Array.from(m.layers),[t]=[...m.layersWithOutsidePointerEventsDisabled].slice(-1),u=s.indexOf(t),v=n?s.indexOf(n):-1,w=m.layersWithOutsidePointerEventsDisabled.size>0,x=v>=u,y=function(a,b=globalThis?.document){let c=a2(a),d=j.useRef(!1),e=j.useRef(()=>{});return j.useEffect(()=>{let a=a=>{if(a.target&&!d.current){let d=function(){a7("dismissableLayer.pointerDownOutside",c,f,{discrete:!0})},f={originalEvent:a};"touch"===a.pointerType?(b.removeEventListener("click",e.current),e.current=d,b.addEventListener("click",e.current,{once:!0})):d()}else b.removeEventListener("click",e.current);d.current=!1},f=window.setTimeout(()=>{b.addEventListener("pointerdown",a)},0);return()=>{window.clearTimeout(f),b.removeEventListener("pointerdown",a),b.removeEventListener("click",e.current)}},[b,c]),{onPointerDownCapture:()=>d.current=!0}}(a=>{let b=a.target,c=[...m.branches].some(a=>a.contains(b));x&&!c&&(e?.(a),h?.(a),a.defaultPrevented||k?.())},p),z=function(a,b=globalThis?.document){let c=a2(a),d=j.useRef(!1);return j.useEffect(()=>{let a=a=>{a.target&&!d.current&&a7("dismissableLayer.focusOutside",c,{originalEvent:a},{discrete:!1})};return b.addEventListener("focusin",a),()=>b.removeEventListener("focusin",a)},[b,c]),{onFocusCapture:()=>d.current=!0,onBlurCapture:()=>d.current=!1}}(a=>{let b=a.target;![...m.branches].some(a=>a.contains(b))&&(f?.(a),h?.(a),a.defaultPrevented||k?.())},p);return!function(a,b=globalThis?.document){let c=a2(a);j.useEffect(()=>{let a=a=>{"Escape"===a.key&&c(a)};return b.addEventListener("keydown",a,{capture:!0}),()=>b.removeEventListener("keydown",a,{capture:!0})},[c,b])}(a=>{v===m.layers.size-1&&(d?.(a),!a.defaultPrevented&&k&&(a.preventDefault(),k()))},p),j.useEffect(()=>{if(n)return c&&(0===m.layersWithOutsidePointerEventsDisabled.size&&(g=p.body.style.pointerEvents,p.body.style.pointerEvents="none"),m.layersWithOutsidePointerEventsDisabled.add(n)),m.layers.add(n),a6(),()=>{c&&1===m.layersWithOutsidePointerEventsDisabled.size&&(p.body.style.pointerEvents=g)}},[n,p,c,m]),j.useEffect(()=>()=>{n&&(m.layers.delete(n),m.layersWithOutsidePointerEventsDisabled.delete(n),a6())},[n,m]),j.useEffect(()=>{let a=()=>q({});return document.addEventListener(a3,a),()=>document.removeEventListener(a3,a)},[]),(0,i.jsx)(aW.div,{...l,ref:r,style:{pointerEvents:w?x?"auto":"none":void 0,...a.style},onFocusCapture:aN(a.onFocusCapture,z.onFocusCapture),onBlurCapture:aN(a.onBlurCapture,z.onBlurCapture),onPointerDownCapture:aN(a.onPointerDownCapture,y.onPointerDownCapture)})});function a6(){let a=new CustomEvent(a3);document.dispatchEvent(a)}function a7(a,b,c,{discrete:d}){let e=c.originalEvent.target,f=new CustomEvent(a,{bubbles:!1,cancelable:!0,detail:c});b&&e.addEventListener(a,b,{once:!0}),d?aX(e,f):e.dispatchEvent(f)}a5.displayName="DismissableLayer",j.forwardRef((a,b)=>{let c=j.useContext(a4),d=j.useRef(null),e=aS(b,d);return j.useEffect(()=>{let a=d.current;if(a)return c.branches.add(a),()=>{c.branches.delete(a)}},[c.branches]),(0,i.jsx)(aW.div,{...a,ref:e})}).displayName="DismissableLayerBranch";var a8=0;function a9(){j.useEffect(()=>{let a=document.querySelectorAll("[data-radix-focus-guard]");return document.body.insertAdjacentElement("afterbegin",a[0]??ba()),document.body.insertAdjacentElement("beforeend",a[1]??ba()),a8++,()=>{1===a8&&document.querySelectorAll("[data-radix-focus-guard]").forEach(a=>a.remove()),a8--}},[])}function ba(){let a=document.createElement("span");return a.setAttribute("data-radix-focus-guard",""),a.tabIndex=0,a.style.outline="none",a.style.opacity="0",a.style.position="fixed",a.style.pointerEvents="none",a}var bb="focusScope.autoFocusOnMount",bc="focusScope.autoFocusOnUnmount",bd={bubbles:!1,cancelable:!0},be=j.forwardRef((a,b)=>{let{loop:c=!1,trapped:d=!1,onMountAutoFocus:e,onUnmountAutoFocus:f,...g}=a,[h,k]=j.useState(null),l=a2(e),m=a2(f),n=j.useRef(null),o=aS(b,a=>k(a)),p=j.useRef({paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}}).current;j.useEffect(()=>{if(d){let a=function(a){if(p.paused||!h)return;let b=a.target;h.contains(b)?n.current=b:bh(n.current,{select:!0})},b=function(a){if(p.paused||!h)return;let b=a.relatedTarget;null!==b&&(h.contains(b)||bh(n.current,{select:!0}))};document.addEventListener("focusin",a),document.addEventListener("focusout",b);let c=new MutationObserver(function(a){if(document.activeElement===document.body)for(let b of a)b.removedNodes.length>0&&bh(h)});return h&&c.observe(h,{childList:!0,subtree:!0}),()=>{document.removeEventListener("focusin",a),document.removeEventListener("focusout",b),c.disconnect()}}},[d,h,p.paused]),j.useEffect(()=>{if(h){bi.add(p);let a=document.activeElement;if(!h.contains(a)){let b=new CustomEvent(bb,bd);h.addEventListener(bb,l),h.dispatchEvent(b),b.defaultPrevented||(function(a,{select:b=!1}={}){let c=document.activeElement;for(let d of a)if(bh(d,{select:b}),document.activeElement!==c)return}(bf(h).filter(a=>"A"!==a.tagName),{select:!0}),document.activeElement===a&&bh(h))}return()=>{h.removeEventListener(bb,l),setTimeout(()=>{let b=new CustomEvent(bc,bd);h.addEventListener(bc,m),h.dispatchEvent(b),b.defaultPrevented||bh(a??document.body,{select:!0}),h.removeEventListener(bc,m),bi.remove(p)},0)}}},[h,l,m,p]);let q=j.useCallback(a=>{if(!c&&!d||p.paused)return;let b="Tab"===a.key&&!a.altKey&&!a.ctrlKey&&!a.metaKey,e=document.activeElement;if(b&&e){let b=a.currentTarget,[d,f]=function(a){let b=bf(a);return[bg(b,a),bg(b.reverse(),a)]}(b);d&&f?a.shiftKey||e!==f?a.shiftKey&&e===d&&(a.preventDefault(),c&&bh(f,{select:!0})):(a.preventDefault(),c&&bh(d,{select:!0})):e===b&&a.preventDefault()}},[c,d,p.paused]);return(0,i.jsx)(aW.div,{tabIndex:-1,...g,ref:o,onKeyDown:q})});function bf(a){let b=[],c=document.createTreeWalker(a,NodeFilter.SHOW_ELEMENT,{acceptNode:a=>{let b="INPUT"===a.tagName&&"hidden"===a.type;return a.disabled||a.hidden||b?NodeFilter.FILTER_SKIP:a.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;c.nextNode();)b.push(c.currentNode);return b}function bg(a,b){for(let c of a)if(!function(a,{upTo:b}){if("hidden"===getComputedStyle(a).visibility)return!0;for(;a&&(void 0===b||a!==b);){if("none"===getComputedStyle(a).display)return!0;a=a.parentElement}return!1}(c,{upTo:b}))return c}function bh(a,{select:b=!1}={}){if(a&&a.focus){var c;let d=document.activeElement;a.focus({preventScroll:!0}),a!==d&&(c=a)instanceof HTMLInputElement&&"select"in c&&b&&a.select()}}be.displayName="FocusScope";var bi=function(){let a=[];return{add(b){let c=a[0];b!==c&&c?.pause(),(a=bj(a,b)).unshift(b)},remove(b){a=bj(a,b),a[0]?.resume()}}}();function bj(a,b){let c=[...a],d=c.indexOf(b);return -1!==d&&c.splice(d,1),c}var bk=globalThis?.document?j.useLayoutEffect:()=>{},bl=k[" useId ".trim().toString()]||(()=>void 0),bm=0;function bn(a){let[b,c]=j.useState(bl());return bk(()=>{a||c(a=>a??String(bm++))},[a]),a||(b?`radix-${b}`:"")}var bo=c(62716),bp=c(2765),bq=j.forwardRef((a,b)=>{let{children:c,width:d=10,height:e=5,...f}=a;return(0,i.jsx)(aW.svg,{...f,ref:b,width:d,height:e,viewBox:"0 0 30 10",preserveAspectRatio:"none",children:a.asChild?c:(0,i.jsx)("polygon",{points:"0,0 30,0 15,10"})})});bq.displayName="Arrow";var br="Popper",[bs,bt]=aO(br),[bu,bv]=bs(br),bw=a=>{let{__scopePopper:b,children:c}=a,[d,e]=j.useState(null);return(0,i.jsx)(bu,{scope:b,anchor:d,onAnchorChange:e,children:c})};bw.displayName=br;var bx="PopperAnchor",by=j.forwardRef((a,b)=>{let{__scopePopper:c,virtualRef:d,...e}=a,f=bv(bx,c),g=j.useRef(null),h=aS(b,g),k=j.useRef(null);return j.useEffect(()=>{let a=k.current;k.current=d?.current||g.current,a!==k.current&&f.onAnchorChange(k.current)}),d?null:(0,i.jsx)(aW.div,{...e,ref:h})});by.displayName=bx;var bz="PopperContent",[bA,bB]=bs(bz),bC=j.forwardRef((a,b)=>{let{__scopePopper:c,side:d="bottom",sideOffset:e=0,align:f="center",alignOffset:g=0,arrowPadding:h=0,avoidCollisions:k=!0,collisionBoundary:l=[],collisionPadding:m=0,sticky:n="partial",hideWhenDetached:o=!1,updatePositionStrategy:p="optimized",onPlaced:q,...r}=a,s=bv(bz,c),[t,u]=j.useState(null),v=aS(b,a=>u(a)),[w,x]=j.useState(null),y=function(a){let[b,c]=j.useState(void 0);return bk(()=>{if(a){c({width:a.offsetWidth,height:a.offsetHeight});let b=new ResizeObserver(b=>{let d,e;if(!Array.isArray(b)||!b.length)return;let f=b[0];if("borderBoxSize"in f){let a=f.borderBoxSize,b=Array.isArray(a)?a[0]:a;d=b.inlineSize,e=b.blockSize}else d=a.offsetWidth,e=a.offsetHeight;c({width:d,height:e})});return b.observe(a,{box:"border-box"}),()=>b.unobserve(a)}c(void 0)},[a]),b}(w),z=y?.width??0,A=y?.height??0,B="number"==typeof m?m:{top:0,right:0,bottom:0,left:0,...m},C=Array.isArray(l)?l:[l],D=C.length>0,E={padding:B,boundary:C.filter(bG),altBoundary:D},{refs:F,floatingStyles:G,placement:H,isPositioned:I,middlewareData:J}=(0,bo.we)({strategy:"fixed",placement:d+("center"!==f?"-"+f:""),whileElementsMounted:(...a)=>(0,bp.ll)(...a,{animationFrame:"always"===p}),elements:{reference:s.anchor},middleware:[(0,bo.cY)({mainAxis:e+A,alignmentAxis:g}),k&&(0,bo.BN)({mainAxis:!0,crossAxis:!1,limiter:"partial"===n?(0,bo.ER)():void 0,...E}),k&&(0,bo.UU)({...E}),(0,bo.Ej)({...E,apply:({elements:a,rects:b,availableWidth:c,availableHeight:d})=>{let{width:e,height:f}=b.reference,g=a.floating.style;g.setProperty("--radix-popper-available-width",`${c}px`),g.setProperty("--radix-popper-available-height",`${d}px`),g.setProperty("--radix-popper-anchor-width",`${e}px`),g.setProperty("--radix-popper-anchor-height",`${f}px`)}}),w&&(0,bo.UE)({element:w,padding:h}),bH({arrowWidth:z,arrowHeight:A}),o&&(0,bo.jD)({strategy:"referenceHidden",...E})]}),[K,L]=bI(H),M=a2(q);bk(()=>{I&&M?.()},[I,M]);let N=J.arrow?.x,O=J.arrow?.y,P=J.arrow?.centerOffset!==0,[Q,R]=j.useState();return bk(()=>{t&&R(window.getComputedStyle(t).zIndex)},[t]),(0,i.jsx)("div",{ref:F.setFloating,"data-radix-popper-content-wrapper":"",style:{...G,transform:I?G.transform:"translate(0, -200%)",minWidth:"max-content",zIndex:Q,"--radix-popper-transform-origin":[J.transformOrigin?.x,J.transformOrigin?.y].join(" "),...J.hide?.referenceHidden&&{visibility:"hidden",pointerEvents:"none"}},dir:a.dir,children:(0,i.jsx)(bA,{scope:c,placedSide:K,onArrowChange:x,arrowX:N,arrowY:O,shouldHideArrow:P,children:(0,i.jsx)(aW.div,{"data-side":K,"data-align":L,...r,ref:v,style:{...r.style,animation:I?void 0:"none"}})})})});bC.displayName=bz;var bD="PopperArrow",bE={top:"bottom",right:"left",bottom:"top",left:"right"},bF=j.forwardRef(function(a,b){let{__scopePopper:c,...d}=a,e=bB(bD,c),f=bE[e.placedSide];return(0,i.jsx)("span",{ref:e.onArrowChange,style:{position:"absolute",left:e.arrowX,top:e.arrowY,[f]:0,transformOrigin:{top:"",right:"0 0",bottom:"center 0",left:"100% 0"}[e.placedSide],transform:{top:"translateY(100%)",right:"translateY(50%) rotate(90deg) translateX(-50%)",bottom:"rotate(180deg)",left:"translateY(50%) rotate(-90deg) translateX(50%)"}[e.placedSide],visibility:e.shouldHideArrow?"hidden":void 0},children:(0,i.jsx)(bq,{...d,ref:b,style:{...d.style,display:"block"}})})});function bG(a){return null!==a}bF.displayName=bD;var bH=a=>({name:"transformOrigin",options:a,fn(b){let{placement:c,rects:d,middlewareData:e}=b,f=e.arrow?.centerOffset!==0,g=f?0:a.arrowWidth,h=f?0:a.arrowHeight,[i,j]=bI(c),k={start:"0%",center:"50%",end:"100%"}[j],l=(e.arrow?.x??0)+g/2,m=(e.arrow?.y??0)+h/2,n="",o="";return"bottom"===i?(n=f?k:`${l}px`,o=`${-h}px`):"top"===i?(n=f?k:`${l}px`,o=`${d.floating.height+h}px`):"right"===i?(n=`${-h}px`,o=f?k:`${m}px`):"left"===i&&(n=`${d.floating.width+h}px`,o=f?k:`${m}px`),{data:{x:n,y:o}}}});function bI(a){let[b,c="center"]=a.split("-");return[b,c]}var bJ=j.forwardRef((a,b)=>{let{container:c,...d}=a,[e,f]=j.useState(!1);bk(()=>f(!0),[]);let g=c||e&&globalThis?.document?.body;return g?aP.createPortal((0,i.jsx)(aW.div,{...d,ref:b}),g):null});bJ.displayName="Portal";var bK=a=>{let{present:b,children:c}=a,d=function(a){var b,c;let[d,e]=j.useState(),f=j.useRef(null),g=j.useRef(a),h=j.useRef("none"),[i,k]=(b=a?"mounted":"unmounted",c={mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}},j.useReducer((a,b)=>c[a][b]??a,b));return j.useEffect(()=>{let a=bL(f.current);h.current="mounted"===i?a:"none"},[i]),bk(()=>{let b=f.current,c=g.current;if(c!==a){let d=h.current,e=bL(b);a?k("MOUNT"):"none"===e||b?.display==="none"?k("UNMOUNT"):c&&d!==e?k("ANIMATION_OUT"):k("UNMOUNT"),g.current=a}},[a,k]),bk(()=>{if(d){let a,b=d.ownerDocument.defaultView??window,c=c=>{let e=bL(f.current).includes(CSS.escape(c.animationName));if(c.target===d&&e&&(k("ANIMATION_END"),!g.current)){let c=d.style.animationFillMode;d.style.animationFillMode="forwards",a=b.setTimeout(()=>{"forwards"===d.style.animationFillMode&&(d.style.animationFillMode=c)})}},e=a=>{a.target===d&&(h.current=bL(f.current))};return d.addEventListener("animationstart",e),d.addEventListener("animationcancel",c),d.addEventListener("animationend",c),()=>{b.clearTimeout(a),d.removeEventListener("animationstart",e),d.removeEventListener("animationcancel",c),d.removeEventListener("animationend",c)}}k("ANIMATION_END")},[d,k]),{isPresent:["mounted","unmountSuspended"].includes(i),ref:j.useCallback(a=>{f.current=a?getComputedStyle(a):null,e(a)},[])}}(b),e="function"==typeof c?c({present:d.isPresent}):j.Children.only(c),f=aS(d.ref,function(a){let b=Object.getOwnPropertyDescriptor(a.props,"ref")?.get,c=b&&"isReactWarning"in b&&b.isReactWarning;return c?a.ref:(c=(b=Object.getOwnPropertyDescriptor(a,"ref")?.get)&&"isReactWarning"in b&&b.isReactWarning)?a.props.ref:a.props.ref||a.ref}(e));return"function"==typeof c||d.isPresent?j.cloneElement(e,{ref:f}):null};function bL(a){return a?.animationName||"none"}bK.displayName="Presence";var bM=k[" useInsertionEffect ".trim().toString()]||bk;function bN({prop:a,defaultProp:b,onChange:c=()=>{},caller:d}){let[e,f,g]=function({defaultProp:a,onChange:b}){let[c,d]=j.useState(a),e=j.useRef(c),f=j.useRef(b);return bM(()=>{f.current=b},[b]),j.useEffect(()=>{e.current!==c&&(f.current?.(c),e.current=c)},[c,e]),[c,d,f]}({defaultProp:b,onChange:c}),h=void 0!==a,i=h?a:e;{let b=j.useRef(void 0!==a);j.useEffect(()=>{let a=b.current;if(a!==h){let b=h?"controlled":"uncontrolled";console.warn(`${d} is changing from ${a?"controlled":"uncontrolled"} to ${b}. Components should not switch from controlled to uncontrolled (or vice versa). Decide between using a controlled or uncontrolled value for the lifetime of the component.`)}b.current=h},[h,d])}return[i,j.useCallback(b=>{if(h){let c="function"==typeof b?b(a):b;c!==a&&g.current?.(c)}else f(b)},[h,a,f,g])]}Symbol("RADIX:SYNC_STATE");var bO="rovingFocusGroup.onEntryFocus",bP={bubbles:!1,cancelable:!0},bQ="RovingFocusGroup",[bR,bS,bT]=aY(bQ),[bU,bV]=aO(bQ,[bT]),[bW,bX]=bU(bQ),bY=j.forwardRef((a,b)=>(0,i.jsx)(bR.Provider,{scope:a.__scopeRovingFocusGroup,children:(0,i.jsx)(bR.Slot,{scope:a.__scopeRovingFocusGroup,children:(0,i.jsx)(bZ,{...a,ref:b})})}));bY.displayName=bQ;var bZ=j.forwardRef((a,b)=>{let{__scopeRovingFocusGroup:c,orientation:d,loop:e=!1,dir:f,currentTabStopId:g,defaultCurrentTabStopId:h,onCurrentTabStopIdChange:k,onEntryFocus:l,preventScrollOnEntryFocus:m=!1,...n}=a,o=j.useRef(null),p=aS(b,o),q=a1(f),[r,s]=bN({prop:g,defaultProp:h??null,onChange:k,caller:bQ}),[t,u]=j.useState(!1),v=a2(l),w=bS(c),x=j.useRef(!1),[y,z]=j.useState(0);return j.useEffect(()=>{let a=o.current;if(a)return a.addEventListener(bO,v),()=>a.removeEventListener(bO,v)},[v]),(0,i.jsx)(bW,{scope:c,orientation:d,dir:q,loop:e,currentTabStopId:r,onItemFocus:j.useCallback(a=>s(a),[s]),onItemShiftTab:j.useCallback(()=>u(!0),[]),onFocusableItemAdd:j.useCallback(()=>z(a=>a+1),[]),onFocusableItemRemove:j.useCallback(()=>z(a=>a-1),[]),children:(0,i.jsx)(aW.div,{tabIndex:t||0===y?-1:0,"data-orientation":d,...n,ref:p,style:{outline:"none",...a.style},onMouseDown:aN(a.onMouseDown,()=>{x.current=!0}),onFocus:aN(a.onFocus,a=>{let b=!x.current;if(a.target===a.currentTarget&&b&&!t){let b=new CustomEvent(bO,bP);if(a.currentTarget.dispatchEvent(b),!b.defaultPrevented){let a=w().filter(a=>a.focusable);b1([a.find(a=>a.active),a.find(a=>a.id===r),...a].filter(Boolean).map(a=>a.ref.current),m)}}x.current=!1}),onBlur:aN(a.onBlur,()=>u(!1))})})}),b$="RovingFocusGroupItem",b_=j.forwardRef((a,b)=>{let{__scopeRovingFocusGroup:c,focusable:d=!0,active:e=!1,tabStopId:f,children:g,...h}=a,k=bn(),l=f||k,m=bX(b$,c),n=m.currentTabStopId===l,o=bS(c),{onFocusableItemAdd:p,onFocusableItemRemove:q,currentTabStopId:r}=m;return j.useEffect(()=>{if(d)return p(),()=>q()},[d,p,q]),(0,i.jsx)(bR.ItemSlot,{scope:c,id:l,focusable:d,active:e,children:(0,i.jsx)(aW.span,{tabIndex:n?0:-1,"data-orientation":m.orientation,...h,ref:b,onMouseDown:aN(a.onMouseDown,a=>{d?m.onItemFocus(l):a.preventDefault()}),onFocus:aN(a.onFocus,()=>m.onItemFocus(l)),onKeyDown:aN(a.onKeyDown,a=>{if("Tab"===a.key&&a.shiftKey)return void m.onItemShiftTab();if(a.target!==a.currentTarget)return;let b=function(a,b,c){var d;let e=(d=a.key,"rtl"!==c?d:"ArrowLeft"===d?"ArrowRight":"ArrowRight"===d?"ArrowLeft":d);if(!("vertical"===b&&["ArrowLeft","ArrowRight"].includes(e))&&!("horizontal"===b&&["ArrowUp","ArrowDown"].includes(e)))return b0[e]}(a,m.orientation,m.dir);if(void 0!==b){if(a.metaKey||a.ctrlKey||a.altKey||a.shiftKey)return;a.preventDefault();let c=o().filter(a=>a.focusable).map(a=>a.ref.current);if("last"===b)c.reverse();else if("prev"===b||"next"===b){"prev"===b&&c.reverse();let d=c.indexOf(a.currentTarget);c=m.loop?function(a,b){return a.map((c,d)=>a[(b+d)%a.length])}(c,d+1):c.slice(d+1)}setTimeout(()=>b1(c))}}),children:"function"==typeof g?g({isCurrentTabStop:n,hasTabStop:null!=r}):g})})});b_.displayName=b$;var b0={ArrowLeft:"prev",ArrowUp:"prev",ArrowRight:"next",ArrowDown:"next",PageUp:"first",Home:"first",PageDown:"last",End:"last"};function b1(a,b=!1){let c=document.activeElement;for(let d of a)if(d===c||(d.focus({preventScroll:b}),document.activeElement!==c))return}var b2=new WeakMap,b3=new WeakMap,b4={},b5=0,b6=function(a){return a&&(a.host||b6(a.parentNode))},b7=function(a,b,c,d){var e=(Array.isArray(a)?a:[a]).map(function(a){if(b.contains(a))return a;var c=b6(a);return c&&b.contains(c)?c:(console.error("aria-hidden",a,"in not contained inside",b,". Doing nothing"),null)}).filter(function(a){return!!a});b4[c]||(b4[c]=new WeakMap);var f=b4[c],g=[],h=new Set,i=new Set(e),j=function(a){!a||h.has(a)||(h.add(a),j(a.parentNode))};e.forEach(j);var k=function(a){!a||i.has(a)||Array.prototype.forEach.call(a.children,function(a){if(h.has(a))k(a);else try{var b=a.getAttribute(d),e=null!==b&&"false"!==b,i=(b2.get(a)||0)+1,j=(f.get(a)||0)+1;b2.set(a,i),f.set(a,j),g.push(a),1===i&&e&&b3.set(a,!0),1===j&&a.setAttribute(c,"true"),e||a.setAttribute(d,"true")}catch(b){console.error("aria-hidden: cannot operate on ",a,b)}})};return k(b),h.clear(),b5++,function(){g.forEach(function(a){var b=b2.get(a)-1,e=f.get(a)-1;b2.set(a,b),f.set(a,e),b||(b3.has(a)||a.removeAttribute(d),b3.delete(a)),e||a.removeAttribute(c)}),--b5||(b2=new WeakMap,b2=new WeakMap,b3=new WeakMap,b4={})}},b8=function(a,b,c){void 0===c&&(c="data-aria-hidden");var d=Array.from(Array.isArray(a)?a:[a]),e=b||("undefined"==typeof document?null:(Array.isArray(a)?a[0]:a).ownerDocument.body);return e?(d.push.apply(d,Array.from(e.querySelectorAll("[aria-live], script"))),b7(d,e,c,"aria-hidden")):function(){return null}},b9=function(){return(b9=Object.assign||function(a){for(var b,c=1,d=arguments.length;c<d;c++)for(var e in b=arguments[c])Object.prototype.hasOwnProperty.call(b,e)&&(a[e]=b[e]);return a}).apply(this,arguments)};function ca(a,b){var c={};for(var d in a)Object.prototype.hasOwnProperty.call(a,d)&&0>b.indexOf(d)&&(c[d]=a[d]);if(null!=a&&"function"==typeof Object.getOwnPropertySymbols)for(var e=0,d=Object.getOwnPropertySymbols(a);e<d.length;e++)0>b.indexOf(d[e])&&Object.prototype.propertyIsEnumerable.call(a,d[e])&&(c[d[e]]=a[d[e]]);return c}Object.create;Object.create;var cb=("function"==typeof SuppressedError&&SuppressedError,"right-scroll-bar-position"),cc="width-before-scroll-bar";function cd(a,b){return"function"==typeof a?a(b):a&&(a.current=b),a}var ce="undefined"!=typeof window?j.useLayoutEffect:j.useEffect,cf=new WeakMap;function cg(a){return a}var ch=function(a){void 0===a&&(a={});var b,c,d,e=(void 0===b&&(b=cg),c=[],d=!1,{read:function(){if(d)throw Error("Sidecar: could not `read` from an `assigned` medium. `read` could be used only with `useMedium`.");return c.length?c[c.length-1]:null},useMedium:function(a){var e=b(a,d);return c.push(e),function(){c=c.filter(function(a){return a!==e})}},assignSyncMedium:function(a){for(d=!0;c.length;){var b=c;c=[],b.forEach(a)}c={push:function(b){return a(b)},filter:function(){return c}}},assignMedium:function(a){d=!0;var b=[];if(c.length){var e=c;c=[],e.forEach(a),b=c}var f=function(){var c=b;b=[],c.forEach(a)},g=function(){return Promise.resolve().then(f)};g(),c={push:function(a){b.push(a),g()},filter:function(a){return b=b.filter(a),c}}}});return e.options=b9({async:!0,ssr:!1},a),e}(),ci=function(){},cj=j.forwardRef(function(a,b){var c,d,e,f,g=j.useRef(null),h=j.useState({onScrollCapture:ci,onWheelCapture:ci,onTouchMoveCapture:ci}),i=h[0],k=h[1],l=a.forwardProps,m=a.children,n=a.className,o=a.removeScrollBar,p=a.enabled,q=a.shards,r=a.sideCar,s=a.noRelative,t=a.noIsolation,u=a.inert,v=a.allowPinchZoom,w=a.as,x=a.gapMode,y=ca(a,["forwardProps","children","className","removeScrollBar","enabled","shards","sideCar","noRelative","noIsolation","inert","allowPinchZoom","as","gapMode"]),z=(c=[g,b],d=function(a){return c.forEach(function(b){return cd(b,a)})},(e=(0,j.useState)(function(){return{value:null,callback:d,facade:{get current(){return e.value},set current(value){var a=e.value;a!==value&&(e.value=value,e.callback(value,a))}}}})[0]).callback=d,f=e.facade,ce(function(){var a=cf.get(f);if(a){var b=new Set(a),d=new Set(c),e=f.current;b.forEach(function(a){d.has(a)||cd(a,null)}),d.forEach(function(a){b.has(a)||cd(a,e)})}cf.set(f,c)},[c]),f),A=b9(b9({},y),i);return j.createElement(j.Fragment,null,p&&j.createElement(r,{sideCar:ch,removeScrollBar:o,shards:q,noRelative:s,noIsolation:t,inert:u,setCallbacks:k,allowPinchZoom:!!v,lockRef:g,gapMode:x}),l?j.cloneElement(j.Children.only(m),b9(b9({},A),{ref:z})):j.createElement(void 0===w?"div":w,b9({},A,{className:n,ref:z}),m))});cj.defaultProps={enabled:!0,removeScrollBar:!0,inert:!1},cj.classNames={fullWidth:cc,zeroRight:cb};var ck=function(a){var b=a.sideCar,c=ca(a,["sideCar"]);if(!b)throw Error("Sidecar: please provide `sideCar` property to import the right car");var d=b.read();if(!d)throw Error("Sidecar medium not found");return j.createElement(d,b9({},c))};ck.isSideCarExport=!0;var cl=function(){var a=0,b=null;return{add:function(d){if(0==a&&(b=function(){if(!document)return null;var a=document.createElement("style");a.type="text/css";var b=h||c.nc;return b&&a.setAttribute("nonce",b),a}())){var e,f;(e=b).styleSheet?e.styleSheet.cssText=d:e.appendChild(document.createTextNode(d)),f=b,(document.head||document.getElementsByTagName("head")[0]).appendChild(f)}a++},remove:function(){--a||!b||(b.parentNode&&b.parentNode.removeChild(b),b=null)}}},cm=function(){var a=cl();return function(b,c){j.useEffect(function(){return a.add(b),function(){a.remove()}},[b&&c])}},cn=function(){var a=cm();return function(b){return a(b.styles,b.dynamic),null}},co={left:0,top:0,right:0,gap:0},cp=function(a){return parseInt(a||"",10)||0},cq=function(a){var b=window.getComputedStyle(document.body),c=b["padding"===a?"paddingLeft":"marginLeft"],d=b["padding"===a?"paddingTop":"marginTop"],e=b["padding"===a?"paddingRight":"marginRight"];return[cp(c),cp(d),cp(e)]},cr=function(a){if(void 0===a&&(a="margin"),"undefined"==typeof window)return co;var b=cq(a),c=document.documentElement.clientWidth,d=window.innerWidth;return{left:b[0],top:b[1],right:b[2],gap:Math.max(0,d-c+b[2]-b[0])}},cs=cn(),ct="data-scroll-locked",cu=function(a,b,c,d){var e=a.left,f=a.top,g=a.right,h=a.gap;return void 0===c&&(c="margin"),"\n  .".concat("with-scroll-bars-hidden"," {\n   overflow: hidden ").concat(d,";\n   padding-right: ").concat(h,"px ").concat(d,";\n  }\n  body[").concat(ct,"] {\n    overflow: hidden ").concat(d,";\n    overscroll-behavior: contain;\n    ").concat([b&&"position: relative ".concat(d,";"),"margin"===c&&"\n    padding-left: ".concat(e,"px;\n    padding-top: ").concat(f,"px;\n    padding-right: ").concat(g,"px;\n    margin-left:0;\n    margin-top:0;\n    margin-right: ").concat(h,"px ").concat(d,";\n    "),"padding"===c&&"padding-right: ".concat(h,"px ").concat(d,";")].filter(Boolean).join(""),"\n  }\n  \n  .").concat(cb," {\n    right: ").concat(h,"px ").concat(d,";\n  }\n  \n  .").concat(cc," {\n    margin-right: ").concat(h,"px ").concat(d,";\n  }\n  \n  .").concat(cb," .").concat(cb," {\n    right: 0 ").concat(d,";\n  }\n  \n  .").concat(cc," .").concat(cc," {\n    margin-right: 0 ").concat(d,";\n  }\n  \n  body[").concat(ct,"] {\n    ").concat("--removed-body-scroll-bar-size",": ").concat(h,"px;\n  }\n")},cv=function(){var a=parseInt(document.body.getAttribute(ct)||"0",10);return isFinite(a)?a:0},cw=function(){j.useEffect(function(){return document.body.setAttribute(ct,(cv()+1).toString()),function(){var a=cv()-1;a<=0?document.body.removeAttribute(ct):document.body.setAttribute(ct,a.toString())}},[])},cx=function(a){var b=a.noRelative,c=a.noImportant,d=a.gapMode,e=void 0===d?"margin":d;cw();var f=j.useMemo(function(){return cr(e)},[e]);return j.createElement(cs,{styles:cu(f,!b,e,c?"":"!important")})},cy=!1;if("undefined"!=typeof window)try{var cz=Object.defineProperty({},"passive",{get:function(){return cy=!0,!0}});window.addEventListener("test",cz,cz),window.removeEventListener("test",cz,cz)}catch(a){cy=!1}var cA=!!cy&&{passive:!1},cB=function(a,b){if(!(a instanceof Element))return!1;var c=window.getComputedStyle(a);return"hidden"!==c[b]&&(c.overflowY!==c.overflowX||"TEXTAREA"===a.tagName||"visible"!==c[b])},cC=function(a,b){var c=b.ownerDocument,d=b;do{if("undefined"!=typeof ShadowRoot&&d instanceof ShadowRoot&&(d=d.host),cD(a,d)){var e=cE(a,d);if(e[1]>e[2])return!0}d=d.parentNode}while(d&&d!==c.body);return!1},cD=function(a,b){return"v"===a?cB(b,"overflowY"):cB(b,"overflowX")},cE=function(a,b){return"v"===a?[b.scrollTop,b.scrollHeight,b.clientHeight]:[b.scrollLeft,b.scrollWidth,b.clientWidth]},cF=function(a,b,c,d,e){var f,g=(f=window.getComputedStyle(b).direction,"h"===a&&"rtl"===f?-1:1),h=g*d,i=c.target,j=b.contains(i),k=!1,l=h>0,m=0,n=0;do{if(!i)break;var o=cE(a,i),p=o[0],q=o[1]-o[2]-g*p;(p||q)&&cD(a,i)&&(m+=q,n+=p);var r=i.parentNode;i=r&&r.nodeType===Node.DOCUMENT_FRAGMENT_NODE?r.host:r}while(!j&&i!==document.body||j&&(b.contains(i)||b===i));return l&&(e&&1>Math.abs(m)||!e&&h>m)?k=!0:!l&&(e&&1>Math.abs(n)||!e&&-h>n)&&(k=!0),k},cG=function(a){return"changedTouches"in a?[a.changedTouches[0].clientX,a.changedTouches[0].clientY]:[0,0]},cH=function(a){return[a.deltaX,a.deltaY]},cI=function(a){return a&&"current"in a?a.current:a},cJ=0,cK=[];let cL=(f=function(a){var b=j.useRef([]),c=j.useRef([0,0]),d=j.useRef(),e=j.useState(cJ++)[0],f=j.useState(cn)[0],g=j.useRef(a);j.useEffect(function(){g.current=a},[a]),j.useEffect(function(){if(a.inert){document.body.classList.add("block-interactivity-".concat(e));var b=(function(a,b,c){if(c||2==arguments.length)for(var d,e=0,f=b.length;e<f;e++)!d&&e in b||(d||(d=Array.prototype.slice.call(b,0,e)),d[e]=b[e]);return a.concat(d||Array.prototype.slice.call(b))})([a.lockRef.current],(a.shards||[]).map(cI),!0).filter(Boolean);return b.forEach(function(a){return a.classList.add("allow-interactivity-".concat(e))}),function(){document.body.classList.remove("block-interactivity-".concat(e)),b.forEach(function(a){return a.classList.remove("allow-interactivity-".concat(e))})}}},[a.inert,a.lockRef.current,a.shards]);var h=j.useCallback(function(a,b){if("touches"in a&&2===a.touches.length||"wheel"===a.type&&a.ctrlKey)return!g.current.allowPinchZoom;var e,f=cG(a),h=c.current,i="deltaX"in a?a.deltaX:h[0]-f[0],j="deltaY"in a?a.deltaY:h[1]-f[1],k=a.target,l=Math.abs(i)>Math.abs(j)?"h":"v";if("touches"in a&&"h"===l&&"range"===k.type)return!1;var m=cC(l,k);if(!m)return!0;if(m?e=l:(e="v"===l?"h":"v",m=cC(l,k)),!m)return!1;if(!d.current&&"changedTouches"in a&&(i||j)&&(d.current=e),!e)return!0;var n=d.current||e;return cF(n,b,a,"h"===n?i:j,!0)},[]),i=j.useCallback(function(a){if(cK.length&&cK[cK.length-1]===f){var c="deltaY"in a?cH(a):cG(a),d=b.current.filter(function(b){var d;return b.name===a.type&&(b.target===a.target||a.target===b.shadowParent)&&(d=b.delta,d[0]===c[0]&&d[1]===c[1])})[0];if(d&&d.should){a.cancelable&&a.preventDefault();return}if(!d){var e=(g.current.shards||[]).map(cI).filter(Boolean).filter(function(b){return b.contains(a.target)});(e.length>0?h(a,e[0]):!g.current.noIsolation)&&a.cancelable&&a.preventDefault()}}},[]),k=j.useCallback(function(a,c,d,e){var f={name:a,delta:c,target:d,should:e,shadowParent:function(a){for(var b=null;null!==a;)a instanceof ShadowRoot&&(b=a.host,a=a.host),a=a.parentNode;return b}(d)};b.current.push(f),setTimeout(function(){b.current=b.current.filter(function(a){return a!==f})},1)},[]),l=j.useCallback(function(a){c.current=cG(a),d.current=void 0},[]),m=j.useCallback(function(b){k(b.type,cH(b),b.target,h(b,a.lockRef.current))},[]),n=j.useCallback(function(b){k(b.type,cG(b),b.target,h(b,a.lockRef.current))},[]);j.useEffect(function(){return cK.push(f),a.setCallbacks({onScrollCapture:m,onWheelCapture:m,onTouchMoveCapture:n}),document.addEventListener("wheel",i,cA),document.addEventListener("touchmove",i,cA),document.addEventListener("touchstart",l,cA),function(){cK=cK.filter(function(a){return a!==f}),document.removeEventListener("wheel",i,cA),document.removeEventListener("touchmove",i,cA),document.removeEventListener("touchstart",l,cA)}},[]);var o=a.removeScrollBar,p=a.inert;return j.createElement(j.Fragment,null,p?j.createElement(f,{styles:"\n  .block-interactivity-".concat(e," {pointer-events: none;}\n  .allow-interactivity-").concat(e," {pointer-events: all;}\n")}):null,o?j.createElement(cx,{noRelative:a.noRelative,gapMode:a.gapMode}):null)},ch.useMedium(f),ck);var cM=j.forwardRef(function(a,b){return j.createElement(cj,b9({},a,{ref:b,sideCar:cL}))});cM.classNames=cj.classNames;var cN=["Enter"," "],cO=["ArrowUp","PageDown","End"],cP=["ArrowDown","PageUp","Home",...cO],cQ={ltr:[...cN,"ArrowRight"],rtl:[...cN,"ArrowLeft"]},cR={ltr:["ArrowLeft"],rtl:["ArrowRight"]},cS="Menu",[cT,cU,cV]=aY(cS),[cW,cX]=aO(cS,[cV,bt,bV]),cY=bt(),cZ=bV(),[c$,c_]=cW(cS),[c0,c1]=cW(cS),c2=a=>{let{__scopeMenu:b,open:c=!1,children:d,dir:e,onOpenChange:f,modal:g=!0}=a,h=cY(b),[k,l]=j.useState(null),m=j.useRef(!1),n=a2(f),o=a1(e);return j.useEffect(()=>{let a=()=>{m.current=!0,document.addEventListener("pointerdown",b,{capture:!0,once:!0}),document.addEventListener("pointermove",b,{capture:!0,once:!0})},b=()=>m.current=!1;return document.addEventListener("keydown",a,{capture:!0}),()=>{document.removeEventListener("keydown",a,{capture:!0}),document.removeEventListener("pointerdown",b,{capture:!0}),document.removeEventListener("pointermove",b,{capture:!0})}},[]),(0,i.jsx)(bw,{...h,children:(0,i.jsx)(c$,{scope:b,open:c,onOpenChange:n,content:k,onContentChange:l,children:(0,i.jsx)(c0,{scope:b,onClose:j.useCallback(()=>n(!1),[n]),isUsingKeyboardRef:m,dir:o,modal:g,children:d})})})};c2.displayName=cS;var c3=j.forwardRef((a,b)=>{let{__scopeMenu:c,...d}=a,e=cY(c);return(0,i.jsx)(by,{...e,...d,ref:b})});c3.displayName="MenuAnchor";var c4="MenuPortal",[c5,c6]=cW(c4,{forceMount:void 0}),c7=a=>{let{__scopeMenu:b,forceMount:c,children:d,container:e}=a,f=c_(c4,b);return(0,i.jsx)(c5,{scope:b,forceMount:c,children:(0,i.jsx)(bK,{present:c||f.open,children:(0,i.jsx)(bJ,{asChild:!0,container:e,children:d})})})};c7.displayName=c4;var c8="MenuContent",[c9,da]=cW(c8),db=j.forwardRef((a,b)=>{let c=c6(c8,a.__scopeMenu),{forceMount:d=c.forceMount,...e}=a,f=c_(c8,a.__scopeMenu),g=c1(c8,a.__scopeMenu);return(0,i.jsx)(cT.Provider,{scope:a.__scopeMenu,children:(0,i.jsx)(bK,{present:d||f.open,children:(0,i.jsx)(cT.Slot,{scope:a.__scopeMenu,children:g.modal?(0,i.jsx)(dc,{...e,ref:b}):(0,i.jsx)(dd,{...e,ref:b})})})})}),dc=j.forwardRef((a,b)=>{let c=c_(c8,a.__scopeMenu),d=j.useRef(null),e=aS(b,d);return j.useEffect(()=>{let a=d.current;if(a)return b8(a)},[]),(0,i.jsx)(df,{...a,ref:e,trapFocus:c.open,disableOutsidePointerEvents:c.open,disableOutsideScroll:!0,onFocusOutside:aN(a.onFocusOutside,a=>a.preventDefault(),{checkForDefaultPrevented:!1}),onDismiss:()=>c.onOpenChange(!1)})}),dd=j.forwardRef((a,b)=>{let c=c_(c8,a.__scopeMenu);return(0,i.jsx)(df,{...a,ref:b,trapFocus:!1,disableOutsidePointerEvents:!1,disableOutsideScroll:!1,onDismiss:()=>c.onOpenChange(!1)})}),de=aT("MenuContent.ScrollLock"),df=j.forwardRef((a,b)=>{let{__scopeMenu:c,loop:d=!1,trapFocus:e,onOpenAutoFocus:f,onCloseAutoFocus:g,disableOutsidePointerEvents:h,onEntryFocus:k,onEscapeKeyDown:l,onPointerDownOutside:m,onFocusOutside:n,onInteractOutside:o,onDismiss:p,disableOutsideScroll:q,...r}=a,s=c_(c8,c),t=c1(c8,c),u=cY(c),v=cZ(c),w=cU(c),[x,y]=j.useState(null),z=j.useRef(null),A=aS(b,z,s.onContentChange),B=j.useRef(0),C=j.useRef(""),D=j.useRef(0),E=j.useRef(null),F=j.useRef("right"),G=j.useRef(0),H=q?cM:j.Fragment;j.useEffect(()=>()=>window.clearTimeout(B.current),[]),a9();let I=j.useCallback(a=>F.current===E.current?.side&&function(a,b){return!!b&&function(a,b){let{x:c,y:d}=a,e=!1;for(let a=0,f=b.length-1;a<b.length;f=a++){let g=b[a],h=b[f],i=g.x,j=g.y,k=h.x,l=h.y;j>d!=l>d&&c<(k-i)*(d-j)/(l-j)+i&&(e=!e)}return e}({x:a.clientX,y:a.clientY},b)}(a,E.current?.area),[]);return(0,i.jsx)(c9,{scope:c,searchRef:C,onItemEnter:j.useCallback(a=>{I(a)&&a.preventDefault()},[I]),onItemLeave:j.useCallback(a=>{I(a)||(z.current?.focus(),y(null))},[I]),onTriggerLeave:j.useCallback(a=>{I(a)&&a.preventDefault()},[I]),pointerGraceTimerRef:D,onPointerGraceIntentChange:j.useCallback(a=>{E.current=a},[]),children:(0,i.jsx)(H,{...q?{as:de,allowPinchZoom:!0}:void 0,children:(0,i.jsx)(be,{asChild:!0,trapped:e,onMountAutoFocus:aN(f,a=>{a.preventDefault(),z.current?.focus({preventScroll:!0})}),onUnmountAutoFocus:g,children:(0,i.jsx)(a5,{asChild:!0,disableOutsidePointerEvents:h,onEscapeKeyDown:l,onPointerDownOutside:m,onFocusOutside:n,onInteractOutside:o,onDismiss:p,children:(0,i.jsx)(bY,{asChild:!0,...v,dir:t.dir,orientation:"vertical",loop:d,currentTabStopId:x,onCurrentTabStopIdChange:y,onEntryFocus:aN(k,a=>{t.isUsingKeyboardRef.current||a.preventDefault()}),preventScrollOnEntryFocus:!0,children:(0,i.jsx)(bC,{role:"menu","aria-orientation":"vertical","data-state":dI(s.open),"data-radix-menu-content":"",dir:t.dir,...u,...r,ref:A,style:{outline:"none",...r.style},onKeyDown:aN(r.onKeyDown,a=>{let b=a.target.closest("[data-radix-menu-content]")===a.currentTarget,c=a.ctrlKey||a.altKey||a.metaKey,d=1===a.key.length;b&&("Tab"===a.key&&a.preventDefault(),!c&&d&&(a=>{let b=C.current+a,c=w().filter(a=>!a.disabled),d=document.activeElement,e=c.find(a=>a.ref.current===d)?.textValue,f=function(a,b,c){var d;let e=b.length>1&&Array.from(b).every(a=>a===b[0])?b[0]:b,f=c?a.indexOf(c):-1,g=(d=Math.max(f,0),a.map((b,c)=>a[(d+c)%a.length]));1===e.length&&(g=g.filter(a=>a!==c));let h=g.find(a=>a.toLowerCase().startsWith(e.toLowerCase()));return h!==c?h:void 0}(c.map(a=>a.textValue),b,e),g=c.find(a=>a.textValue===f)?.ref.current;!function a(b){C.current=b,window.clearTimeout(B.current),""!==b&&(B.current=window.setTimeout(()=>a(""),1e3))}(b),g&&setTimeout(()=>g.focus())})(a.key));let e=z.current;if(a.target!==e||!cP.includes(a.key))return;a.preventDefault();let f=w().filter(a=>!a.disabled).map(a=>a.ref.current);cO.includes(a.key)&&f.reverse(),function(a){let b=document.activeElement;for(let c of a)if(c===b||(c.focus(),document.activeElement!==b))return}(f)}),onBlur:aN(a.onBlur,a=>{a.currentTarget.contains(a.target)||(window.clearTimeout(B.current),C.current="")}),onPointerMove:aN(a.onPointerMove,dL(a=>{let b=a.target,c=G.current!==a.clientX;a.currentTarget.contains(b)&&c&&(F.current=a.clientX>G.current?"right":"left",G.current=a.clientX)}))})})})})})})});db.displayName=c8;var dg=j.forwardRef((a,b)=>{let{__scopeMenu:c,...d}=a;return(0,i.jsx)(aW.div,{role:"group",...d,ref:b})});dg.displayName="MenuGroup";var dh=j.forwardRef((a,b)=>{let{__scopeMenu:c,...d}=a;return(0,i.jsx)(aW.div,{...d,ref:b})});dh.displayName="MenuLabel";var di="MenuItem",dj="menu.itemSelect",dk=j.forwardRef((a,b)=>{let{disabled:c=!1,onSelect:d,...e}=a,f=j.useRef(null),g=c1(di,a.__scopeMenu),h=da(di,a.__scopeMenu),k=aS(b,f),l=j.useRef(!1);return(0,i.jsx)(dl,{...e,ref:k,disabled:c,onClick:aN(a.onClick,()=>{let a=f.current;if(!c&&a){let b=new CustomEvent(dj,{bubbles:!0,cancelable:!0});a.addEventListener(dj,a=>d?.(a),{once:!0}),aX(a,b),b.defaultPrevented?l.current=!1:g.onClose()}}),onPointerDown:b=>{a.onPointerDown?.(b),l.current=!0},onPointerUp:aN(a.onPointerUp,a=>{l.current||a.currentTarget?.click()}),onKeyDown:aN(a.onKeyDown,a=>{let b=""!==h.searchRef.current;c||b&&" "===a.key||cN.includes(a.key)&&(a.currentTarget.click(),a.preventDefault())})})});dk.displayName=di;var dl=j.forwardRef((a,b)=>{let{__scopeMenu:c,disabled:d=!1,textValue:e,...f}=a,g=da(di,c),h=cZ(c),k=j.useRef(null),l=aS(b,k),[m,n]=j.useState(!1),[o,p]=j.useState("");return j.useEffect(()=>{let a=k.current;a&&p((a.textContent??"").trim())},[f.children]),(0,i.jsx)(cT.ItemSlot,{scope:c,disabled:d,textValue:e??o,children:(0,i.jsx)(b_,{asChild:!0,...h,focusable:!d,children:(0,i.jsx)(aW.div,{role:"menuitem","data-highlighted":m?"":void 0,"aria-disabled":d||void 0,"data-disabled":d?"":void 0,...f,ref:l,onPointerMove:aN(a.onPointerMove,dL(a=>{d?g.onItemLeave(a):(g.onItemEnter(a),a.defaultPrevented||a.currentTarget.focus({preventScroll:!0}))})),onPointerLeave:aN(a.onPointerLeave,dL(a=>g.onItemLeave(a))),onFocus:aN(a.onFocus,()=>n(!0)),onBlur:aN(a.onBlur,()=>n(!1))})})})}),dm=j.forwardRef((a,b)=>{let{checked:c=!1,onCheckedChange:d,...e}=a;return(0,i.jsx)(dv,{scope:a.__scopeMenu,checked:c,children:(0,i.jsx)(dk,{role:"menuitemcheckbox","aria-checked":dJ(c)?"mixed":c,...e,ref:b,"data-state":dK(c),onSelect:aN(e.onSelect,()=>d?.(!!dJ(c)||!c),{checkForDefaultPrevented:!1})})})});dm.displayName="MenuCheckboxItem";var dn="MenuRadioGroup",[dp,dq]=cW(dn,{value:void 0,onValueChange:()=>{}}),dr=j.forwardRef((a,b)=>{let{value:c,onValueChange:d,...e}=a,f=a2(d);return(0,i.jsx)(dp,{scope:a.__scopeMenu,value:c,onValueChange:f,children:(0,i.jsx)(dg,{...e,ref:b})})});dr.displayName=dn;var ds="MenuRadioItem",dt=j.forwardRef((a,b)=>{let{value:c,...d}=a,e=dq(ds,a.__scopeMenu),f=c===e.value;return(0,i.jsx)(dv,{scope:a.__scopeMenu,checked:f,children:(0,i.jsx)(dk,{role:"menuitemradio","aria-checked":f,...d,ref:b,"data-state":dK(f),onSelect:aN(d.onSelect,()=>e.onValueChange?.(c),{checkForDefaultPrevented:!1})})})});dt.displayName=ds;var du="MenuItemIndicator",[dv,dw]=cW(du,{checked:!1}),dx=j.forwardRef((a,b)=>{let{__scopeMenu:c,forceMount:d,...e}=a,f=dw(du,c);return(0,i.jsx)(bK,{present:d||dJ(f.checked)||!0===f.checked,children:(0,i.jsx)(aW.span,{...e,ref:b,"data-state":dK(f.checked)})})});dx.displayName=du;var dy=j.forwardRef((a,b)=>{let{__scopeMenu:c,...d}=a;return(0,i.jsx)(aW.div,{role:"separator","aria-orientation":"horizontal",...d,ref:b})});dy.displayName="MenuSeparator";var dz=j.forwardRef((a,b)=>{let{__scopeMenu:c,...d}=a,e=cY(c);return(0,i.jsx)(bF,{...e,...d,ref:b})});dz.displayName="MenuArrow";var dA="MenuSub",[dB,dC]=cW(dA),dD=a=>{let{__scopeMenu:b,children:c,open:d=!1,onOpenChange:e}=a,f=c_(dA,b),g=cY(b),[h,k]=j.useState(null),[l,m]=j.useState(null),n=a2(e);return j.useEffect(()=>(!1===f.open&&n(!1),()=>n(!1)),[f.open,n]),(0,i.jsx)(bw,{...g,children:(0,i.jsx)(c$,{scope:b,open:d,onOpenChange:n,content:l,onContentChange:m,children:(0,i.jsx)(dB,{scope:b,contentId:bn(),triggerId:bn(),trigger:h,onTriggerChange:k,children:c})})})};dD.displayName=dA;var dE="MenuSubTrigger",dF=j.forwardRef((a,b)=>{let c=c_(dE,a.__scopeMenu),d=c1(dE,a.__scopeMenu),e=dC(dE,a.__scopeMenu),f=da(dE,a.__scopeMenu),g=j.useRef(null),{pointerGraceTimerRef:h,onPointerGraceIntentChange:k}=f,l={__scopeMenu:a.__scopeMenu},m=j.useCallback(()=>{g.current&&window.clearTimeout(g.current),g.current=null},[]);return j.useEffect(()=>m,[m]),j.useEffect(()=>{let a=h.current;return()=>{window.clearTimeout(a),k(null)}},[h,k]),(0,i.jsx)(c3,{asChild:!0,...l,children:(0,i.jsx)(dl,{id:e.triggerId,"aria-haspopup":"menu","aria-expanded":c.open,"aria-controls":e.contentId,"data-state":dI(c.open),...a,ref:aR(b,e.onTriggerChange),onClick:b=>{a.onClick?.(b),a.disabled||b.defaultPrevented||(b.currentTarget.focus(),c.open||c.onOpenChange(!0))},onPointerMove:aN(a.onPointerMove,dL(b=>{f.onItemEnter(b),!b.defaultPrevented&&(a.disabled||c.open||g.current||(f.onPointerGraceIntentChange(null),g.current=window.setTimeout(()=>{c.onOpenChange(!0),m()},100)))})),onPointerLeave:aN(a.onPointerLeave,dL(a=>{m();let b=c.content?.getBoundingClientRect();if(b){let d=c.content?.dataset.side,e="right"===d,g=b[e?"left":"right"],i=b[e?"right":"left"];f.onPointerGraceIntentChange({area:[{x:a.clientX+(e?-5:5),y:a.clientY},{x:g,y:b.top},{x:i,y:b.top},{x:i,y:b.bottom},{x:g,y:b.bottom}],side:d}),window.clearTimeout(h.current),h.current=window.setTimeout(()=>f.onPointerGraceIntentChange(null),300)}else{if(f.onTriggerLeave(a),a.defaultPrevented)return;f.onPointerGraceIntentChange(null)}})),onKeyDown:aN(a.onKeyDown,b=>{let e=""!==f.searchRef.current;a.disabled||e&&" "===b.key||cQ[d.dir].includes(b.key)&&(c.onOpenChange(!0),c.content?.focus(),b.preventDefault())})})})});dF.displayName=dE;var dG="MenuSubContent",dH=j.forwardRef((a,b)=>{let c=c6(c8,a.__scopeMenu),{forceMount:d=c.forceMount,...e}=a,f=c_(c8,a.__scopeMenu),g=c1(c8,a.__scopeMenu),h=dC(dG,a.__scopeMenu),k=j.useRef(null),l=aS(b,k);return(0,i.jsx)(cT.Provider,{scope:a.__scopeMenu,children:(0,i.jsx)(bK,{present:d||f.open,children:(0,i.jsx)(cT.Slot,{scope:a.__scopeMenu,children:(0,i.jsx)(df,{id:h.contentId,"aria-labelledby":h.triggerId,...e,ref:l,align:"start",side:"rtl"===g.dir?"left":"right",disableOutsidePointerEvents:!1,disableOutsideScroll:!1,trapFocus:!1,onOpenAutoFocus:a=>{g.isUsingKeyboardRef.current&&k.current?.focus(),a.preventDefault()},onCloseAutoFocus:a=>a.preventDefault(),onFocusOutside:aN(a.onFocusOutside,a=>{a.target!==h.trigger&&f.onOpenChange(!1)}),onEscapeKeyDown:aN(a.onEscapeKeyDown,a=>{g.onClose(),a.preventDefault()}),onKeyDown:aN(a.onKeyDown,a=>{let b=a.currentTarget.contains(a.target),c=cR[g.dir].includes(a.key);b&&c&&(f.onOpenChange(!1),h.trigger?.focus(),a.preventDefault())})})})})})});function dI(a){return a?"open":"closed"}function dJ(a){return"indeterminate"===a}function dK(a){return dJ(a)?"indeterminate":a?"checked":"unchecked"}function dL(a){return b=>"mouse"===b.pointerType?a(b):void 0}dH.displayName=dG;var dM="ContextMenu",[dN,dO]=aO(dM,[cX]),dP=cX(),[dQ,dR]=dN(dM),dS=a=>{let{__scopeContextMenu:b,children:c,onOpenChange:d,dir:e,modal:f=!0}=a,[g,h]=j.useState(!1),k=dP(b),l=a2(d),m=j.useCallback(a=>{h(a),l(a)},[l]);return(0,i.jsx)(dQ,{scope:b,open:g,onOpenChange:m,modal:f,children:(0,i.jsx)(c2,{...k,dir:e,open:g,onOpenChange:m,modal:f,children:c})})};dS.displayName=dM;var dT="ContextMenuTrigger",dU=j.forwardRef((a,b)=>{let{__scopeContextMenu:c,disabled:d=!1,...e}=a,f=dR(dT,c),g=dP(c),h=j.useRef({x:0,y:0}),k=j.useRef({getBoundingClientRect:()=>DOMRect.fromRect({width:0,height:0,...h.current})}),l=j.useRef(0),m=j.useCallback(()=>window.clearTimeout(l.current),[]),n=a=>{h.current={x:a.clientX,y:a.clientY},f.onOpenChange(!0)};return j.useEffect(()=>m,[m]),j.useEffect(()=>void(d&&m()),[d,m]),(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(c3,{...g,virtualRef:k}),(0,i.jsx)(aW.span,{"data-state":f.open?"open":"closed","data-disabled":d?"":void 0,...e,ref:b,style:{WebkitTouchCallout:"none",...a.style},onContextMenu:d?a.onContextMenu:aN(a.onContextMenu,a=>{m(),n(a),a.preventDefault()}),onPointerDown:d?a.onPointerDown:aN(a.onPointerDown,dZ(a=>{m(),l.current=window.setTimeout(()=>n(a),700)})),onPointerMove:d?a.onPointerMove:aN(a.onPointerMove,dZ(m)),onPointerCancel:d?a.onPointerCancel:aN(a.onPointerCancel,dZ(m)),onPointerUp:d?a.onPointerUp:aN(a.onPointerUp,dZ(m))})]})});dU.displayName=dT;var dV="ContextMenuContent",dW=j.forwardRef((a,b)=>{let{__scopeContextMenu:c,...d}=a,e=dR(dV,c),f=dP(c),g=j.useRef(!1);return(0,i.jsx)(db,{...f,...d,ref:b,side:"right",sideOffset:2,align:"start",onCloseAutoFocus:b=>{a.onCloseAutoFocus?.(b),!b.defaultPrevented&&g.current&&b.preventDefault(),g.current=!1},onInteractOutside:b=>{a.onInteractOutside?.(b),b.defaultPrevented||e.modal||(g.current=!0)},style:{...a.style,"--radix-context-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-context-menu-content-available-width":"var(--radix-popper-available-width)","--radix-context-menu-content-available-height":"var(--radix-popper-available-height)","--radix-context-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-context-menu-trigger-height":"var(--radix-popper-anchor-height)"}})});dW.displayName=dV,j.forwardRef((a,b)=>{let{__scopeContextMenu:c,...d}=a,e=dP(c);return(0,i.jsx)(dg,{...e,...d,ref:b})}).displayName="ContextMenuGroup",j.forwardRef((a,b)=>{let{__scopeContextMenu:c,...d}=a,e=dP(c);return(0,i.jsx)(dh,{...e,...d,ref:b})}).displayName="ContextMenuLabel";var dX=j.forwardRef((a,b)=>{let{__scopeContextMenu:c,...d}=a,e=dP(c);return(0,i.jsx)(dk,{...e,...d,ref:b})});dX.displayName="ContextMenuItem",j.forwardRef((a,b)=>{let{__scopeContextMenu:c,...d}=a,e=dP(c);return(0,i.jsx)(dm,{...e,...d,ref:b})}).displayName="ContextMenuCheckboxItem",j.forwardRef((a,b)=>{let{__scopeContextMenu:c,...d}=a,e=dP(c);return(0,i.jsx)(dr,{...e,...d,ref:b})}).displayName="ContextMenuRadioGroup",j.forwardRef((a,b)=>{let{__scopeContextMenu:c,...d}=a,e=dP(c);return(0,i.jsx)(dt,{...e,...d,ref:b})}).displayName="ContextMenuRadioItem",j.forwardRef((a,b)=>{let{__scopeContextMenu:c,...d}=a,e=dP(c);return(0,i.jsx)(dx,{...e,...d,ref:b})}).displayName="ContextMenuItemIndicator";var dY=j.forwardRef((a,b)=>{let{__scopeContextMenu:c,...d}=a,e=dP(c);return(0,i.jsx)(dy,{...e,...d,ref:b})});dY.displayName="ContextMenuSeparator",j.forwardRef((a,b)=>{let{__scopeContextMenu:c,...d}=a,e=dP(c);return(0,i.jsx)(dz,{...e,...d,ref:b})}).displayName="ContextMenuArrow";function dZ(a){return b=>"mouse"!==b.pointerType?a(b):void 0}j.forwardRef((a,b)=>{let{__scopeContextMenu:c,...d}=a,e=dP(c);return(0,i.jsx)(dF,{...e,...d,ref:b})}).displayName="ContextMenuSubTrigger",j.forwardRef((a,b)=>{let{__scopeContextMenu:c,...d}=a,e=dP(c);return(0,i.jsx)(dH,{...e,...d,ref:b,style:{...a.style,"--radix-context-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-context-menu-content-available-width":"var(--radix-popper-available-width)","--radix-context-menu-content-available-height":"var(--radix-popper-available-height)","--radix-context-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-context-menu-trigger-height":"var(--radix-popper-anchor-height)"}})}).displayName="ContextMenuSubContent";let d$=({onClick:a,icon:b,label:c,isActive:d=!1,className:e=""})=>(0,i.jsxs)("div",{className:"relative group flex justify-center my-1",children:[(0,i.jsx)("button",{onClick:a,className:`
        p-2 rounded-md transition-colors duration-200
        ${d?"bg-blue-100 text-blue-600":"text-gray-500 hover:bg-gray-100 hover:text-gray-900"}
        ${e}
      `,children:(0,i.jsx)(b,{size:20,strokeWidth:2})}),(0,i.jsxs)("span",{className:"absolute left-full top-1/2 -translate-y-1/2 ml-2 bg-gray-900 text-white text-[10px] font-medium px-2 py-1 rounded opacity-0 group-hover:opacity-100 transition-opacity pointer-events-none whitespace-nowrap z-50 shadow-sm",children:[c,(0,i.jsx)("span",{className:"absolute top-1/2 -translate-y-1/2 -left-1 border-4 border-transparent border-r-gray-900"})]})]});function d_({onClose:a,onCreate:b}){let[c,d]=(0,j.useState)("New Folder");return(0,i.jsx)("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/50",onClick:a,children:(0,i.jsxs)("form",{onSubmit:a=>{a.preventDefault(),c.trim()&&b(c.trim())},onClick:a=>a.stopPropagation(),className:"bg-white rounded-2xl shadow-2xl w-80 p-6 animate-in fade-in zoom-in-95 duration-200",children:[(0,i.jsx)("h4",{className:"text-sm font-bold mb-4 text-gray-800",children:"Create New Folder"}),(0,i.jsx)("label",{htmlFor:"folderName",className:"text-xs font-semibold text-gray-500 uppercase tracking-wider",children:"Name"}),(0,i.jsx)("input",{id:"folderName",type:"text",value:c,onChange:a=>d(a.target.value),className:"w-full border-b-2 border-gray-200 py-2 text-sm focus:outline-none focus:border-blue-500 transition-colors",autoFocus:!0,onFocus:a=>a.target.select()}),(0,i.jsxs)("div",{className:"flex justify-end gap-3 mt-6",children:[(0,i.jsx)("button",{type:"button",onClick:a,className:"px-4 py-2 text-xs font-semibold text-gray-500 hover:bg-gray-100 rounded-lg transition-colors",children:"Cancel"}),(0,i.jsx)("button",{type:"submit",className:"px-4 py-2 text-xs font-bold text-white bg-blue-600 rounded-lg hover:bg-blue-700 transition-colors shadow-md hover:shadow-lg",children:"Create"})]})]})})}function d0({isCollapsed:a,onToggleClick:b,selectedView:c,setSelectedView:d}){let[e,f]=(0,j.useState)(!1),{notes:g}=aA(),{trashedNotes:h}=aB(),{folders:k,addFolder:l,deleteFolder:m}=function(){let a=!!(0,ax.o)();return{folders:(0,au.kk)(()=>av.A.folders.orderBy("name").toArray(),[]),addFolder:async b=>{let c=Date.now(),d={id:(0,aw.A)(),name:b,createdAt:c,updatedAt:c};if(await av.A.folders.add(d),a){let a={id:(0,aw.A)(),entityType:"folder",operation:"create",payload:d,timestamp:c};await av.A.syncOutbox.add(a),(0,ay.gz)()}return d},updateFolder:async(b,c)=>{let d=Date.now(),e={...c,updatedAt:d};if(await av.A.folders.update(b,e),a){let a=await av.A.folders.get(b);if(a){let b={id:(0,aw.A)(),entityType:"folder",operation:"update",payload:a,timestamp:d};await av.A.syncOutbox.add(b),(0,ay.gz)()}}},deleteFolder:async b=>{let c=await av.A.notes.where("folderId").equals(b).toArray();if(await av.A.transaction("rw",av.A.notes,av.A.folders,async()=>{let a=Date.now();if(c.length>0){let b=c.map(b=>av.A.notes.update(b.id,{folderId:null,updatedAt:a}));await Promise.all(b)}await av.A.folders.delete(b)}),a){let a=Date.now();for(let b of c){let c=await av.A.notes.get(b.id);if(c){let b={id:(0,aw.A)(),entityType:"note",operation:"update",payload:c,timestamp:a};await av.A.syncOutbox.add(b)}}let d={id:(0,aw.A)(),entityType:"folder",operation:"delete",payload:{id:b},timestamp:a};await av.A.syncOutbox.add(d),(0,ay.gz)()}}}}(),{tags:n}=aC(),o=async a=>{d((await l(a)).id),f(!1)},p=g?.filter(a=>a.isQuickNote).length||0,q=g?.filter(a=>!a.isQuickNote).length||0,r=h?.length||0;if(a)return(0,i.jsxs)("div",{className:"flex flex-col h-full items-center bg-gray-50/50",children:[(0,i.jsx)("div",{className:"w-full flex justify-center py-3 border-b border-gray-200",children:(0,i.jsx)(d$,{onClick:b,icon:aF,label:"Expand Sidebar"})}),(0,i.jsxs)("div",{className:"flex-1 overflow-y-auto w-full py-2 no-scrollbar",children:[(0,i.jsx)(d$,{onClick:()=>f(!0),icon:aG,label:"New Folder"}),(0,i.jsx)("div",{className:"my-2 h-px w-8 bg-gray-200 mx-auto"}),(0,i.jsx)(d$,{onClick:()=>d("quick"),icon:aH.A,label:"Quick Notes",isActive:"quick"===c}),(0,i.jsx)(d$,{onClick:()=>d("all"),icon:aI,label:"All Notes",isActive:"all"===c}),(0,i.jsx)(d$,{onClick:()=>d("trash"),icon:aJ.A,label:"Trash",isActive:"trash"===c}),(0,i.jsx)("div",{className:"my-2 h-px w-8 bg-gray-200 mx-auto"}),k?.map(a=>(0,i.jsx)(d$,{onClick:()=>d(a.id),icon:aK,label:a.name,isActive:c===a.id},a.id)),n?.map(a=>(0,i.jsx)(d$,{onClick:()=>d(`tag-${a}`),icon:aL,label:`#${a}`,isActive:c===`tag-${a}`},a))]}),e&&(0,i.jsx)(d_,{onClose:()=>f(!1),onCreate:o})]});let s=a=>`
      flex items-center gap-3 px-4 py-2.5 cursor-pointer rounded-lg mx-3 my-1 
      text-sm font-medium transition-all duration-200
      ${c===a?"bg-white text-blue-600 shadow-sm ring-1 ring-gray-100":"text-gray-600 hover:bg-gray-100 hover:text-gray-900"}
    `;return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsxs)("div",{className:"flex flex-col h-full bg-gray-50/30",children:[(0,i.jsxs)("div",{className:"flex items-center px-4 h-[52px] border-b border-gray-200",children:[(0,i.jsx)("button",{className:"p-1.5 text-gray-500 hover:bg-gray-200 rounded-md transition-colors",onClick:b,title:"Collapse Sidebar",children:(0,i.jsx)(aM,{size:20})}),(0,i.jsx)("div",{className:"flex-grow"}),(0,i.jsx)("button",{className:"p-1.5 text-gray-500 hover:text-blue-600 hover:bg-blue-50 rounded-md transition-colors",onClick:()=>f(!0),title:"Create Folder",children:(0,i.jsx)(aG,{size:20})})]}),(0,i.jsxs)("div",{className:"flex-1 overflow-y-auto py-4 custom-scrollbar",children:[(0,i.jsxs)("ul",{children:[(0,i.jsxs)("li",{className:s("quick"),onClick:()=>d("quick"),children:[(0,i.jsx)(aH.A,{size:18,className:"quick"===c?"fill-blue-100":""}),(0,i.jsx)("span",{children:"Quick Notes"}),(0,i.jsx)("span",{className:"ml-auto text-xs font-bold opacity-60",children:p})]}),(0,i.jsxs)("li",{className:s("all"),onClick:()=>d("all"),children:[(0,i.jsx)(aI,{size:18}),(0,i.jsx)("span",{children:"All Notes"}),(0,i.jsx)("span",{className:"ml-auto text-xs font-bold opacity-60",children:q})]}),(0,i.jsxs)("li",{className:s("trash"),onClick:()=>d("trash"),children:[(0,i.jsx)(aJ.A,{size:18}),(0,i.jsx)("span",{children:"Trash"}),(0,i.jsx)("span",{className:"ml-auto text-xs font-bold opacity-60",children:r})]})]}),(0,i.jsx)("div",{className:"mt-6 mb-2 px-5 flex items-center justify-between",children:(0,i.jsx)("h3",{className:"text-[11px] font-bold text-gray-400 uppercase tracking-wider",children:"Folders"})}),(0,i.jsx)("ul",{children:k?.map(a=>(0,i.jsxs)(dS,{children:[(0,i.jsx)(dU,{children:(0,i.jsxs)("li",{className:s(a.id),onClick:()=>d(a.id),children:[(0,i.jsx)(aK,{size:18,className:c===a.id?"fill-blue-100":""}),(0,i.jsx)("span",{className:"truncate",children:a.name}),(0,i.jsx)("span",{className:"ml-auto text-xs font-bold opacity-60",children:g?.filter(b=>b.folderId===a.id).length||0})]})}),(0,i.jsx)(dW,{className:"bg-white rounded-lg shadow-xl border border-gray-100 p-1 min-w-[150px] z-50 animate-in fade-in zoom-in-95",children:(0,i.jsxs)(dX,{onSelect:()=>{var b;return b=a.id,void(confirm("Delete this folder? Notes inside will be moved to Trash.")&&(m(b),c===b&&d("all")))},className:"flex items-center gap-2 px-3 py-2 text-sm text-red-600 rounded-md hover:bg-red-50 cursor-pointer outline-none",children:[(0,i.jsx)(aJ.A,{size:14}),"Delete Folder"]})})]},a.id))}),(0,i.jsx)("div",{className:"mt-6 mb-2 px-5",children:(0,i.jsx)("h3",{className:"text-[11px] font-bold text-gray-400 uppercase tracking-wider",children:"Tags"})}),(0,i.jsx)("ul",{children:n&&0!==n.length?n.map(a=>(0,i.jsxs)("li",{className:s(`tag-${a}`),onClick:()=>d(`tag-${a}`),children:[(0,i.jsx)(aL,{size:16}),(0,i.jsxs)("span",{className:"truncate",children:["#",a]})]},a)):(0,i.jsx)("li",{className:"px-5 py-2 text-xs text-gray-400 italic",children:"No tags yet..."})})]})]}),e&&(0,i.jsx)(d_,{onClose:()=>f(!1),onCreate:o})]})}var d1="DropdownMenu",[d2,d3]=aO(d1,[cX]),d4=cX(),[d5,d6]=d2(d1),d7=a=>{let{__scopeDropdownMenu:b,children:c,dir:d,open:e,defaultOpen:f,onOpenChange:g,modal:h=!0}=a,k=d4(b),l=j.useRef(null),[m,n]=bN({prop:e,defaultProp:f??!1,onChange:g,caller:d1});return(0,i.jsx)(d5,{scope:b,triggerId:bn(),triggerRef:l,contentId:bn(),open:m,onOpenChange:n,onOpenToggle:j.useCallback(()=>n(a=>!a),[n]),modal:h,children:(0,i.jsx)(c2,{...k,open:m,onOpenChange:n,dir:d,modal:h,children:c})})};d7.displayName=d1;var d8="DropdownMenuTrigger",d9=j.forwardRef((a,b)=>{let{__scopeDropdownMenu:c,disabled:d=!1,...e}=a,f=d6(d8,c),g=d4(c);return(0,i.jsx)(c3,{asChild:!0,...g,children:(0,i.jsx)(aW.button,{type:"button",id:f.triggerId,"aria-haspopup":"menu","aria-expanded":f.open,"aria-controls":f.open?f.contentId:void 0,"data-state":f.open?"open":"closed","data-disabled":d?"":void 0,disabled:d,...e,ref:aR(b,f.triggerRef),onPointerDown:aN(a.onPointerDown,a=>{!d&&0===a.button&&!1===a.ctrlKey&&(f.onOpenToggle(),f.open||a.preventDefault())}),onKeyDown:aN(a.onKeyDown,a=>{!d&&(["Enter"," "].includes(a.key)&&f.onOpenToggle(),"ArrowDown"===a.key&&f.onOpenChange(!0),["Enter"," ","ArrowDown"].includes(a.key)&&a.preventDefault())})})})});d9.displayName=d8;var ea=a=>{let{__scopeDropdownMenu:b,...c}=a,d=d4(b);return(0,i.jsx)(c7,{...d,...c})};ea.displayName="DropdownMenuPortal";var eb="DropdownMenuContent",ec=j.forwardRef((a,b)=>{let{__scopeDropdownMenu:c,...d}=a,e=d6(eb,c),f=d4(c),g=j.useRef(!1);return(0,i.jsx)(db,{id:e.contentId,"aria-labelledby":e.triggerId,...f,...d,ref:b,onCloseAutoFocus:aN(a.onCloseAutoFocus,a=>{g.current||e.triggerRef.current?.focus(),g.current=!1,a.preventDefault()}),onInteractOutside:aN(a.onInteractOutside,a=>{let b=a.detail.originalEvent,c=0===b.button&&!0===b.ctrlKey,d=2===b.button||c;(!e.modal||d)&&(g.current=!0)}),style:{...a.style,"--radix-dropdown-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-dropdown-menu-content-available-width":"var(--radix-popper-available-width)","--radix-dropdown-menu-content-available-height":"var(--radix-popper-available-height)","--radix-dropdown-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-dropdown-menu-trigger-height":"var(--radix-popper-anchor-height)"}})});ec.displayName=eb,j.forwardRef((a,b)=>{let{__scopeDropdownMenu:c,...d}=a,e=d4(c);return(0,i.jsx)(dg,{...e,...d,ref:b})}).displayName="DropdownMenuGroup",j.forwardRef((a,b)=>{let{__scopeDropdownMenu:c,...d}=a,e=d4(c);return(0,i.jsx)(dh,{...e,...d,ref:b})}).displayName="DropdownMenuLabel";var ed=j.forwardRef((a,b)=>{let{__scopeDropdownMenu:c,...d}=a,e=d4(c);return(0,i.jsx)(dk,{...e,...d,ref:b})});ed.displayName="DropdownMenuItem",j.forwardRef((a,b)=>{let{__scopeDropdownMenu:c,...d}=a,e=d4(c);return(0,i.jsx)(dm,{...e,...d,ref:b})}).displayName="DropdownMenuCheckboxItem",j.forwardRef((a,b)=>{let{__scopeDropdownMenu:c,...d}=a,e=d4(c);return(0,i.jsx)(dr,{...e,...d,ref:b})}).displayName="DropdownMenuRadioGroup",j.forwardRef((a,b)=>{let{__scopeDropdownMenu:c,...d}=a,e=d4(c);return(0,i.jsx)(dt,{...e,...d,ref:b})}).displayName="DropdownMenuRadioItem",j.forwardRef((a,b)=>{let{__scopeDropdownMenu:c,...d}=a,e=d4(c);return(0,i.jsx)(dx,{...e,...d,ref:b})}).displayName="DropdownMenuItemIndicator";var ee=j.forwardRef((a,b)=>{let{__scopeDropdownMenu:c,...d}=a,e=d4(c);return(0,i.jsx)(dy,{...e,...d,ref:b})});ee.displayName="DropdownMenuSeparator",j.forwardRef((a,b)=>{let{__scopeDropdownMenu:c,...d}=a,e=d4(c);return(0,i.jsx)(dz,{...e,...d,ref:b})}).displayName="DropdownMenuArrow";var ef=j.forwardRef((a,b)=>{let{__scopeDropdownMenu:c,...d}=a,e=d4(c);return(0,i.jsx)(dF,{...e,...d,ref:b})});ef.displayName="DropdownMenuSubTrigger";var eg=j.forwardRef((a,b)=>{let{__scopeDropdownMenu:c,...d}=a,e=d4(c);return(0,i.jsx)(dH,{...e,...d,ref:b,style:{...a.style,"--radix-dropdown-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-dropdown-menu-content-available-width":"var(--radix-popper-available-width)","--radix-dropdown-menu-content-available-height":"var(--radix-popper-available-height)","--radix-dropdown-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-dropdown-menu-trigger-height":"var(--radix-popper-anchor-height)"}})});eg.displayName="DropdownMenuSubContent";var eh=a=>{let{__scopeDropdownMenu:b,children:c,open:d,onOpenChange:e,defaultOpen:f}=a,g=d4(b),[h,j]=bN({prop:d,defaultProp:f??!1,onChange:e,caller:"DropdownMenuSub"});return(0,i.jsx)(dD,{...g,open:h,onOpenChange:j,children:c})},ei=Object.freeze({position:"absolute",border:0,width:1,height:1,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",wordWrap:"normal"}),ej=j.forwardRef((a,b)=>(0,i.jsx)(aW.span,{...a,ref:b,style:{...ei,...a.style}}));ej.displayName="VisuallyHidden";var[ek,el]=aO("Tooltip",[bt]),em=bt(),en="TooltipProvider",eo="tooltip.open",[ep,eq]=ek(en),er=a=>{let{__scopeTooltip:b,delayDuration:c=700,skipDelayDuration:d=300,disableHoverableContent:e=!1,children:f}=a,g=j.useRef(!0),h=j.useRef(!1),k=j.useRef(0);return j.useEffect(()=>{let a=k.current;return()=>window.clearTimeout(a)},[]),(0,i.jsx)(ep,{scope:b,isOpenDelayedRef:g,delayDuration:c,onOpen:j.useCallback(()=>{window.clearTimeout(k.current),g.current=!1},[]),onClose:j.useCallback(()=>{window.clearTimeout(k.current),k.current=window.setTimeout(()=>g.current=!0,d)},[d]),isPointerInTransitRef:h,onPointerInTransitChange:j.useCallback(a=>{h.current=a},[]),disableHoverableContent:e,children:f})};er.displayName=en;var es="Tooltip",[et,eu]=ek(es),ev=a=>{let{__scopeTooltip:b,children:c,open:d,defaultOpen:e,onOpenChange:f,disableHoverableContent:g,delayDuration:h}=a,k=eq(es,a.__scopeTooltip),l=em(b),[m,n]=j.useState(null),o=bn(),p=j.useRef(0),q=g??k.disableHoverableContent,r=h??k.delayDuration,s=j.useRef(!1),[t,u]=bN({prop:d,defaultProp:e??!1,onChange:a=>{a?(k.onOpen(),document.dispatchEvent(new CustomEvent(eo))):k.onClose(),f?.(a)},caller:es}),v=j.useMemo(()=>t?s.current?"delayed-open":"instant-open":"closed",[t]),w=j.useCallback(()=>{window.clearTimeout(p.current),p.current=0,s.current=!1,u(!0)},[u]),x=j.useCallback(()=>{window.clearTimeout(p.current),p.current=0,u(!1)},[u]),y=j.useCallback(()=>{window.clearTimeout(p.current),p.current=window.setTimeout(()=>{s.current=!0,u(!0),p.current=0},r)},[r,u]);return j.useEffect(()=>()=>{p.current&&(window.clearTimeout(p.current),p.current=0)},[]),(0,i.jsx)(bw,{...l,children:(0,i.jsx)(et,{scope:b,contentId:o,open:t,stateAttribute:v,trigger:m,onTriggerChange:n,onTriggerEnter:j.useCallback(()=>{k.isOpenDelayedRef.current?y():w()},[k.isOpenDelayedRef,y,w]),onTriggerLeave:j.useCallback(()=>{q?x():(window.clearTimeout(p.current),p.current=0)},[x,q]),onOpen:w,onClose:x,disableHoverableContent:q,children:c})})};ev.displayName=es;var ew="TooltipTrigger",ex=j.forwardRef((a,b)=>{let{__scopeTooltip:c,...d}=a,e=eu(ew,c),f=eq(ew,c),g=em(c),h=aS(b,j.useRef(null),e.onTriggerChange),k=j.useRef(!1),l=j.useRef(!1),m=j.useCallback(()=>k.current=!1,[]);return j.useEffect(()=>()=>document.removeEventListener("pointerup",m),[m]),(0,i.jsx)(by,{asChild:!0,...g,children:(0,i.jsx)(aW.button,{"aria-describedby":e.open?e.contentId:void 0,"data-state":e.stateAttribute,...d,ref:h,onPointerMove:aN(a.onPointerMove,a=>{"touch"!==a.pointerType&&(l.current||f.isPointerInTransitRef.current||(e.onTriggerEnter(),l.current=!0))}),onPointerLeave:aN(a.onPointerLeave,()=>{e.onTriggerLeave(),l.current=!1}),onPointerDown:aN(a.onPointerDown,()=>{e.open&&e.onClose(),k.current=!0,document.addEventListener("pointerup",m,{once:!0})}),onFocus:aN(a.onFocus,()=>{k.current||e.onOpen()}),onBlur:aN(a.onBlur,e.onClose),onClick:aN(a.onClick,e.onClose)})})});ex.displayName=ew;var ey="TooltipPortal",[ez,eA]=ek(ey,{forceMount:void 0}),eB=a=>{let{__scopeTooltip:b,forceMount:c,children:d,container:e}=a,f=eu(ey,b);return(0,i.jsx)(ez,{scope:b,forceMount:c,children:(0,i.jsx)(bK,{present:c||f.open,children:(0,i.jsx)(bJ,{asChild:!0,container:e,children:d})})})};eB.displayName=ey;var eC="TooltipContent",eD=j.forwardRef((a,b)=>{let c=eA(eC,a.__scopeTooltip),{forceMount:d=c.forceMount,side:e="top",...f}=a,g=eu(eC,a.__scopeTooltip);return(0,i.jsx)(bK,{present:d||g.open,children:g.disableHoverableContent?(0,i.jsx)(eI,{side:e,...f,ref:b}):(0,i.jsx)(eE,{side:e,...f,ref:b})})}),eE=j.forwardRef((a,b)=>{let c=eu(eC,a.__scopeTooltip),d=eq(eC,a.__scopeTooltip),e=j.useRef(null),f=aS(b,e),[g,h]=j.useState(null),{trigger:k,onClose:l}=c,m=e.current,{onPointerInTransitChange:n}=d,o=j.useCallback(()=>{h(null),n(!1)},[n]),p=j.useCallback((a,b)=>{let c=a.currentTarget,d={x:a.clientX,y:a.clientY},e=function(a,b){let c=Math.abs(b.top-a.y),d=Math.abs(b.bottom-a.y),e=Math.abs(b.right-a.x),f=Math.abs(b.left-a.x);switch(Math.min(c,d,e,f)){case f:return"left";case e:return"right";case c:return"top";case d:return"bottom";default:throw Error("unreachable")}}(d,c.getBoundingClientRect());h(function(a){let b=a.slice();return b.sort((a,b)=>a.x<b.x?-1:a.x>b.x?1:a.y<b.y?-1:1*!!(a.y>b.y)),function(a){if(a.length<=1)return a.slice();let b=[];for(let c=0;c<a.length;c++){let d=a[c];for(;b.length>=2;){let a=b[b.length-1],c=b[b.length-2];if((a.x-c.x)*(d.y-c.y)>=(a.y-c.y)*(d.x-c.x))b.pop();else break}b.push(d)}b.pop();let c=[];for(let b=a.length-1;b>=0;b--){let d=a[b];for(;c.length>=2;){let a=c[c.length-1],b=c[c.length-2];if((a.x-b.x)*(d.y-b.y)>=(a.y-b.y)*(d.x-b.x))c.pop();else break}c.push(d)}return(c.pop(),1===b.length&&1===c.length&&b[0].x===c[0].x&&b[0].y===c[0].y)?b:b.concat(c)}(b)}([...function(a,b,c=5){let d=[];switch(b){case"top":d.push({x:a.x-c,y:a.y+c},{x:a.x+c,y:a.y+c});break;case"bottom":d.push({x:a.x-c,y:a.y-c},{x:a.x+c,y:a.y-c});break;case"left":d.push({x:a.x+c,y:a.y-c},{x:a.x+c,y:a.y+c});break;case"right":d.push({x:a.x-c,y:a.y-c},{x:a.x-c,y:a.y+c})}return d}(d,e),...function(a){let{top:b,right:c,bottom:d,left:e}=a;return[{x:e,y:b},{x:c,y:b},{x:c,y:d},{x:e,y:d}]}(b.getBoundingClientRect())])),n(!0)},[n]);return j.useEffect(()=>()=>o(),[o]),j.useEffect(()=>{if(k&&m){let a=a=>p(a,m),b=a=>p(a,k);return k.addEventListener("pointerleave",a),m.addEventListener("pointerleave",b),()=>{k.removeEventListener("pointerleave",a),m.removeEventListener("pointerleave",b)}}},[k,m,p,o]),j.useEffect(()=>{if(g){let a=a=>{let b=a.target,c={x:a.clientX,y:a.clientY},d=k?.contains(b)||m?.contains(b),e=!function(a,b){let{x:c,y:d}=a,e=!1;for(let a=0,f=b.length-1;a<b.length;f=a++){let g=b[a],h=b[f],i=g.x,j=g.y,k=h.x,l=h.y;j>d!=l>d&&c<(k-i)*(d-j)/(l-j)+i&&(e=!e)}return e}(c,g);d?o():e&&(o(),l())};return document.addEventListener("pointermove",a),()=>document.removeEventListener("pointermove",a)}},[k,m,g,l,o]),(0,i.jsx)(eI,{...a,ref:f})}),[eF,eG]=ek(es,{isInside:!1}),eH=function(a){let b=({children:a})=>(0,i.jsx)(i.Fragment,{children:a});return b.displayName=`${a}.Slottable`,b.__radixId=aU,b}("TooltipContent"),eI=j.forwardRef((a,b)=>{let{__scopeTooltip:c,children:d,"aria-label":e,onEscapeKeyDown:f,onPointerDownOutside:g,...h}=a,k=eu(eC,c),l=em(c),{onClose:m}=k;return j.useEffect(()=>(document.addEventListener(eo,m),()=>document.removeEventListener(eo,m)),[m]),j.useEffect(()=>{if(k.trigger){let a=a=>{let b=a.target;b?.contains(k.trigger)&&m()};return window.addEventListener("scroll",a,{capture:!0}),()=>window.removeEventListener("scroll",a,{capture:!0})}},[k.trigger,m]),(0,i.jsx)(a5,{asChild:!0,disableOutsidePointerEvents:!1,onEscapeKeyDown:f,onPointerDownOutside:g,onFocusOutside:a=>a.preventDefault(),onDismiss:m,children:(0,i.jsxs)(bC,{"data-state":k.stateAttribute,...l,...h,ref:b,style:{...h.style,"--radix-tooltip-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-tooltip-content-available-width":"var(--radix-popper-available-width)","--radix-tooltip-content-available-height":"var(--radix-popper-available-height)","--radix-tooltip-trigger-width":"var(--radix-popper-anchor-width)","--radix-tooltip-trigger-height":"var(--radix-popper-anchor-height)"},children:[(0,i.jsx)(eH,{children:d}),(0,i.jsx)(eF,{scope:c,isInside:!0,children:(0,i.jsx)(ej,{id:k.contentId,role:"tooltip",children:e||d})})]})})});eD.displayName=eC;var eJ="TooltipArrow",eK=j.forwardRef((a,b)=>{let{__scopeTooltip:c,...d}=a,e=em(c);return eG(eJ,c).isInside?null:(0,i.jsx)(bF,{...e,...d,ref:b})});eK.displayName=eJ;var eL="Dialog",[eM,eN]=aO(eL),[eO,eP]=eM(eL),eQ=a=>{let{__scopeDialog:b,children:c,open:d,defaultOpen:e,onOpenChange:f,modal:g=!0}=a,h=j.useRef(null),k=j.useRef(null),[l,m]=bN({prop:d,defaultProp:e??!1,onChange:f,caller:eL});return(0,i.jsx)(eO,{scope:b,triggerRef:h,contentRef:k,contentId:bn(),titleId:bn(),descriptionId:bn(),open:l,onOpenChange:m,onOpenToggle:j.useCallback(()=>m(a=>!a),[m]),modal:g,children:c})};eQ.displayName=eL;var eR="DialogTrigger";j.forwardRef((a,b)=>{let{__scopeDialog:c,...d}=a,e=eP(eR,c),f=aS(b,e.triggerRef);return(0,i.jsx)(aW.button,{type:"button","aria-haspopup":"dialog","aria-expanded":e.open,"aria-controls":e.contentId,"data-state":e9(e.open),...d,ref:f,onClick:aN(a.onClick,e.onOpenToggle)})}).displayName=eR;var eS="DialogPortal",[eT,eU]=eM(eS,{forceMount:void 0}),eV=a=>{let{__scopeDialog:b,forceMount:c,children:d,container:e}=a,f=eP(eS,b);return(0,i.jsx)(eT,{scope:b,forceMount:c,children:j.Children.map(d,a=>(0,i.jsx)(bK,{present:c||f.open,children:(0,i.jsx)(bJ,{asChild:!0,container:e,children:a})}))})};eV.displayName=eS;var eW="DialogOverlay",eX=j.forwardRef((a,b)=>{let c=eU(eW,a.__scopeDialog),{forceMount:d=c.forceMount,...e}=a,f=eP(eW,a.__scopeDialog);return f.modal?(0,i.jsx)(bK,{present:d||f.open,children:(0,i.jsx)(eZ,{...e,ref:b})}):null});eX.displayName=eW;var eY=aT("DialogOverlay.RemoveScroll"),eZ=j.forwardRef((a,b)=>{let{__scopeDialog:c,...d}=a,e=eP(eW,c);return(0,i.jsx)(cM,{as:eY,allowPinchZoom:!0,shards:[e.contentRef],children:(0,i.jsx)(aW.div,{"data-state":e9(e.open),...d,ref:b,style:{pointerEvents:"auto",...d.style}})})}),e$="DialogContent",e_=j.forwardRef((a,b)=>{let c=eU(e$,a.__scopeDialog),{forceMount:d=c.forceMount,...e}=a,f=eP(e$,a.__scopeDialog);return(0,i.jsx)(bK,{present:d||f.open,children:f.modal?(0,i.jsx)(e0,{...e,ref:b}):(0,i.jsx)(e1,{...e,ref:b})})});e_.displayName=e$;var e0=j.forwardRef((a,b)=>{let c=eP(e$,a.__scopeDialog),d=j.useRef(null),e=aS(b,c.contentRef,d);return j.useEffect(()=>{let a=d.current;if(a)return b8(a)},[]),(0,i.jsx)(e2,{...a,ref:e,trapFocus:c.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:aN(a.onCloseAutoFocus,a=>{a.preventDefault(),c.triggerRef.current?.focus()}),onPointerDownOutside:aN(a.onPointerDownOutside,a=>{let b=a.detail.originalEvent,c=0===b.button&&!0===b.ctrlKey;(2===b.button||c)&&a.preventDefault()}),onFocusOutside:aN(a.onFocusOutside,a=>a.preventDefault())})}),e1=j.forwardRef((a,b)=>{let c=eP(e$,a.__scopeDialog),d=j.useRef(!1),e=j.useRef(!1);return(0,i.jsx)(e2,{...a,ref:b,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:b=>{a.onCloseAutoFocus?.(b),b.defaultPrevented||(d.current||c.triggerRef.current?.focus(),b.preventDefault()),d.current=!1,e.current=!1},onInteractOutside:b=>{a.onInteractOutside?.(b),b.defaultPrevented||(d.current=!0,"pointerdown"===b.detail.originalEvent.type&&(e.current=!0));let f=b.target;c.triggerRef.current?.contains(f)&&b.preventDefault(),"focusin"===b.detail.originalEvent.type&&e.current&&b.preventDefault()}})}),e2=j.forwardRef((a,b)=>{let{__scopeDialog:c,trapFocus:d,onOpenAutoFocus:e,onCloseAutoFocus:f,...g}=a,h=eP(e$,c),k=j.useRef(null),l=aS(b,k);return a9(),(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(be,{asChild:!0,loop:!0,trapped:d,onMountAutoFocus:e,onUnmountAutoFocus:f,children:(0,i.jsx)(a5,{role:"dialog",id:h.contentId,"aria-describedby":h.descriptionId,"aria-labelledby":h.titleId,"data-state":e9(h.open),...g,ref:l,onDismiss:()=>h.onOpenChange(!1)})}),(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(fd,{titleId:h.titleId}),(0,i.jsx)(fe,{contentRef:k,descriptionId:h.descriptionId})]})]})}),e3="DialogTitle",e4=j.forwardRef((a,b)=>{let{__scopeDialog:c,...d}=a,e=eP(e3,c);return(0,i.jsx)(aW.h2,{id:e.titleId,...d,ref:b})});e4.displayName=e3;var e5="DialogDescription",e6=j.forwardRef((a,b)=>{let{__scopeDialog:c,...d}=a,e=eP(e5,c);return(0,i.jsx)(aW.p,{id:e.descriptionId,...d,ref:b})});e6.displayName=e5;var e7="DialogClose",e8=j.forwardRef((a,b)=>{let{__scopeDialog:c,...d}=a,e=eP(e7,c);return(0,i.jsx)(aW.button,{type:"button",...d,ref:b,onClick:aN(a.onClick,()=>e.onOpenChange(!1))})});function e9(a){return a?"open":"closed"}e8.displayName=e7;var fa="DialogTitleWarning",[fb,fc]=function(a,b){let c=j.createContext(b),d=a=>{let{children:b,...d}=a,e=j.useMemo(()=>d,Object.values(d));return(0,i.jsx)(c.Provider,{value:e,children:b})};return d.displayName=a+"Provider",[d,function(d){let e=j.useContext(c);if(e)return e;if(void 0!==b)return b;throw Error(`\`${d}\` must be used within \`${a}\``)}]}(fa,{contentName:e$,titleName:e3,docsSlug:"dialog"}),fd=({titleId:a})=>{let b=fc(fa),c=`\`${b.contentName}\` requires a \`${b.titleName}\` for the component to be accessible for screen reader users.

If you want to hide the \`${b.titleName}\`, you can wrap it with our VisuallyHidden component.

For more information, see https://radix-ui.com/primitives/docs/components/${b.docsSlug}`;return j.useEffect(()=>{a&&(document.getElementById(a)||console.error(c))},[c,a]),null},fe=({contentRef:a,descriptionId:b})=>{let c=fc("DialogDescriptionWarning"),d=`Warning: Missing \`Description\` or \`aria-describedby={undefined}\` for {${c.contentName}}.`;return j.useEffect(()=>{let c=a.current?.getAttribute("aria-describedby");b&&c&&(document.getElementById(b)||console.warn(d))},[d,a,b]),null};let ff=(0,aE.A)("pin",[["path",{d:"M12 17v5",key:"bb1du9"}],["path",{d:"M9 10.76a2 2 0 0 1-1.11 1.79l-1.78.9A2 2 0 0 0 5 15.24V16a1 1 0 0 0 1 1h12a1 1 0 0 0 1-1v-.76a2 2 0 0 0-1.11-1.79l-1.78-.9A2 2 0 0 1 15 10.76V7a1 1 0 0 1 1-1 2 2 0 0 0 0-4H8a2 2 0 0 0 0 4 1 1 0 0 1 1 1z",key:"1nkz8b"}]]),fg=(0,aE.A)("lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]]);var fh=c(9212);let fi=(0,aE.A)("triangle-alert",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]),fj=(0,aE.A)("square-pen",[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]]),fk=(0,aE.A)("ellipsis",[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"19",cy:"12",r:"1",key:"1wjl8i"}],["circle",{cx:"5",cy:"12",r:"1",key:"1pcz8c"}]]),fl=(0,aE.A)("gallery-vertical",[["path",{d:"M3 2h18",key:"15qxfx"}],["rect",{width:"18",height:"12",x:"3",y:"6",rx:"2",key:"1439r6"}],["path",{d:"M3 22h18",key:"8prr45"}]]);var fm=c(71613),fn=c(55705);let fo=(0,aE.A)("arrow-up-narrow-wide",[["path",{d:"m3 8 4-4 4 4",key:"11wl7u"}],["path",{d:"M7 4v16",key:"1glfcx"}],["path",{d:"M11 12h4",key:"q8tih4"}],["path",{d:"M11 16h7",key:"uosisv"}],["path",{d:"M11 20h10",key:"jvxblo"}]]),fp=(0,aE.A)("calendar-days",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}],["path",{d:"M8 14h.01",key:"6423bh"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M16 14h.01",key:"1gbofw"}],["path",{d:"M8 18h.01",key:"lrp35t"}],["path",{d:"M12 18h.01",key:"mhygvu"}],["path",{d:"M16 18h.01",key:"kzsmim"}]]),fq=(0,aE.A)("eye-off",[["path",{d:"M10.733 5.076a10.744 10.744 0 0 1 11.205 6.575 1 1 0 0 1 0 .696 10.747 10.747 0 0 1-1.444 2.49",key:"ct8e1f"}],["path",{d:"M14.084 14.158a3 3 0 0 1-4.242-4.242",key:"151rxh"}],["path",{d:"M17.479 17.499a10.75 10.75 0 0 1-15.417-5.151 1 1 0 0 1 0-.696 10.75 10.75 0 0 1 4.446-5.143",key:"13bj9a"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]]);var fr=c(3368),fs=c(14263);let ft=(0,aE.A)("wifi-off",[["path",{d:"M12 20h.01",key:"zekei9"}],["path",{d:"M8.5 16.429a5 5 0 0 1 7 0",key:"1bycff"}],["path",{d:"M5 12.859a10 10 0 0 1 5.17-2.69",key:"1dl1wf"}],["path",{d:"M19 12.859a10 10 0 0 0-2.007-1.523",key:"4k23kn"}],["path",{d:"M2 8.82a15 15 0 0 1 4.177-2.643",key:"1grhjp"}],["path",{d:"M22 8.82a15 15 0 0 0-11.288-3.764",key:"z3jwby"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]]);var fu=c(57461);function fv({onClose:a,onSuccess:b}){let[c,d]=(0,j.useState)(""),[e,f]=(0,j.useState)(""),[g,h]=(0,j.useState)(!1),[k,l]=(0,j.useState)(""),[m,n]=(0,j.useState)(!1),{data:o}=(0,fu.useSession)(),p=async a=>{if(a.preventDefault(),l(""),!navigator.onLine)return void l("You are offline. Cannot create a password.");if(c!==e)return void l("Passwords do not match.");if(c.length<4)return void l("Password must be at least 4 characters long.");n(!0);try{if(!(await fetch("/api/notes-password",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({action:"set",password:c})})).ok)throw Error("Failed to set password");o?.user?.id&&await av.A.userMetadata.update(o.user.id,{hasNotesPassword:!0}),b(c)}catch{l("An error occurred. Please try again.")}n(!1)};return(0,i.jsx)(eQ,{open:!0,onOpenChange:a,children:(0,i.jsxs)(eV,{children:[(0,i.jsx)(eX,{className:"fixed inset-0 z-50 bg-black/50"}),(0,i.jsx)(e_,{className:"fixed z-50 top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2",onInteractOutside:a=>a.preventDefault(),children:(0,i.jsxs)("form",{onSubmit:p,className:"bg-white rounded-lg shadow-xl w-96 p-6",children:[(0,i.jsx)(e4,{className:"text-lg font-semibold mb-2 text-center",children:"Create Notes Password"}),(0,i.jsx)(e6,{className:"text-sm text-gray-600 mb-4 text-center",children:"This password will protect all your locked notes."}),(0,i.jsxs)("div",{className:"mb-3",children:[(0,i.jsx)("label",{htmlFor:"password",className:"text-sm font-medium text-gray-700",children:"Password"}),(0,i.jsxs)("div",{className:"relative",children:[(0,i.jsx)("input",{id:"password",type:g?"text":"password",value:c,onChange:a=>d(a.target.value),autoComplete:"new-password",className:"w-full border border-gray-400 rounded-md px-3 py-2 mt-1 focus:outline-none focus:ring-2 focus:ring-black"}),(0,i.jsx)("button",{type:"button",onClick:()=>h(!g),className:"absolute right-3 top-1/2 -translate-y-1/2 p-1 text-gray-500",children:g?(0,i.jsx)(fq,{className:"w-4 h-4"}):(0,i.jsx)(fr.A,{className:"w-4 h-4"})})]})]}),(0,i.jsxs)("div",{children:[(0,i.jsx)("label",{htmlFor:"confirm",className:"text-sm font-medium text-gray-700",children:"Confirm Password"}),(0,i.jsx)("div",{className:"relative",children:(0,i.jsx)("input",{id:"confirm",type:g?"text":"password",value:e,onChange:a=>f(a.target.value),autoComplete:"new-password",className:"w-full border border-gray-400 rounded-md px-3 py-2 mt-1 focus:outline-none focus:ring-2 focus:ring-black"})})]}),k&&(0,i.jsx)("p",{className:"text-sm text-red-600 mt-3",children:k}),(0,i.jsxs)("div",{className:"flex justify-end gap-3 mt-6",children:[(0,i.jsx)("button",{type:"button",onClick:a,className:"px-4 py-2 text-sm font-medium bg-gray-200 rounded-md hover:bg-gray-300 focus:outline-none",children:"Cancel"}),(0,i.jsxs)("button",{type:"submit",disabled:m,className:"px-4 py-2 text-sm font-medium text-white bg-black rounded-md hover:bg-gray-800 focus:outline-none flex items-center disabled:opacity-50",children:[m&&(0,i.jsx)(fs.A,{className:"w-4 h-4 mr-2 animate-spin"}),"Set Password"]})]})]})})]})})}function fw({onClose:a,onSuccess:b}){let[c,d]=(0,j.useState)(""),[e,f]=(0,j.useState)(!1),[g,h]=(0,j.useState)(""),[k,l]=(0,j.useState)(!1),m=async a=>{if(a.preventDefault(),h(""),!navigator.onLine)return void h("You are offline. Cannot verify password.");l(!0);try{let a=await fetch("/api/notes-password",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({action:"verify",password:c})}),d=await a.json();if(503===a.status||d.error&&d.error.includes("offline"))h("You are offline. Cannot verify password.");else if(401===a.status)h("Incorrect password. Please try again.");else if(a.ok)b(c);else throw Error("Verification failed")}catch(a){console.error(a),h("Connection error. Please check your internet.")}l(!1)};return(0,i.jsx)(eQ,{open:!0,onOpenChange:a,children:(0,i.jsxs)(eV,{children:[(0,i.jsx)(eX,{className:"fixed inset-0 z-50 bg-black/50"}),(0,i.jsx)(e_,{className:"fixed z-50 top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2",onInteractOutside:a=>a.preventDefault(),children:(0,i.jsxs)("form",{onSubmit:m,className:"bg-white rounded-lg shadow-xl w-96 p-6",children:[(0,i.jsxs)("div",{className:"flex flex-col items-center",children:[(0,i.jsx)(fg,{className:"w-12 h-12 mb-4 text-gray-500"}),(0,i.jsx)(e4,{className:"text-lg font-semibold mb-2",children:"Note Locked"}),(0,i.jsx)(e6,{className:"text-sm text-gray-600 mb-4",children:"Enter your notes password to continue."})]}),(0,i.jsxs)("div",{className:"relative",children:[(0,i.jsx)("input",{id:"password",type:e?"text":"password",value:c,onChange:a=>d(a.target.value),autoComplete:"new-password",className:"w-full border border-gray-400 rounded-md px-3 py-2 focus:outline-none focus:ring-2 focus:ring-black",autoFocus:!0}),(0,i.jsx)("button",{type:"button",onClick:()=>f(!e),className:"absolute right-3 top-1/2 -translate-y-1/2 p-1 text-gray-500",children:e?(0,i.jsx)(fq,{className:"w-4 h-4"}):(0,i.jsx)(fr.A,{className:"w-4 h-4"})})]}),g&&(0,i.jsxs)("div",{className:"flex items-center gap-2 mt-3 text-red-600 bg-red-50 p-2 rounded-md",children:[g.includes("offline")||g.includes("Connection")?(0,i.jsx)(ft,{size:14}):null,(0,i.jsx)("p",{className:"text-xs font-medium",children:g})]}),(0,i.jsxs)("div",{className:"flex justify-end gap-3 mt-6",children:[(0,i.jsx)("button",{type:"button",onClick:a,className:"px-4 py-2 text-sm font-medium bg-gray-200 rounded-md hover:bg-gray-300 focus:outline-none",children:"Cancel"}),(0,i.jsxs)("button",{type:"submit",disabled:k,className:"px-4 py-2 text-sm font-medium text-white bg-black rounded-md hover:bg-gray-800 focus:outline-none flex items-center disabled:opacity-50",children:[k&&(0,i.jsx)(fs.A,{className:"w-4 h-4 mr-2 animate-spin"}),"Unlock"]})]})]})})]})})}var fx=c(47089),fy=c(8849);function fz({note:a,onClose:b,allTags:c}){let{updateNote:d}=aA(),[e,f]=(0,j.useState)(""),[g,h]=(0,j.useState)(new Set(a.tags||[])),k=(0,j.useMemo)(()=>Array.from(c).sort(),[c]),l=b=>{let c=new Set(g);c.has(b)?c.delete(b):c.add(b),h(c),d(a.id,{tags:Array.from(c)})};return(0,i.jsx)(eQ,{open:!0,onOpenChange:b,children:(0,i.jsxs)(eV,{children:[(0,i.jsx)(eX,{className:"fixed inset-0 z-50 bg-black/50"}),(0,i.jsxs)(e_,{className:"glass-morphism fixed z-50 top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2  bg-white rounded-lg shadow-xl w-96 p-5",children:[(0,i.jsxs)("div",{className:"flex justify-between items-center mb-4",children:[(0,i.jsxs)(e4,{className:"text-lg font-semibold",children:['Tags for "',a.title||"Untitled Note",'"']}),(0,i.jsx)(e8,{asChild:!0,children:(0,i.jsx)("button",{className:"p-1 rounded-full hover:bg-gray-200","aria-label":"Close",children:(0,i.jsx)(fx.A,{className:"w-4 h-4"})})})]}),(0,i.jsxs)("form",{onSubmit:b=>{b.preventDefault();let c=e.trim().replace(/\s+/g,"-");if(c&&!g.has(c)){let b=new Set(g);b.add(c),h(b),d(a.id,{tags:Array.from(b)}),f("")}},className:"flex gap-2 mb-4",children:[(0,i.jsx)("input",{type:"text",value:e,onChange:a=>f(a.target.value),placeholder:"Add or create a tag...",className:"w-full border border-gray-400 rounded-md px-3 py-2 text-sm focus:outline-none focus:ring-2 focus:ring-black"}),(0,i.jsx)("button",{type:"submit",className:"p-2 text-sm font-medium text-white bg-black rounded-md hover:bg-gray-800 focus:outline-none",children:(0,i.jsx)(fy.A,{className:"w-4 h-4"})})]}),(0,i.jsxs)("div",{className:"max-h-60 overflow-y-auto pr-2",children:[0===k.length&&0===g.size&&(0,i.jsx)("p",{className:"text-sm text-gray-500 text-center py-4",children:"No tags created yet."}),(0,i.jsxs)("ul",{children:[Array.from(g).sort().map(a=>(0,i.jsxs)("li",{onClick:()=>l(a),className:"flex items-center justify-between p-2 rounded-md cursor-pointer hover:bg-gray-200",children:[(0,i.jsxs)("span",{className:"flex items-center gap-2 text-sm",children:[(0,i.jsx)(aL,{className:"w-4 h-4 text-gray-600"}),a]}),(0,i.jsx)(fm.A,{className:"w-4 h-4 text-black"})]},a)),k.filter(a=>!g.has(a)).map(a=>(0,i.jsx)("li",{onClick:()=>l(a),className:"flex items-center justify-between p-2 rounded-md cursor-pointer hover:bg-gray-200",children:(0,i.jsxs)("span",{className:"flex items-center gap-2 text-sm",children:[(0,i.jsx)(aL,{className:"w-4 h-4 text-gray-600"}),a]})},a))]})]})]})]})})}let fA=new Date,fB=new Date(fA.setHours(0,0,0,0)).getTime(),fC=new Date(fA.setDate(fA.getDate()-1)).getTime(),fD=new Date(fA.setDate(fA.getDate()-6)).getTime(),fE=new Date(fA.setDate(fA.getDate()-24)).getTime(),fF=new Date().getFullYear();function fG({note:a,isActive:b,onClick:c,onTogglePin:d,onLock:e,onUnlock:f,onDelete:g,onTags:h}){let k=(0,j.useMemo)(()=>{if(a.isLocked)return"Note is locked";if(!a.content)return"No additional text";let b=document.createElement("div");b.innerHTML=a.content;let c=(b.textContent||"").split("\n").filter(a=>""!==a.trim())[0]||"No additional text";return c.length>20?c.substring(0,20)+"...":c},[a.content,a.isLocked]),l=a.title||"New Note";return(0,i.jsxs)(dS,{children:[(0,i.jsx)(dU,{children:(0,i.jsxs)("div",{onClick:c,className:`relative p-4 border-b border-gray-200 cursor-pointer group ${b?"bg-white shadow-inner border-l-4 border-l-black":"hover:bg-gray-100 border-l-4 border-l-transparent"}`,children:[(0,i.jsx)("button",{onClick:d,className:`absolute top-2 right-2 p-1 rounded-full text-gray-500 hover:bg-gray-300 hover:text-black transition-opacity duration-200
              ${a.isPinned?"opacity-100":"opacity-0 group-hover:opacity-100"}`,children:(0,i.jsx)(ff,{className:`w-3.5 h-3.5 ${a.isPinned?"fill-black":"fill-none"}`})}),(0,i.jsxs)("div",{className:"flex items-center gap-2 mb-1",children:[a.isLocked&&(0,i.jsx)(fg,{className:"w-3 h-3 flex-shrink-0 text-gray-400"}),(0,i.jsx)("h3",{className:`font-semibold text-sm truncate pr-6 ${b?"text-black":"text-gray-700"}`,children:l})]}),(0,i.jsx)("p",{className:"text-xs text-gray-500 truncate",children:k})]})}),(0,i.jsxs)(dW,{className:"bg-white border border-gray-200 w-48 rounded-lg shadow-xl p-1.5 z-50 animate-in fade-in zoom-in-95 duration-100",children:[(0,i.jsxs)(dX,{onSelect:()=>d(new MouseEvent("click")),className:"flex items-center gap-2 px-3 py-2 text-sm rounded-md cursor-pointer hover:bg-gray-100 outline-none text-gray-700",children:[(0,i.jsx)(ff,{className:"w-4 h-4"}),a.isPinned?"Unpin Note":"Pin Note"]}),(0,i.jsxs)(dX,{onSelect:a.isLocked?f:e,className:"flex items-center gap-2 px-3 py-2 text-sm rounded-md cursor-pointer hover:bg-gray-100 outline-none text-gray-700",children:[(0,i.jsx)(fg,{className:"w-4 h-4"}),a.isLocked?"Unlock Note":"Lock Note"]}),(0,i.jsxs)(dX,{onSelect:h,className:"flex items-center gap-2 px-3 py-2 text-sm rounded-md cursor-pointer hover:bg-gray-100 outline-none text-gray-700",children:[(0,i.jsx)(aL,{className:"w-4 h-4"}),"Tags"]}),(0,i.jsx)(dY,{className:"h-px bg-gray-100 my-1"}),(0,i.jsxs)(dX,{onSelect:g,className:"flex items-center gap-2 px-3 py-2 text-sm rounded-md cursor-pointer hover:bg-red-50 outline-none text-red-600",children:[(0,i.jsx)(aJ.A,{className:"w-4 h-4"}),"Delete Note"]})]})]})}function fH({note:a,isActive:b,onClick:c,onTogglePin:d,onLock:e,onUnlock:f,onDelete:g,onTags:h}){let k=(0,j.useMemo)(()=>{if(a.isLocked)return"Note is locked";if(!a.content)return"No additional text";let b=document.createElement("div");b.innerHTML=a.content;let c=(b.textContent||"").split("\n").filter(a=>""!==a.trim())[0]||"No additional text";return c.length>20?c.substring(0,20)+"...":c},[a.content,a.isLocked]),l=a.title||"New Note";return(0,i.jsxs)(dS,{children:[(0,i.jsx)(dU,{children:(0,i.jsxs)("div",{onClick:c,className:`relative h-40 flex flex-col p-4 border rounded-xl cursor-pointer group transition-all duration-200
            ${b?"bg-white shadow-md border-black ring-1 ring-black/5":"bg-white border-gray-200 hover:border-gray-300 hover:shadow-sm"}`,children:[(0,i.jsx)("button",{onClick:d,className:`absolute top-3 right-3 p-1 rounded-full text-gray-400 hover:bg-gray-100 hover:text-black transition-all
              ${a.isPinned?"opacity-100":"opacity-0 group-hover:opacity-100"}`,children:(0,i.jsx)(ff,{className:`w-3.5 h-3.5 ${a.isPinned?"fill-black":"fill-none"}`})}),(0,i.jsxs)("div",{className:"flex items-center gap-2 mb-2",children:[a.isLocked&&(0,i.jsx)(fg,{className:"w-3 h-3 flex-shrink-0 text-gray-400"}),(0,i.jsx)("h3",{className:"font-bold text-sm truncate pr-6 text-gray-800",children:l})]}),(0,i.jsx)("p",{className:"text-xs text-gray-500 flex-grow overflow-hidden leading-relaxed",children:k})]})}),(0,i.jsxs)(dW,{className:"bg-white border border-gray-200 w-48 rounded-lg shadow-xl p-1.5 z-50 animate-in fade-in zoom-in-95 duration-100",children:[(0,i.jsxs)(dX,{onSelect:()=>d(new MouseEvent("click")),className:"flex items-center gap-2 px-3 py-2 text-sm rounded-md cursor-pointer hover:bg-gray-100 outline-none text-gray-700",children:[(0,i.jsx)(ff,{className:"w-4 h-4"}),a.isPinned?"Unpin Note":"Pin Note"]}),(0,i.jsxs)(dX,{onSelect:a.isLocked?f:e,className:"flex items-center gap-2 px-3 py-2 text-sm rounded-md cursor-pointer hover:bg-gray-100 outline-none text-gray-700",children:[(0,i.jsx)(fg,{className:"w-4 h-4"}),a.isLocked?"Unlock Note":"Lock Note"]}),(0,i.jsxs)(dX,{onSelect:h,className:"flex items-center gap-2 px-3 py-2 text-sm rounded-md cursor-pointer hover:bg-gray-100 outline-none text-gray-700",children:[(0,i.jsx)(aL,{className:"w-4 h-4"}),"Tags"]}),(0,i.jsx)(dY,{className:"h-px bg-gray-100 my-1"}),(0,i.jsxs)(dX,{onSelect:g,className:"flex items-center gap-2 px-3 py-2 text-sm rounded-md cursor-pointer hover:bg-red-50 outline-none text-red-600",children:[(0,i.jsx)(aJ.A,{className:"w-4 h-4"}),"Delete Note"]})]})]})}function fI({note:a,onRecover:b,onDelete:c}){let d=a.title||"New Note",e=a.deletedAt?new Date(a.deletedAt).toLocaleDateString():"Recently";return(0,i.jsxs)("div",{className:"relative p-4 border-b border-gray-200 group bg-gray-50/50 hover:bg-gray-50",children:[(0,i.jsx)("h3",{className:"font-semibold text-sm truncate pr-6 text-gray-600 line-through opacity-70",children:d}),(0,i.jsxs)("p",{className:"text-xs text-gray-400 truncate",children:["Deleted: ",e]}),(0,i.jsxs)("div",{className:"flex items-center gap-4 mt-3",children:[(0,i.jsxs)("button",{onClick:b,className:"flex items-center gap-1 text-xs font-medium text-blue-600 hover:text-blue-700 hover:bg-blue-50 px-2 py-1 rounded transition-colors",children:[(0,i.jsx)(fh.A,{className:"w-3 h-3"}),"Recover"]}),(0,i.jsxs)("button",{onClick:c,className:"flex items-center gap-1 text-xs font-medium text-red-600 hover:text-red-700 hover:bg-red-50 px-2 py-1 rounded transition-colors",children:[(0,i.jsx)(aJ.A,{className:"w-3 h-3"}),"Delete Forever"]})]})]})}function fJ({onClose:a,onConfirm:b}){return(0,i.jsx)(eQ,{open:!0,onOpenChange:a,children:(0,i.jsxs)(eV,{children:[(0,i.jsx)(eX,{className:"fixed inset-0 z-50 bg-black/30 backdrop-blur-sm"}),(0,i.jsxs)(e_,{className:"fixed z-50 top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 bg-white rounded-xl shadow-2xl w-96 p-6 animate-in fade-in zoom-in-95 duration-200",children:[(0,i.jsxs)("div",{className:"flex flex-col items-center text-center",children:[(0,i.jsx)("div",{className:"bg-red-50 p-3 rounded-full mb-4",children:(0,i.jsx)(fi,{className:"w-8 h-8 text-red-500"})}),(0,i.jsx)(e4,{className:"text-lg font-bold mb-2 text-gray-900",children:"Empty Trash?"}),(0,i.jsx)(e6,{className:"text-sm text-gray-500 mb-6 leading-relaxed",children:"This will permanently delete all notes in the trash. This action cannot be undone."})]}),(0,i.jsxs)("div",{className:"flex justify-end gap-3",children:[(0,i.jsx)(e8,{asChild:!0,children:(0,i.jsx)("button",{type:"button",className:"px-4 py-2 text-sm font-medium text-gray-600 bg-gray-100 hover:bg-gray-200 rounded-lg transition-colors",children:"Cancel"})}),(0,i.jsx)("button",{type:"button",onClick:b,className:"px-4 py-2 text-sm font-medium text-white bg-red-600 hover:bg-red-700 rounded-lg transition-colors shadow-sm",children:"Delete All"})]})]})]})})}let fK=({children:a,label:b})=>(0,i.jsx)(er,{delayDuration:300,children:(0,i.jsxs)(ev,{children:[(0,i.jsx)(ex,{asChild:!0,children:a}),(0,i.jsx)(eB,{children:(0,i.jsxs)(eD,{className:"bg-gray-900 text-white px-2 py-1 rounded text-[10px] font-medium shadow-lg z-50 animate-in fade-in zoom-in-95 duration-100",sideOffset:5,children:[b,(0,i.jsx)(eK,{className:"fill-gray-900"})]})})]})});function fL({isSidebarCollapsed:a,onToggleSidebar:b,selectedView:c,activeNoteId:d,setActiveNoteId:e}){let{notes:f,addNote:g,pinNote:h,unpinNote:k,deleteNote:l,lockNote:m,unlockNote:n,deleteNotePermanently:o,recoverNote:p}=aA(),{trashedNotes:q}=aB(),{metadata:r}=aD(),{tags:s}=aC(),t=(0,j.useMemo)(()=>new Set(s||[]),[s]),[u,v]=(0,j.useState)(!1),[w,x]=(0,j.useState)("list"),[y,z]=(0,j.useState)("updatedAt"),[A,B]=(0,j.useState)(!0),[C,D]=(0,j.useState)(null),[E,F]=(0,j.useState)(!1),[G,H]=(0,j.useState)(!1),[I,J]=(0,j.useState)(null),[K,L]=(0,j.useState)(null),M="trash"===c,N=(0,j.useMemo)(()=>{if(!f||!q)return[];let a=[];if(M)a=q;else switch(!0){case"all"===c:a=f.filter(a=>!a.isQuickNote);break;case"quick"===c:a=f.filter(a=>a.isQuickNote);break;case c.startsWith("tag-"):let b=c.replace("tag-","");a=f.filter(a=>(a.tags||[]).includes(b));break;default:a=f.filter(a=>a.folderId===c)}return a},[f,q,c,M]),O=(0,j.useMemo)(()=>[...N].sort((a,b)=>{if(a.isPinned!==b.isPinned)return a.isPinned?-1:1;switch(y){case"title":return(a.title||"").localeCompare(b.title||"");case"createdAt":return(b.createdAt||0)-(a.createdAt||0);default:return(b.updatedAt||0)-(a.updatedAt||0)}}),[N,y]),P=(0,j.useMemo)(()=>M||!A?{}:O.reduce((a,b)=>{let c=function(a){let b=a||0;if(b>=fB)return"Today";if(b>=fC)return"Yesterday";if(b>=fD)return"Previous 7 Days";if(b>=fE)return"Previous 30 Days";let c=new Date(b),d=c.getFullYear();return d<fF?d.toString():c.toLocaleString("default",{month:"long"})}(b.updatedAt);return a[c]||(a[c]=[]),a[c].push(b),a},{}),[O,M,A]),Q=Object.keys(P),R=async()=>{let a="quick"===c,b="all"===c||"quick"===c||"trash"===c||c.startsWith("tag-")?null:c;e((await g({title:"New Note",content:"",folderId:b,isQuickNote:a})).id)},S=(0,j.useMemo)(()=>"all"===c?"All Notes":"quick"===c?"Quick Notes":"trash"===c?"Trash":c.startsWith("tag-")?`#${c.replace("tag-","")}`:"Folder",[c]),T=a=>{J(a),L("lock"),r?.hasNotesPassword?(m(a.id),J(null),L(null)):F(!0)},U=a=>{J(a),L("unlock"),H(!0)},V=a=>{D(a)};return(0,i.jsxs)("div",{className:"flex flex-col h-full relative bg-white",children:[(0,i.jsxs)("div",{className:"flex justify-between items-center px-4 h-[52px] box-border border-b border-gray-200 bg-white/80 backdrop-blur-sm sticky top-0 z-20",children:[(0,i.jsxs)("div",{className:"flex items-center gap-3",children:[a&&(0,i.jsx)(fK,{label:"Expand Sidebar",children:(0,i.jsx)("button",{type:"button",className:"text-gray-500 hover:bg-gray-100 p-1.5 rounded-md transition-colors",onClick:b,children:(0,i.jsx)(aF,{className:"w-5 h-5",strokeWidth:2})})}),(0,i.jsxs)("div",{children:[(0,i.jsx)("h2",{className:"text-sm font-bold text-gray-800 m-0 leading-none",children:S}),(0,i.jsxs)("p",{className:"text-[10px] font-medium text-gray-400 mt-0.5",children:[N.length," notes"]})]})]}),(0,i.jsxs)("div",{className:"flex items-center gap-1",children:[!M&&(0,i.jsx)(fK,{label:"New Note",children:(0,i.jsx)("button",{type:"button",className:"text-gray-600 hover:text-blue-600 hover:bg-blue-50 p-1.5 rounded-md transition-colors",onClick:R,children:(0,i.jsx)(fj,{className:"w-5 h-5",strokeWidth:2})})}),M&&N.length>0&&(0,i.jsx)(fK,{label:"Empty Trash",children:(0,i.jsx)("button",{type:"button",onClick:()=>v(!0),className:"text-red-500 hover:bg-red-50 p-1.5 rounded-md transition-colors",children:(0,i.jsx)(aJ.A,{className:"w-5 h-5",strokeWidth:2})})}),!M&&(0,i.jsxs)(d7,{children:[(0,i.jsx)(fK,{label:"View Options",children:(0,i.jsx)(d9,{asChild:!0,children:(0,i.jsx)("button",{type:"button",className:"text-gray-500 hover:bg-gray-100 p-1.5 rounded-md transition-colors",children:(0,i.jsx)(fk,{className:"w-5 h-5",strokeWidth:2})})})}),(0,i.jsx)(ea,{children:(0,i.jsxs)(ec,{className:"bg-white rounded-lg shadow-xl p-1.5 z-50 border border-gray-100 w-48 animate-in fade-in zoom-in-95 duration-100",sideOffset:5,align:"end",children:[(0,i.jsxs)(ed,{onSelect:()=>x("gallery"),className:"flex items-center gap-2 px-3 py-2 text-sm rounded-md cursor-pointer hover:bg-gray-50 outline-none text-gray-700",children:[(0,i.jsx)(fl,{className:"w-4 h-4"})," Gallery"," ","gallery"===w&&(0,i.jsx)(fm.A,{className:"w-3.5 h-3.5 ml-auto text-blue-600"})]}),(0,i.jsxs)(ed,{onSelect:()=>x("list"),className:"flex items-center gap-2 px-3 py-2 text-sm rounded-md cursor-pointer hover:bg-gray-50 outline-none text-gray-700",children:[(0,i.jsx)(fn.A,{className:"w-4 h-4"})," List"," ","list"===w&&(0,i.jsx)(fm.A,{className:"w-3.5 h-3.5 ml-auto text-blue-600"})]}),(0,i.jsx)(ee,{className:"h-px bg-gray-100 my-1"}),(0,i.jsxs)(eh,{children:[(0,i.jsxs)(ef,{className:"flex items-center gap-2 px-3 py-2 text-sm rounded-md cursor-pointer hover:bg-gray-50 outline-none text-gray-700",children:[(0,i.jsx)(fo,{className:"w-4 h-4"})," Sort by..."]}),(0,i.jsx)(ea,{children:(0,i.jsxs)(eg,{className:"bg-white rounded-lg shadow-xl p-1.5 z-50 border border-gray-100 w-48 animate-in fade-in zoom-in-95 duration-100",sideOffset:5,children:[(0,i.jsxs)(ed,{onSelect:()=>z("updatedAt"),className:"flex items-center gap-2 px-3 py-2 text-sm rounded-md cursor-pointer hover:bg-gray-50 outline-none text-gray-700",children:["Date Edited","updatedAt"===y&&(0,i.jsx)(fm.A,{className:"w-3.5 h-3.5 ml-auto text-blue-600"})]}),(0,i.jsxs)(ed,{onSelect:()=>z("createdAt"),className:"flex items-center gap-2 px-3 py-2 text-sm rounded-md cursor-pointer hover:bg-gray-50 outline-none text-gray-700",children:["Date Created","createdAt"===y&&(0,i.jsx)(fm.A,{className:"w-3.5 h-3.5 ml-auto text-blue-600"})]}),(0,i.jsxs)(ed,{onSelect:()=>z("title"),className:"flex items-center gap-2 px-3 py-2 text-sm rounded-md cursor-pointer hover:bg-gray-50 outline-none text-gray-700",children:["Title","title"===y&&(0,i.jsx)(fm.A,{className:"w-3.5 h-3.5 ml-auto text-blue-600"})]})]})})]}),(0,i.jsxs)(ed,{onSelect:()=>B(!A),className:"flex items-center gap-2 px-3 py-2 text-sm rounded-md cursor-pointer hover:bg-gray-50 outline-none text-gray-700",children:[(0,i.jsx)(fp,{className:"w-4 h-4"})," Group by Date"," ",A&&(0,i.jsx)(fm.A,{className:"w-3.5 h-3.5 ml-auto text-blue-600"})]})]})})]})]})]}),(0,i.jsxs)("div",{className:"flex-1 overflow-y-auto bg-white custom-scrollbar",children:[M?(0,i.jsx)("div",{children:N&&N.length>0?N.map(a=>(0,i.jsx)(fI,{note:a,onRecover:()=>p(a.id),onDelete:()=>o(a.id)},a.id)):(0,i.jsxs)("div",{className:"flex flex-col items-center justify-center h-40 text-gray-400",children:[(0,i.jsx)(aJ.A,{size:32,className:"mb-2 opacity-20"}),(0,i.jsx)("p",{className:"text-xs",children:"Trash is empty"})]})}):"gallery"===w?(0,i.jsx)("div",{className:"grid grid-cols-2 gap-3 p-4",children:O.map(a=>(0,i.jsx)(fH,{note:a,isActive:a.id===d,onClick:()=>e(a.id),onTogglePin:b=>{b.stopPropagation(),a.isPinned?k(a.id):h(a.id)},onLock:()=>T(a),onUnlock:()=>U(a),onDelete:()=>l(a.id),onTags:()=>V(a)},a.id))}):A?Q.map(a=>(0,i.jsxs)("div",{children:[(0,i.jsx)("h4",{className:"text-[11px] font-bold text-gray-400 px-5 pt-4 pb-2 uppercase tracking-wider bg-white sticky top-0 z-10",children:a}),P[a].map(a=>(0,i.jsx)(fG,{note:a,isActive:a.id===d,onClick:()=>e(a.id),onTogglePin:b=>{b.stopPropagation(),a.isPinned?k(a.id):h(a.id)},onLock:()=>T(a),onUnlock:()=>U(a),onDelete:()=>l(a.id),onTags:()=>V(a)},a.id))]},a)):(0,i.jsx)("div",{children:O.map(a=>(0,i.jsx)(fG,{note:a,isActive:a.id===d,onClick:()=>e(a.id),onTogglePin:b=>{b.stopPropagation(),a.isPinned?k(a.id):h(a.id)},onLock:()=>T(a),onUnlock:()=>U(a),onDelete:()=>l(a.id),onTags:()=>V(a)},a.id))}),!M&&N&&0===N.length&&(0,i.jsxs)("div",{className:"flex flex-col items-center justify-center h-64 text-gray-400",children:[(0,i.jsx)(fj,{size:40,className:"mb-3 opacity-20"}),(0,i.jsx)("p",{className:"text-sm font-medium",children:"No notes found"}),(0,i.jsx)("p",{className:"text-xs mt-1",children:"Create a new note to get started"})]})]}),u&&(0,i.jsx)(fJ,{onClose:()=>v(!1),onConfirm:()=>{q?.forEach(a=>{o(a.id)}),v(!1)}}),E&&(0,i.jsx)(fv,{onClose:()=>{F(!1),J(null)},onSuccess:()=>{"lock"===K&&I&&m(I.id),F(!1),J(null),r&&av.A.userMetadata.update(r.userId,{hasNotesPassword:!0})}}),G&&(0,i.jsx)(fw,{onClose:()=>{H(!1),J(null)},onSuccess:()=>{"lock"===K&&I&&m(I.id),"unlock"===K&&I&&n(I.id),H(!1),J(null)}}),C&&(0,i.jsx)(fz,{note:C,onClose:()=>D(null),allTags:t})]})}var fM=c(54430),fN=c(72296),fO=c(63150),fP=c(20203),fQ=c(37544),fR=c(84935),fS=c(26081),fT=fM.bP.create({name:"heading",addOptions:()=>({levels:[1,2,3,4,5,6],HTMLAttributes:{}}),content:"inline*",group:"block",defining:!0,addAttributes:()=>({level:{default:1,rendered:!1}}),parseHTML(){return this.options.levels.map(a=>({tag:`h${a}`,attrs:{level:a}}))},renderHTML({node:a,HTMLAttributes:b}){let c=this.options.levels.includes(a.attrs.level)?a.attrs.level:this.options.levels[0];return[`h${c}`,(0,fM.KV)(this.options.HTMLAttributes,b),0]},parseMarkdown:(a,b)=>b.createNode("heading",{level:a.depth||1},b.parseInline(a.tokens||[])),renderMarkdown:(a,b)=>{var c;let d=(null==(c=a.attrs)?void 0:c.level)?parseInt(a.attrs.level,10):1,e="#".repeat(d);return a.content?`${e} ${b.renderChildren(a.content)}`:""},addCommands(){return{setHeading:a=>({commands:b})=>!!this.options.levels.includes(a.level)&&b.setNode(this.name,a),toggleHeading:a=>({commands:b})=>!!this.options.levels.includes(a.level)&&b.toggleNode(this.name,"paragraph",a)}},addKeyboardShortcuts(){return this.options.levels.reduce((a,b)=>({...a,...{[`Mod-Alt-${b}`]:()=>this.editor.commands.toggleHeading({level:b})}}),{})},addInputRules(){return this.options.levels.map(a=>(0,fM.JJ)({find:RegExp(`^(#{${Math.min(...this.options.levels)},${a}})\\s$`),type:this.type,getAttributes:{level:a}}))}}),fU=c(73200),fV=c(6325),fW=c(92561),fX=c(70321),fY=c(53744),fZ=fY.QO,f$=fY.vR,f_=fM.bP.create({name:"hardBreak",markdownTokenName:"br",addOptions:()=>({keepMarks:!0,HTMLAttributes:{}}),inline:!0,group:"inline",selectable:!1,linebreakReplacement:!0,parseHTML:()=>[{tag:"br"}],renderHTML({HTMLAttributes:a}){return["br",(0,fM.KV)(this.options.HTMLAttributes,a)]},renderText:()=>"\n",renderMarkdown:()=>`  
`,parseMarkdown:()=>({type:"hardBreak"}),addCommands(){return{setHardBreak:()=>({commands:a,chain:b,state:c,editor:d})=>a.first([()=>a.exitCode(),()=>a.command(()=>{let{selection:a,storedMarks:e}=c;if(a.$from.parent.type.spec.isolating)return!1;let{keepMarks:f}=this.options,{splittableMarks:g}=d.extensionManager,h=e||a.$to.parentOffset&&a.$from.marks();return b().insertContent({type:this.name}).command(({tr:a,dispatch:b})=>{if(b&&h&&f){let b=h.filter(a=>g.includes(a.type.name));a.ensureMarks(b)}return!0}).run()})])}},addKeyboardShortcuts(){return{"Mod-Enter":()=>this.editor.commands.setHardBreak(),"Shift-Enter":()=>this.editor.commands.setHardBreak()}}}),f0=c(78690),f1=fM.bP.create({name:"horizontalRule",addOptions:()=>({HTMLAttributes:{},nextNodeType:"paragraph"}),group:"block",parseHTML:()=>[{tag:"hr"}],renderHTML({HTMLAttributes:a}){return["hr",(0,fM.KV)(this.options.HTMLAttributes,a)]},markdownTokenName:"hr",parseMarkdown:(a,b)=>b.createNode("horizontalRule"),renderMarkdown:()=>"---",addCommands(){return{setHorizontalRule:()=>({chain:a,state:b})=>{if(!(0,fM.AB)(b,b.schema.nodes[this.name]))return!1;let{selection:c}=b,{$to:d}=c,e=a();return(0,fM.BQ)(c)?e.insertContentAt(d.pos,{type:this.name}):e.insertContent({type:this.name}),e.command(({state:a,tr:b,dispatch:c})=>{if(c){let{$to:c}=b.selection,d=c.end();if(c.nodeAfter)c.nodeAfter.isTextblock?b.setSelection(f0.U3.create(b.doc,c.pos+1)):c.nodeAfter.isBlock?b.setSelection(f0.nh.create(b.doc,c.pos)):b.setSelection(f0.U3.create(b.doc,c.pos));else{let e=a.schema.nodes[this.options.nextNodeType]||c.parent.type.contentMatch.defaultType,f=null==e?void 0:e.create();f&&(b.insert(d,f),b.setSelection(f0.U3.create(b.doc,d+1)))}b.scrollIntoView()}return!0}).run()}}},addInputRules(){return[(0,fM.jT)({find:/^(?:---|â€”-|___\s|\*\*\*\s)$/,type:this.type})]}}),f2=/(?:^|\s)(~~(?!\s+~~)((?:[^~]+))~~(?!\s+~~))$/,f3=/(?:^|\s)(~~(?!\s+~~)((?:[^~]+))~~(?!\s+~~))/g,f4=fM.CU.create({name:"strike",addOptions:()=>({HTMLAttributes:{}}),parseHTML:()=>[{tag:"s"},{tag:"del"},{tag:"strike"},{style:"text-decoration",consuming:!1,getAttrs:a=>!!a.includes("line-through")&&{}}],renderHTML({HTMLAttributes:a}){return["s",(0,fM.KV)(this.options.HTMLAttributes,a),0]},markdownTokenName:"del",parseMarkdown:(a,b)=>b.applyMark("strike",b.parseInline(a.tokens||[])),renderMarkdown:(a,b)=>`~~${b.renderChildren(a)}~~`,addCommands(){return{setStrike:()=>({commands:a})=>a.setMark(this.name),toggleStrike:()=>({commands:a})=>a.toggleMark(this.name),unsetStrike:()=>({commands:a})=>a.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-Shift-s":()=>this.editor.commands.toggleStrike()}},addInputRules(){return[(0,fM.OX)({find:f2,type:this.type})]},addPasteRules(){return[(0,fM.Zc)({find:f3,type:this.type})]}}),f5=c(93130),f6=c(72576),f7=c(8842);c(63032),c(51538),c(26958);var f8=c(91994),f9=c(26369);let ga=(0,aE.A)("link",[["path",{d:"M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71",key:"1cjeqo"}],["path",{d:"M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71",key:"19qd67"}]]),gb=(0,aE.A)("heading-1",[["path",{d:"M4 12h8",key:"17cfdx"}],["path",{d:"M4 18V6",key:"1rz3zl"}],["path",{d:"M12 18V6",key:"zqpxq5"}],["path",{d:"m17 12 3-2v8",key:"1hhhft"}]]),gc=(0,aE.A)("heading-2",[["path",{d:"M4 12h8",key:"17cfdx"}],["path",{d:"M4 18V6",key:"1rz3zl"}],["path",{d:"M12 18V6",key:"zqpxq5"}],["path",{d:"M21 18h-4c0-4 4-3 4-6 0-1.5-2-2.5-4-1",key:"9jr5yi"}]]),gd=(0,aE.A)("heading-3",[["path",{d:"M4 12h8",key:"17cfdx"}],["path",{d:"M4 18V6",key:"1rz3zl"}],["path",{d:"M12 18V6",key:"zqpxq5"}],["path",{d:"M17.5 10.5c1.7-1 3.5 0 3.5 1.5a2 2 0 0 1-2 2",key:"68ncm8"}],["path",{d:"M17 17.5c2 1.5 4 .3 4-1.5a2 2 0 0 0-2-2",key:"1ejuhz"}]]);var ge=c(70949);let gf=(0,aE.A)("list-checks",[["path",{d:"M13 5h8",key:"a7qcls"}],["path",{d:"M13 12h8",key:"h98zly"}],["path",{d:"M13 19h8",key:"c3s6r1"}],["path",{d:"m3 17 2 2 4-4",key:"1jhpwq"}],["path",{d:"m3 7 2 2 4-4",key:"1obspn"}]]),gg=(0,aE.A)("paperclip",[["path",{d:"m16 6-8.414 8.586a2 2 0 0 0 2.829 2.829l8.414-8.586a4 4 0 1 0-5.657-5.657l-8.379 8.551a6 6 0 1 0 8.485 8.485l8.379-8.551",key:"1miecu"}]]);var gh=c(46148),gi=c(25658);let gj=(0,aE.A)("file",[["path",{d:"M6 22a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h8a2.4 2.4 0 0 1 1.704.706l3.588 3.588A2.4 2.4 0 0 1 20 8v12a2 2 0 0 1-2 2z",key:"1oefj6"}],["path",{d:"M14 2v5a1 1 0 0 0 1 1h5",key:"wfsgrz"}]]),gk=(0,aE.A)("lock-open",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 9.9-1",key:"1mm8w8"}]]),gl=({children:a,label:b})=>(0,i.jsx)(er,{delayDuration:100,children:(0,i.jsxs)(ev,{children:[(0,i.jsx)(ex,{asChild:!0,children:a}),(0,i.jsx)(eB,{children:(0,i.jsxs)(eD,{className:"bg-black text-white px-2 py-1 rounded text-xs shadow-lg z-50",sideOffset:5,children:[b,(0,i.jsx)(eK,{className:"fill-black"})]})})]})});function gm({editor:a,mediaInputRef:b,docInputRef:c,onAddLink:d,onRecordAudioClick:e,isLocked:f,onToggleLock:g,onDeleteNote:h}){if(!a)return null;let j=({onClick:b,isActive:c,children:d,label:e})=>(0,i.jsx)(gl,{label:e,children:(0,i.jsx)("button",{type:"button",onMouseDown:a=>a.preventDefault(),onClick:b,disabled:!a.isEditable&&!f,className:`p-2 rounded-md transition-colors disabled:opacity-50 ${c?"bg-black text-white":"text-gray-600 hover:bg-gray-200 hover:text-black"}`,children:d})});return(0,i.jsx)("div",{className:"flex items-center gap-1 p-2 h-[50px] box-border border-b border-gray-200 overflow-x-auto no-scrollbar bg-white sticky top-0 z-10",children:(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(j,{onClick:()=>a.chain().focus().toggleBold().run(),isActive:a.isActive("bold"),label:"Bold (Ctrl+B)",children:(0,i.jsx)(f8.A,{className:"w-4 h-4"})}),(0,i.jsx)(j,{onClick:()=>a.chain().focus().toggleItalic().run(),isActive:a.isActive("italic"),label:"Italic (Ctrl+I)",children:(0,i.jsx)(f9.A,{className:"w-4 h-4"})}),(0,i.jsx)(j,{onClick:d,isActive:a.isActive("link"),label:"Add Link (Ctrl+K)",children:(0,i.jsx)(ga,{className:"w-4 h-4"})}),(0,i.jsx)("div",{className:"w-px h-5 bg-gray-300 mx-1"}),(0,i.jsx)(j,{onClick:()=>a.chain().focus().toggleHeading({level:1}).run(),isActive:a.isActive("heading",{level:1}),label:"Heading 1",children:(0,i.jsx)(gb,{className:"w-4 h-4"})}),(0,i.jsx)(j,{onClick:()=>a.chain().focus().toggleHeading({level:2}).run(),isActive:a.isActive("heading",{level:2}),label:"Heading 2",children:(0,i.jsx)(gc,{className:"w-4 h-4"})}),(0,i.jsx)(j,{onClick:()=>a.chain().focus().toggleHeading({level:3}).run(),isActive:a.isActive("heading",{level:3}),label:"Heading 3",children:(0,i.jsx)(gd,{className:"w-4 h-4"})}),(0,i.jsx)("div",{className:"w-px h-5 bg-gray-300 mx-1"}),(0,i.jsx)(j,{onClick:()=>a.chain().focus().toggleBulletList().run(),isActive:a.isActive("bulletList"),label:"Bullet List",children:(0,i.jsx)(fn.A,{className:"w-4 h-4"})}),(0,i.jsx)(j,{onClick:()=>a.chain().focus().toggleOrderedList().run(),isActive:a.isActive("orderedList"),label:"Numbered List",children:(0,i.jsx)(ge.A,{className:"w-4 h-4"})}),(0,i.jsx)(j,{onClick:()=>a.chain().focus().toggleTaskList().run(),isActive:a.isActive("taskList"),label:"Checklist",children:(0,i.jsx)(gf,{className:"w-4 h-4"})}),(0,i.jsx)("div",{className:"w-px h-5 bg-gray-300 mx-1"}),(0,i.jsx)(er,{delayDuration:100,children:(0,i.jsxs)(d7,{children:[(0,i.jsxs)(ev,{children:[(0,i.jsx)(ex,{asChild:!0,children:(0,i.jsx)(d9,{asChild:!0,children:(0,i.jsx)("button",{type:"button",onMouseDown:a=>a.preventDefault(),disabled:!a.isEditable,className:"p-2 rounded-md text-gray-600 hover:bg-gray-200 disabled:opacity-50",children:(0,i.jsx)(gg,{className:"w-4 h-4"})})})}),(0,i.jsx)(eB,{children:(0,i.jsxs)(eD,{className:"bg-black text-white px-2 py-1 rounded text-xs shadow-lg z-50",sideOffset:5,children:["Attach ",(0,i.jsx)(eK,{className:"fill-black"})]})})]}),(0,i.jsx)(ea,{children:(0,i.jsxs)(ec,{className:"bg-white rounded-md shadow-lg p-2 z-50 border border-gray-200 min-w-[180px] animate-in fade-in zoom-in-95 duration-100",sideOffset:5,align:"start",children:[(0,i.jsxs)(ed,{onSelect:()=>b.current?.click(),className:"flex items-center gap-3 px-3 py-2 text-sm rounded-md cursor-pointer hover:bg-gray-100 focus:outline-none focus:bg-gray-100",children:[(0,i.jsx)(gh.A,{className:"w-4 h-4"}),(0,i.jsx)("span",{children:"Photo / Video"})]}),(0,i.jsxs)(ed,{onSelect:e,className:"flex items-center gap-3 px-3 py-2 text-sm rounded-md cursor-pointer hover:bg-gray-100 focus:outline-none focus:bg-gray-100",children:[(0,i.jsx)(gi.A,{className:"w-4 h-4"}),(0,i.jsx)("span",{children:"Record Audio"})]}),(0,i.jsxs)(ed,{onSelect:()=>c.current?.click(),className:"flex items-center gap-3 px-3 py-2 text-sm rounded-md cursor-pointer hover:bg-gray-100 focus:outline-none focus:bg-gray-100",children:[(0,i.jsx)(gj,{className:"w-4 h-4"}),(0,i.jsx)("span",{children:"Document"})]})]})})]})}),(0,i.jsx)("div",{className:"flex-grow"}),(0,i.jsx)(j,{onClick:g,isActive:f,label:f?"Unlock Note":"Lock Note",children:f?(0,i.jsx)(fg,{className:"w-4 h-4"}):(0,i.jsx)(gk,{className:"w-4 h-4"})}),(0,i.jsx)(j,{onClick:h,isActive:!1,label:"Move to Trash",children:(0,i.jsx)(aJ.A,{className:"w-4 h-4 text-gray-600 hover:text-red-600"})})]})})}var gn=c(77545),go=gn._0,gp=gn.L2;let gq=(0,aE.A)("search",[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]]),gr=(0,aE.A)("file-text",[["path",{d:"M6 22a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h8a2.4 2.4 0 0 1 1.704.706l3.588 3.588A2.4 2.4 0 0 1 20 8v12a2 2 0 0 1-2 2z",key:"1oefj6"}],["path",{d:"M14 2v5a1 1 0 0 0 1 1h5",key:"wfsgrz"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]]);var gs=c(81100),gt=c(82594),gu=c(52385);function gv(a,b){let[c,d]=(0,j.useState)(a);return c}function gw({editor:a,onClose:b,initialName:c,initialUrl:d}){let[e,f]=(0,j.useState)(d),[g,h]=(0,j.useState)(c);return(0,i.jsx)("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/50",onClick:b,children:(0,i.jsxs)("form",{onSubmit:c=>{if(c.preventDefault(),!e){a.chain().focus().extendMarkRange("link").unsetLink().run(),b();return}let{from:d,to:f,empty:h}=a.state.selection,i=g.trim()||e,j=a.state.doc.textBetween(d,f," ");h?a.chain().focus().insertContentAt(d,i).setTextSelection({from:d,to:d+i.length}).setLink({href:e}).setTextSelection(d+i.length).run():i&&i!==j?a.chain().focus().deleteRange(a.state.selection).insertContent(i).setTextSelection({from:d,to:d+i.length}).setLink({href:e}).setTextSelection(d+i.length).run():a.chain().focus().extendMarkRange("link").setLink({href:e}).run(),b()},onClick:a=>a.stopPropagation(),className:"bg-white rounded-lg shadow-xl w-96 p-5",children:[(0,i.jsx)("h3",{className:"text-lg font-semibold mb-4 text-center",children:"Add Link"}),(0,i.jsx)("label",{htmlFor:"url",className:"text-sm font-medium text-gray-700",children:"Link to"}),(0,i.jsx)("input",{id:"url",type:"text",value:e,onChange:a=>f(a.target.value),placeholder:"Enter a URL or note title",className:"w-full border border-gray-400 rounded-md px-3 py-2 mt-1 mb-3 focus:outline-none focus:ring-2 focus:ring-black",autoFocus:!0}),(0,i.jsx)("label",{htmlFor:"name",className:"text-sm font-medium text-gray-700",children:"Name"}),(0,i.jsx)("input",{id:"name",type:"text",value:g,onChange:a=>h(a.target.value),placeholder:"Text to display (optional)",className:"w-full border border-gray-400 rounded-md px-3 py-2 mt-1 focus:outline-none focus:ring-2 focus:ring-black"}),(0,i.jsxs)("div",{className:"flex justify-end gap-3 mt-6",children:[(0,i.jsx)("button",{type:"button",onClick:b,className:"px-4 py-2 text-sm font-medium bg-gray-200 rounded-md hover:bg-gray-300 focus:outline-none",children:"Cancel"}),(0,i.jsx)("button",{type:"submit",className:"px-4 py-2 text-sm font-medium text-white bg-black rounded-md hover:bg-gray-800 focus:outline-none",children:"OK"})]})]})})}let gx=fM.bP.create({name:"video",group:"block",atom:!0,addAttributes:()=>({src:{default:null},controls:{default:!0}}),parseHTML:()=>[{tag:"video[src]"}],renderHTML:({HTMLAttributes:a})=>["div",{class:"media-node video-player my-4 mx-auto rounded-xl overflow-hidden shadow-sm border border-gray-200","data-media-wrapper":"true",style:"width: fit-content; max-width: 400px; display: table; margin-left: auto; margin-right: auto;"},["video",(0,fM.KV)(a,{class:"block",style:"max-width: 100%; height: auto; max-height: 350px; object-fit: contain; background-color: #000;"})]],addCommands(){return{setVideo:a=>({commands:b})=>b.insertContent({type:this.name,attrs:a})}}}),gy=fM.bP.create({name:"audio",group:"block",atom:!0,addAttributes:()=>({src:{default:null},controls:{default:!0}}),parseHTML:()=>[{tag:"audio[src]"}],renderHTML:({HTMLAttributes:a})=>["div",{class:"media-node audio-player my-4 mx-auto max-w-md p-4 bg-gray-50 rounded-xl border border-gray-200 cursor-pointer hover:border-blue-300 transition-colors","data-media-wrapper":"true"},["audio",(0,fM.KV)(a,{class:"w-full"})]],addCommands(){return{setAudio:a=>({commands:b})=>b.insertContent({type:this.name,attrs:a})}}}),gz=fM.bP.create({name:"file",group:"block",atom:!0,addAttributes:()=>({src:{default:null},name:{default:"Attachment"}}),parseHTML:()=>[{tag:"div[data-file-attachment]"}],renderHTML:({HTMLAttributes:a})=>["div",{class:"media-node file-attachment my-3 mx-auto max-w-sm","data-media-wrapper":"true","data-file-attachment":"true"},["a",{href:a.src,target:"_blank",rel:"noopener noreferrer",class:"flex items-center gap-3 p-3 bg-white border border-gray-200 rounded-lg shadow-sm hover:shadow-md hover:border-blue-300 transition-all no-underline group cursor-pointer"},["div",{class:"p-2 bg-blue-50 rounded-full text-blue-600 group-hover:bg-blue-100 transition-colors"},["svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},["path",{d:"M14.5 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7.5L14.5 2z"}],["polyline",{points:"14 2 14 8 20 8"}]]],["div",{class:"flex flex-col overflow-hidden"},["span",{class:"text-sm font-medium text-gray-700 truncate block max-w-[200px]"},a.name],["span",{class:"text-[10px] text-gray-400 uppercase"},"Document"]]]],addCommands(){return{setFile:a=>({commands:b})=>b.insertContent({type:this.name,attrs:a})}}});function gA({onUnlockSubmit:a,error:b}){let[c,d]=(0,j.useState)(""),[e,f]=(0,j.useState)(!1);return(0,i.jsxs)("div",{className:"flex flex-col items-center justify-center h-full text-gray-500 p-4",children:[(0,i.jsx)(fg,{className:"w-16 h-16 mb-4"}),(0,i.jsx)("h2",{className:"text-xl font-semibold mb-2",children:"Note Locked"}),(0,i.jsx)("p",{className:"mb-4 text-center",children:"This note is locked. Enter your notes password to view it."}),(0,i.jsxs)("form",{onSubmit:b=>{b.preventDefault(),a(c)},className:"w-full max-w-sm",children:[(0,i.jsxs)("div",{className:"relative mb-2",children:[(0,i.jsx)("input",{id:"password",type:e?"text":"password",value:c,onChange:a=>d(a.target.value),autoComplete:"new-password",name:"lock_screen_pwd_field",className:"w-full border border-gray-400 rounded-md px-3 py-2 focus:outline-none focus:ring-2 focus:ring-black",autoFocus:!0}),(0,i.jsx)("button",{type:"button",onClick:()=>f(!e),className:"absolute right-3 top-1/2 -translate-y-1/2 p-1 text-gray-500",children:e?(0,i.jsx)(fq,{className:"w-4 h-4"}):(0,i.jsx)(fr.A,{className:"w-4 h-4"})})]}),b&&(0,i.jsx)("p",{className:"text-sm text-red-600 mb-4",children:b}),(0,i.jsx)("button",{type:"submit",className:"w-full bg-black text-white px-4 py-2 rounded-md text-sm font-medium hover:bg-gray-800",children:"Unlock"})]})]})}let gB=fW.A.extend({addKeyboardShortcuts(){return{Enter:()=>{let{state:a}=this.editor,{$from:b}=a.selection;return"listItem"===b.parent.type.name&&0===b.parent.content.size?this.editor.commands.liftListItem("listItem"):this.editor.commands.splitListItem("listItem")},Backspace:a=>{let{state:b}=this.editor,{$from:c}=b.selection;return"listItem"===c.parent.type.name&&0===c.parent.content.size&&0===c.parentOffset?this.editor.commands.liftListItem("listItem"):this.parent?.()?.Backspace?.(a)}}}}),gC=gp.extend({content:"paragraph"});function gD({activeNoteId:a,setActiveNoteId:b}){let{notes:c,updateNote:d,lockNote:e,unlockNote:f,deleteNote:g}=aA(),{metadata:h}=aD(),[k,l]=(0,j.useState)(!1),[m,n]=(0,j.useState)(""),[o,p]=(0,j.useState)(""),[q,r]=(0,j.useState)(""),[s,t]=(0,j.useState)(""),[u,v]=(0,j.useState)(!1),[w,x]=(0,j.useState)(""),[y,z]=(0,j.useState)(""),[A,B]=(0,j.useState)(!1),[C,D]=(0,j.useState)(null),[E,F]=(0,j.useState)(!1),[G,H]=(0,j.useState)(!1),[I,J]=(0,j.useState)(null),[K,L]=(0,j.useState)(null),[M,N]=(0,j.useState)(""),[O,P]=(0,j.useState)(""),Q=(0,j.useRef)(null),R=(0,j.useRef)(null),S=(0,j.useRef)(null);(0,j.useRef)(!0);let T=(0,j.useRef)(null),U=(0,j.useRef)(null),V=(0,j.useRef)(null),[W,X]=(0,j.useState)(!1),[,Y]=(0,j.useState)({}),Z=(0,j.useMemo)(()=>{if(!O)return null;if(!c)return[];let a=O.toLowerCase();return c.filter(b=>b.title.toLowerCase().includes(a)||(b.content||"").toLowerCase().includes(a)).map(a=>({id:a.id,title:a.title||"Untitled Note",snippet:function(a,b){let c=document.createElement("div");c.innerHTML=a;let d=c.textContent||"",e=d.toLowerCase(),f=b.toLowerCase(),g=e.indexOf(f);if(-1===g)return d.substring(0,100);let h=Math.max(0,g-30),i=Math.min(d.length,g+f.length+70),j=d.substring(h,i);return h>0&&(j="... "+j),i<d.length&&(j+=" ..."),j=j.replace(RegExp(b.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&"),"gi"),a=>`<strong class="bg-yellow-200">${a}</strong>`)}(a.content||"",O)}))},[O,c]),$=(0,fN.hG)({extensions:[fO.A,fP.A,fQ.A,fR.Ay,fS.Ay,f4,fT.configure({levels:[1,2,3]}),fU.A,fV.A,gB,fX.A,fZ,f$,f_,f1,f5.A.configure({placeholder:"Start writing..."}),go,gC.configure({nested:!0}),f6.Ay.configure({openOnClick:!0,autolink:!0}),f7.Ay.configure({inline:!1,allowBase64:!0,HTMLAttributes:{class:"rounded-lg shadow-sm border border-gray-100",style:"max-width: 400px; max-height: 350px; object-fit: contain; display: block; margin: 1rem auto;"}}),gx,gy,gz],content:"",onTransaction:()=>{Y({})},onUpdate:({editor:a})=>{t(a.getHTML())},editable:!1,editorProps:{attributes:{class:"tiptap-styles p-6 focus:outline-none prose prose-sm max-w-none min-h-full [&_img.ProseMirror-selectednode]:ring-2 [&_img.ProseMirror-selectednode]:ring-blue-500 [&_.media-node.ProseMirror-selectednode]:ring-2 [&_.media-node.ProseMirror-selectednode]:ring-blue-500 [&_.media-node]:outline-none"}},immediatelyRender:!1});(0,j.useCallback)(()=>{let a;if(!$||!U.current)return;let{state:b,view:c}=$,{from:d}=b.selection,e=b.doc.nodeAt(d);if(!(e&&("image"===e.type.name||"audio"===e.type.name||"video"===e.type.name||"file"===e.type.name)))return void U.current.hide();let f=c.nodeDOM(d),g=f;if("audio"===e.type.name||"video"===e.type.name||"file"===e.type.name){let a=`[data-media-wrapper] ${e.type.name}[src="${e.attrs.src}"]`;"file"===e.type.name&&(a="[data-file-attachment]");let b=c.dom.querySelector(a)?.closest(".media-node");b?g=b:f&&f.classList.contains("media-node")&&(g=f)}if(g&&g.getBoundingClientRect)a=g.getBoundingClientRect();else{let b=c.coordsAtPos(d);a={width:0,height:0,top:b.top,bottom:b.bottom,left:b.left,right:b.right}}U.current.setProps({getReferenceClientRect:()=>a}),U.current.show()},[$]);let _=(0,j.useCallback)(async()=>{if(!$)return;X(!0);let{state:a}=$,{from:b}=a.selection,c=a.doc.nodeAt(b);if(c&&("image"===c.type.name||"audio"===c.type.name||"video"===c.type.name||"file"===c.type.name)){let a=c.attrs.src;a&&await (0,az.e)(a),$.chain().focus().deleteSelection().run(),t($.getHTML()),U.current?.hide(),V.current=null}X(!1)},[$]),aa=(0,j.useMemo)(()=>!!a&&!!C&&(!C.isLocked||!!I)&&(m!==q||s!==o),[m,s,q,o,a,C,I]);gv(m,500),gv(s,500);let ab=()=>{$&&a&&aa&&(d(a,{content:s,title:m}),r(m),p(s))},ac=async b=>{if(!a||!b||!$)return;l(!0);let c=Array.from(b);try{for(let a of c){let b=(await (0,gt.h)(a,"notes")).url,c=a.name.toLowerCase(),d=a.type;d.startsWith("image/")||c.endsWith(".png")||c.endsWith(".jpg")||c.endsWith(".jpeg")||c.endsWith(".gif")||c.endsWith(".svg")?$.chain().focus().setImage({src:b,alt:c}).run():d.startsWith("video/")||c.endsWith(".mp4")||c.endsWith(".webm")||c.endsWith(".mov")?$.chain().focus().setVideo({src:b}).run():d.startsWith("audio/")||c.endsWith(".mp3")||c.endsWith(".wav")||c.endsWith(".ogg")?$.chain().focus().setAudio({src:b}).run():$.chain().focus().setFile({src:b,name:a.name}).run()}}catch(a){console.error("Failed to upload files:",a)}l(!1)},ad=(0,j.useCallback)(()=>{if(!$)return;let{from:a,to:b}=$.state.selection;x($.state.doc.textBetween(a,b," ")),z($.getAttributes("link").href||""),v(!0)},[$]),ae=()=>{C&&(aa&&ab(),e(C.id),D({...C,isLocked:!0}),$?.commands.clearContent(),$?.setEditable(!1),J(null))},af=async a=>{if(N(""),!a)return void N("Password cannot be empty.");try{(await fetch("/api/notes-password",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({action:"verify",password:a})})).ok?J(a):N("Incorrect password. Please try again.")}catch{N("An error occurred. Please try again.")}},ag=a=>{if(!$||!$.isEditable)return;let b=$.view.dom,c=a.currentTarget.querySelector('input[placeholder="Note Title"]');b.contains(a.target)||c?.contains(a.target)||$.chain().focus().setTextSelection($.state.doc.content.size).run()},ah=(0,i.jsx)("div",{className:"bg-gray-900 text-white rounded-lg shadow-xl px-3 py-2 flex items-center gap-2 text-xs font-medium",children:(0,i.jsxs)("button",{onClick:_,className:"flex items-center gap-1 hover:text-red-400 transition-colors",children:[W?(0,i.jsx)(fs.A,{size:14,className:"animate-spin"}):(0,i.jsx)(aJ.A,{size:14}),(0,i.jsx)("span",{children:"Delete"})]})});return(0,i.jsxs)(er,{delayDuration:100,children:[(0,i.jsxs)("div",{className:"flex flex-col h-full relative",children:[(0,i.jsxs)("div",{className:"flex-shrink-0 p-2 border-b border-gray-200 relative",ref:S,children:[(0,i.jsxs)(ev,{children:[(0,i.jsx)(ex,{asChild:!0,children:(0,i.jsxs)("div",{className:"relative",children:[(0,i.jsx)("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:(0,i.jsx)(gq,{className:"h-4 w-4 text-gray-400"})}),(0,i.jsx)("input",{type:"text",placeholder:"Search all notes...",className:"w-full pl-9 p-2 rounded-md bg-gray-100 focus:bg-white focus:outline-none focus:ring-2 focus:ring-black",value:O,onChange:a=>P(a.target.value)})]})}),(0,i.jsx)(eB,{children:(0,i.jsxs)(eD,{className:"bg-black text-white px-2 py-1 rounded text-xs shadow-lg z-50",sideOffset:5,children:["Search all notes by title or content",(0,i.jsx)(eK,{className:"fill-black"})]})})]}),Z&&(0,i.jsx)("div",{className:"absolute top-full left-2 right-2 mt-1 bg-white border border-gray-200 rounded-md shadow-lg z-50 max-h-80 overflow-y-auto",children:0===Z.length?(0,i.jsx)("p",{className:"p-3 text-sm text-gray-500",children:"No results found."}):(0,i.jsx)("ul",{children:Z.map(a=>(0,i.jsx)("li",{children:(0,i.jsxs)("button",{onClick:()=>{b(a.id),P("")},className:"w-full text-left flex items-center gap-3 p-3 hover:bg-gray-100",children:[(0,i.jsx)(gr,{className:"w-4 h-4 text-gray-500 flex-shrink-0"}),(0,i.jsxs)("div",{className:"overflow-hidden",children:[(0,i.jsx)("p",{className:"text-sm font-medium truncate",children:a.title}),(0,i.jsx)("p",{className:"text-xs text-gray-500 truncate",dangerouslySetInnerHTML:{__html:a.snippet}})]})]})},a.id))})})]}),(0,i.jsx)(gm,{editor:$,mediaInputRef:Q,docInputRef:R,onAddLink:ad,onRecordAudioClick:()=>B(!0),isLocked:C?.isLocked||!1,onToggleLock:()=>{C&&(N(""),C.isLocked?(L("unlock"),H(!0)):(L("lock"),h?.hasNotesPassword?ae():F(!0)))},onDeleteNote:()=>{a&&(g(a),b(null))}}),a&&C?C.isLocked&&!I?(0,i.jsx)(gA,{onUnlockSubmit:af,error:M}):(0,i.jsxs)(i.Fragment,{children:[k&&(0,i.jsxs)("div",{className:"flex items-center gap-2 p-2 text-xs text-gray-600 border-b border-gray-200",children:[(0,i.jsx)(fs.A,{className:"w-4 h-4 animate-spin"}),(0,i.jsx)("span",{children:"Uploading files..."})]}),(0,i.jsxs)("div",{className:"flex-1 overflow-y-auto [&::-webkit-scrollbar]:hidden [-ms-overflow-style:none] [scrollbar-width:none]",onClick:ag,children:[(0,i.jsx)("input",{type:"text",value:m,onChange:a=>n(a.target.value),onKeyDown:a=>{"Enter"===a.key&&(a.preventDefault(),$?.commands.focus())},placeholder:"Note Title",className:"text-2xl font-bold w-full p-6 pb-0 focus:outline-none",disabled:!$?.isEditable}),(0,i.jsx)(fN.$Z,{editor:$})]}),aa&&(0,i.jsxs)(ev,{children:[(0,i.jsx)(ex,{asChild:!0,children:(0,i.jsxs)("button",{onClick:ab,className:"absolute bottom-6 right-6 z-10 bg-black text-white px-4 py-2 rounded-full shadow-lg flex items-center gap-2 text-sm font-medium hover:bg-gray-800",children:[(0,i.jsx)(gs.A,{className:"w-4 h-4"}),"Save Changes"]})}),(0,i.jsx)(eB,{children:(0,i.jsxs)(eD,{className:"bg-black text-white px-2 py-1 rounded text-xs shadow-lg z-50",sideOffset:5,children:["Save",(0,i.jsx)(eK,{className:"fill-black"})]})})]})]}):(0,i.jsx)("div",{className:"flex-1 flex items-center justify-center text-gray-500",onClick:ag,children:"Select a note to start editing."}),u&&(0,i.jsx)(gw,{editor:$,onClose:()=>v(!1),initialName:w,initialUrl:y}),A&&(0,i.jsx)(gu.N,{onClose:()=>B(!1),onAdd:a=>ac([a])}),E&&(0,i.jsx)(fv,{onClose:()=>{F(!1),L(null)},onSuccess:a=>{J(a),F(!1),h&&av.A.userMetadata.update(h.userId,{hasNotesPassword:!0}),"lock"===K&&ae(),L(null)}}),G&&(0,i.jsx)(fw,{onClose:()=>{H(!1),L(null)},onSuccess:a=>{J(a),H(!1),N(""),"lock"===K&&ae(),"unlock"===K&&C&&(f(C.id),D({...C,isLocked:!1}),$?.commands.setContent(o,{emitUpdate:!1}),$?.setEditable(!0)),L(null)}}),(0,i.jsx)("input",{type:"file",ref:Q,onChange:a=>{ac(a.target.files),a.target.value=""},className:"hidden",multiple:!0,accept:"image/*,video/*"}),(0,i.jsx)("input",{type:"file",ref:R,onChange:a=>{ac(a.target.files),a.target.value=""},className:"hidden",multiple:!0,accept:".pdf,.doc,.docx,.txt,.csv,audio/*"})]}),T.current&&(0,aP.createPortal)(ah,T.current)]})}function gE(){let a=(0,j.useRef)(null),[b,c]=(0,j.useState)(!1),[d,e]=(0,j.useState)("all"),[f,g]=(0,j.useState)(null),h=()=>{let b=a.current;b&&(b.isCollapsed()?b.expand():b.collapse())},k=({className:a=""})=>(0,i.jsx)(at,{className:`w-[2px] bg-transparent hover:bg-blue-400 transition-all duration-300 hover:w-[3px] cursor-col-resize relative group outline-none z-20 ${a}`,children:(0,i.jsx)("div",{className:"absolute inset-y-0 left-1/2 w-[1px] bg-gray-200 group-hover:bg-blue-400 transition-colors h-full"})});return(0,i.jsx)("div",{className:"flex overflow-hidden bg-gray-50/30 text-black fixed top-[60px] left-0 right-0 bottom-0 z-40",children:(0,i.jsxs)(aq,{direction:"horizontal",className:"w-full h-full",children:[(0,i.jsx)(s,{ref:a,collapsible:!0,defaultSize:18,minSize:15,maxSize:25,className:"h-full bg-gray-50/50 border-r border-gray-100",onCollapse:()=>c(!0),onExpand:()=>c(!1),children:(0,i.jsx)(d0,{isCollapsed:b,onToggleClick:h,selectedView:d,setSelectedView:e})}),(0,i.jsx)(k,{}),(0,i.jsx)(s,{defaultSize:25,minSize:20,maxSize:35,className:"h-full bg-white/80 backdrop-blur-sm",children:(0,i.jsx)(fL,{isSidebarCollapsed:b,onToggleSidebar:h,selectedView:d,activeNoteId:f,setActiveNoteId:g})}),(0,i.jsx)(k,{}),(0,i.jsx)(s,{defaultSize:57,minSize:30,className:"h-full bg-white shadow-[-5px_0_15px_-3px_rgba(0,0,0,0.02)] z-10 relative",children:(0,i.jsx)(gD,{activeNoteId:f,setActiveNoteId:g})})]})})}}};var b=require("../../../webpack-runtime.js");b.C(a);var c=b.X(0,[996,663,991,720,181,749,355,209],()=>b(b.s=83970));module.exports=c})();
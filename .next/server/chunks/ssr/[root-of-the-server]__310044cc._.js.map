{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 22, "column": 0}, "map": {"version":3,"sources":["file:///Users/ramanakumar/TaskGlyph/src/lib/db/useTier.ts"],"sourcesContent":["// src/lib/db/useTier.ts\n\"use client\";\n\nimport { useEffect, useState } from \"react\";\nimport { useSession } from \"next-auth/react\";\nimport db, { UserMetadata } from \"./clientDb\";\n\nexport function useTier() {\n  const { data: session, status } = useSession();\n  const [tier, setTier] = useState<UserMetadata[\"tier\"] | null>(null);\n\n  useEffect(() => {\n    // 1. Define an async function to fetch and set tier\n    const getAndSetTier = async (userId: string) => {\n      // 2. Try getting from local DB first for speed\n      const localMeta = await db.userMetadata.get(userId);\n      if (localMeta) {\n        setTier(localMeta.tier);\n      }\n\n      // 3. Fetch from server to get the *latest* tier info\n      // We need to create this API route next\n      try {\n        const response = await fetch(\"/api/user/tier\");\n        if (response.ok) {\n          const data = await response.json();\n          if (data.tier) {\n            // 4. Save the latest info to local DB and update state\n            await db.userMetadata.put({\n              userId: userId,\n              tier: data.tier,\n              trialStartedAt: data.trialStartedAt || 0,\n            });\n            setTier(data.tier);\n          }\n        } else {\n          // If fetch fails, fall back to local or 'free'\n          if (!localMeta) setTier(\"free\");\n        }\n      } catch (error) {\n        console.error(\"Failed to fetch user tier:\", error);\n        // If fetch fails, fall back to local or 'free'\n        if (!localMeta) setTier(\"free\");\n      }\n    };\n\n    if (status === \"authenticated\" && session?.user?.id) {\n      getAndSetTier(session.user.id);\n    } else if (status === \"unauthenticated\") {\n      setTier(null);\n    }\n  }, [session, status]);\n\n  return tier;\n}\n"],"names":[],"mappings":"AAAA,wBAAwB;;;;;AAGxB;AACA;AACA;AAJA;;;;AAMO,SAAS;IACd,MAAM,EAAE,MAAM,OAAO,EAAE,MAAM,EAAE,GAAG,IAAA,4JAAU;IAC5C,MAAM,CAAC,MAAM,QAAQ,GAAG,IAAA,iNAAQ,EAA8B;IAE9D,IAAA,kNAAS,EAAC;QACR,oDAAoD;QACpD,MAAM,gBAAgB,OAAO;YAC3B,+CAA+C;YAC/C,MAAM,YAAY,MAAM,uIAAE,CAAC,YAAY,CAAC,GAAG,CAAC;YAC5C,IAAI,WAAW;gBACb,QAAQ,UAAU,IAAI;YACxB;YAEA,qDAAqD;YACrD,wCAAwC;YACxC,IAAI;gBACF,MAAM,WAAW,MAAM,MAAM;gBAC7B,IAAI,SAAS,EAAE,EAAE;oBACf,MAAM,OAAO,MAAM,SAAS,IAAI;oBAChC,IAAI,KAAK,IAAI,EAAE;wBACb,uDAAuD;wBACvD,MAAM,uIAAE,CAAC,YAAY,CAAC,GAAG,CAAC;4BACxB,QAAQ;4BACR,MAAM,KAAK,IAAI;4BACf,gBAAgB,KAAK,cAAc,IAAI;wBACzC;wBACA,QAAQ,KAAK,IAAI;oBACnB;gBACF,OAAO;oBACL,+CAA+C;oBAC/C,IAAI,CAAC,WAAW,QAAQ;gBAC1B;YACF,EAAE,OAAO,OAAO;gBACd,QAAQ,KAAK,CAAC,8BAA8B;gBAC5C,+CAA+C;gBAC/C,IAAI,CAAC,WAAW,QAAQ;YAC1B;QACF;QAEA,IAAI,WAAW,mBAAmB,SAAS,MAAM,IAAI;YACnD,cAAc,QAAQ,IAAI,CAAC,EAAE;QAC/B,OAAO,IAAI,WAAW,mBAAmB;YACvC,QAAQ;QACV;IACF,GAAG;QAAC;QAAS;KAAO;IAEpB,OAAO;AACT","debugId":null}},
    {"offset": {"line": 85, "column": 0}, "map": {"version":3,"sources":["file:///Users/ramanakumar/TaskGlyph/src/lib/db/useNotifications.ts"],"sourcesContent":["// src/lib/db/useNotifications.ts\n\"use client\";\n\nimport { useMemo } from \"react\";\nimport db from \"./clientDb\";\nimport { useLiveQuery } from \"dexie-react-hooks\";\n\n/**\n * Gets all UNREAD notifications for the bell icon\n */\nexport function useUnreadNotifications() {\n  const notifs = useLiveQuery(() =>\n    // --- THIS IS THE FIX ---\n    // Query for the number 0 (for false) instead of the boolean\n    db.notifications.where(\"read\").equals(0).reverse().sortBy(\"createdAt\")\n  );\n\n  return useMemo(() => notifs || [], [notifs]);\n}\n"],"names":[],"mappings":"AAAA,iCAAiC;;;;;AAGjC;AACA;AACA;AAJA;;;;AASO,SAAS;IACd,MAAM,SAAS,IAAA,2LAAY,EAAC,IAC1B,0BAA0B;QAC1B,4DAA4D;QAC5D,uIAAE,CAAC,aAAa,CAAC,KAAK,CAAC,QAAQ,MAAM,CAAC,GAAG,OAAO,GAAG,MAAM,CAAC;IAG5D,OAAO,IAAA,gNAAO,EAAC,IAAM,UAAU,EAAE,EAAE;QAAC;KAAO;AAC7C","debugId":null}},
    {"offset": {"line": 109, "column": 0}, "map": {"version":3,"sources":["file:///Users/ramanakumar/TaskGlyph/src/components/NotificationBell.tsx"],"sourcesContent":["// src/components/NotificationBell.tsx\n\"use client\";\n\nimport { Fragment } from \"react\";\nimport { Popover, Transition } from \"@headlessui/react\";\nimport { BellIcon, XMarkIcon } from \"@heroicons/react/24/outline\";\nimport { useUnreadNotifications } from \"@/lib/db/useNotifications\";\nimport db from \"@/lib/db/clientDb\"; // Import the db instance\n\nexport default function NotificationBell() {\n  const unreadNotifs = useUnreadNotifications();\n  const unreadCount = unreadNotifs.length;\n\n  const markAsRead = async (id: string) => {\n    await db.notifications.update(id, { read: true });\n    // Note: We don't need to trigger sync for this,\n    // it's a client-only \"read\" status.\n  };\n\n  return (\n    <Popover className=\"relative\">\n      <Popover.Button className=\"relative rounded-full p-1 text-gray-400 hover:text-gray-500 focus:outline-none\">\n        <span className=\"sr-only\">View notifications</span>\n        <BellIcon className=\"h-6 w-6\" aria-hidden=\"true\" />\n        {/* Red Dot */}\n        {unreadCount > 0 && (\n          <span className=\"absolute top-0 right-0 block h-2.5 w-2.5 rounded-full bg-red-500 ring-2 ring-white\" />\n        )}\n      </Popover.Button>\n      <Transition\n        as={Fragment}\n        enter=\"transition ease-out duration-200\"\n        enterFrom=\"opacity-0 translate-y-1\"\n        enterTo=\"opacity-100 translate-y-0\"\n        leave=\"transition ease-in duration-150\"\n        leaveFrom=\"opacity-100 translate-y-0\"\n        leaveTo=\"opacity-0 translate-y-1\"\n      >\n        <Popover.Panel className=\"absolute right-0 z-10 mt-3 w-screen max-w-xs transform px-4 sm:px-0\">\n          <div className=\"overflow-hidden rounded-lg shadow-lg ring-1 ring-black/5\">\n            <div className=\"relative grid gap-4 bg-white p-4\">\n              <h3 className=\"text-base font-medium text-gray-900\">\n                Notifications\n              </h3>\n              {unreadCount === 0 ? (\n                <p className=\"text-sm text-gray-500\">\n                  You&apos;re all caught up!\n                </p>\n              ) : (\n                <ul className=\"max-h-60 overflow-y-auto space-y-2\">\n                  {unreadNotifs.map((notif) => (\n                    <li\n                      key={notif.id}\n                      className=\"flex items-start gap-3 p-2 rounded-lg hover:bg-gray-50\"\n                    >\n                      <div className=\"flex-1\">\n                        <p className=\"text-sm text-gray-800\">{notif.message}</p>\n                        <span className=\"text-xs text-gray-400\">\n                          {new Date(notif.createdAt).toLocaleTimeString()}\n                        </span>\n                      </div>\n                      <button\n                        onClick={() => markAsRead(notif.id)}\n                        title=\"Dismiss\"\n                      >\n                        <XMarkIcon className=\"w-4 h-4 text-gray-400 hover:text-gray-700\" />\n                      </button>\n                    </li>\n                  ))}\n                </ul>\n              )}\n            </div>\n          </div>\n        </Popover.Panel>\n      </Transition>\n    </Popover>\n  );\n}\n"],"names":[],"mappings":"AAAA,sCAAsC;;;;;;AAGtC;AACA;AAAA;AACA;AAAA;AACA;AACA,uNAAoC,yBAAyB;AAN7D;;;;;;;AAQe,SAAS;IACtB,MAAM,eAAe,IAAA,8JAAsB;IAC3C,MAAM,cAAc,aAAa,MAAM;IAEvC,MAAM,aAAa,OAAO;QACxB,MAAM,uIAAE,CAAC,aAAa,CAAC,MAAM,CAAC,IAAI;YAAE,MAAM;QAAK;IAC/C,gDAAgD;IAChD,oCAAoC;IACtC;IAEA,qBACE,8OAAC,4LAAO;QAAC,WAAU;;0BACjB,8OAAC,4LAAO,CAAC,MAAM;gBAAC,WAAU;;kCACxB,8OAAC;wBAAK,WAAU;kCAAU;;;;;;kCAC1B,8OAAC,2NAAQ;wBAAC,WAAU;wBAAU,eAAY;;;;;;oBAEzC,cAAc,mBACb,8OAAC;wBAAK,WAAU;;;;;;;;;;;;0BAGpB,8OAAC,qMAAU;gBACT,IAAI,iNAAQ;gBACZ,OAAM;gBACN,WAAU;gBACV,SAAQ;gBACR,OAAM;gBACN,WAAU;gBACV,SAAQ;0BAER,cAAA,8OAAC,4LAAO,CAAC,KAAK;oBAAC,WAAU;8BACvB,cAAA,8OAAC;wBAAI,WAAU;kCACb,cAAA,8OAAC;4BAAI,WAAU;;8CACb,8OAAC;oCAAG,WAAU;8CAAsC;;;;;;gCAGnD,gBAAgB,kBACf,8OAAC;oCAAE,WAAU;8CAAwB;;;;;yDAIrC,8OAAC;oCAAG,WAAU;8CACX,aAAa,GAAG,CAAC,CAAC,sBACjB,8OAAC;4CAEC,WAAU;;8DAEV,8OAAC;oDAAI,WAAU;;sEACb,8OAAC;4DAAE,WAAU;sEAAyB,MAAM,OAAO;;;;;;sEACnD,8OAAC;4DAAK,WAAU;sEACb,IAAI,KAAK,MAAM,SAAS,EAAE,kBAAkB;;;;;;;;;;;;8DAGjD,8OAAC;oDACC,SAAS,IAAM,WAAW,MAAM,EAAE;oDAClC,OAAM;8DAEN,cAAA,8OAAC,8NAAS;wDAAC,WAAU;;;;;;;;;;;;2CAblB,MAAM,EAAE;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAyBnC","debugId":null}},
    {"offset": {"line": 292, "column": 0}, "map": {"version":3,"sources":["file:///Users/ramanakumar/TaskGlyph/src/components/AppNavbar.tsx"],"sourcesContent":["// src/components/AppNavbar.tsx\n\"use client\";\n\nimport { Fragment } from \"react\";\nimport Link from \"next/link\";\nimport Image from \"next/image\";\nimport { useSession, signOut } from \"next-auth/react\";\nimport { Disclosure, Menu, Transition } from \"@headlessui/react\";\nimport {\n  ChevronDownIcon,\n  ListBulletIcon,\n  PencilIcon,\n  BookOpenIcon,\n  ClockIcon,\n  UserCircleIcon,\n  HomeIcon,\n  ChartBarIcon,\n  Bars3Icon,\n  XMarkIcon,\n  ArrowRightEndOnRectangleIcon,\n} from \"@heroicons/react/24/outline\";\nimport { useTier } from \"@/lib/db/useTier\";\nimport { usePathname } from \"next/navigation\";\nimport NotificationBell from \"./NotificationBell\"; // <-- [NEW] Import the bell\n\nfunction classNames(...classes: string[]) {\n  return classes.filter(Boolean).join(\" \");\n}\n\nexport default function AppNavbar() {\n  const { data: session } = useSession();\n  const tier = useTier();\n  const pathname = usePathname();\n\n  const appLinks = [\n    { name: \"Home\", href: \"/app\", icon: HomeIcon },\n    { name: \"Tasks\", href: \"/app/tasks\", icon: ListBulletIcon },\n    { name: \"Notes\", href: \"/app/notes\", icon: PencilIcon },\n    { name: \"Diary\", href: \"/app/diary\", icon: BookOpenIcon },\n    { name: \"Pomodoro\", href: \"/app/pomodoro\", icon: ClockIcon },\n    { name: \"Dashboard\", href: \"/app/dashboard\", icon: ChartBarIcon },\n  ];\n\n  return (\n    <Disclosure\n      as=\"nav\"\n      className=\"bg-white shadow-sm border-b border-gray-200 sticky top-0 z-40\"\n    >\n      {({ open }) => (\n        <>\n          <div className=\"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8\">\n            <div className=\"flex h-16\">\n              {/* Left Side: Logo */}\n              <div className=\"flex-shrink-0 flex items-center\">\n                <Link href=\"/app\">\n                  <Image\n                    src=\"/logo.png\" // Using logo3.png\n                    alt=\"TaskGlyph Logo\"\n                    width={150}\n                    height={32}\n                    className=\"h-40 w-auto\"\n                  />\n                </Link>\n              </div>\n\n              {/* Center: App Links (Desktop) */}\n              <div className=\"hidden sm:flex flex-1 items-center justify-center space-x-8\">\n                {appLinks.map((item) => {\n                  const isActive = pathname === item.href;\n                  return (\n                    <Link\n                      key={item.name}\n                      href={item.href}\n                      className={classNames(\n                        isActive\n                          ? \"border-blue-500 text-blue-600\"\n                          : \"border-transparent text-gray-500 hover:border-gray-300 hover:text-gray-700\",\n                        \"inline-flex items-center px-1 pt-1 border-b-2 text-sm font-medium\"\n                      )}\n                      aria-current={isActive ? \"page\" : undefined}\n                    >\n                      <item.icon\n                        className={classNames(\n                          isActive ? \"text-blue-500\" : \"text-gray-400\",\n                          \"h-5 w-5 mr-1.5\"\n                        )}\n                      />\n                      {item.name}\n                    </Link>\n                  );\n                })}\n              </div>\n\n              {/* Right Side: Tier & Profile (Desktop) */}\n              <div className=\"hidden sm:ml-6 sm:flex sm:items-center flex-shrink-0\">\n                <span\n                  className={classNames(\n                    \"inline-flex items-center px-3 py-0.5 rounded-full text-sm font-medium mr-4\",\n                    tier === \"free\"\n                      ? \"bg-blue-100 text-blue-800\"\n                      : \"bg-green-100 text-green-800\"\n                  )}\n                >\n                  {tier\n                    ? `${tier.charAt(0).toUpperCase() + tier.slice(1)} Tier`\n                    : \"Loading...\"}\n                </span>\n\n                {/* --- [NEW] Notification Bell (Desktop) --- */}\n                <div className=\"mr-3\">\n                  <NotificationBell />\n                </div>\n\n                <Menu as=\"div\" className=\"relative\">\n                  <div>\n                    <Menu.Button className=\"flex items-center text-sm rounded-full hover:opacity-80 transition focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500\">\n                      <span className=\"sr-only\">Open user menu</span>\n                      {session?.user?.image ? (\n                        <Image\n                          className=\"h-9 w-9 rounded-full\"\n                          src={session.user.image}\n                          alt=\"Profile picture\"\n                          width={36}\n                          height={36}\n                        />\n                      ) : (\n                        <UserCircleIcon className=\"h-9 w-9 text-gray-400\" />\n                      )}\n                      <ChevronDownIcon className=\"h-4 w-4 text-gray-400 ml-1\" />\n                    </Menu.Button>\n                  </div>\n                  <Transition\n                    as={Fragment}\n                    enter=\"transition ease-out duration-200\"\n                    enterFrom=\"transform opacity-0 scale-95\"\n                    enterTo=\"transform opacity-100 scale-100\"\n                    leave=\"transition ease-in duration-75\"\n                    leaveFrom=\"transform opacity-100 scale-100\"\n                    leaveTo=\"transform opacity-0 scale-95\"\n                  >\n                    <Menu.Items className=\"origin-top-right absolute right-0 mt-2 w-56 rounded-md shadow-lg py-1 bg-white ring-1 ring-black ring-opacity-5 focus:outline-none\">\n                      <div className=\"px-4 py-3 border-b border-gray-100\">\n                        <p className=\"text-sm font-medium text-gray-900 truncate\">\n                          {session?.user?.name || \"User\"}\n                        </p>\n                        <p className=\"text-sm text-gray-500 truncate\">\n                          {session?.user?.email}\n                        </p>\n                      </div>\n                      <Menu.Item>\n                        {({ active }) => (\n                          <Link\n                            href=\"/app/settings\"\n                            className={classNames(\n                              active ? \"bg-gray-100\" : \"\",\n                              \"block px-4 py-2 text-sm text-gray-700\"\n                            )}\n                          >\n                            Settings\n                          </Link>\n                        )}\n                      </Menu.Item>\n                      <Menu.Item>\n                        {({ active }) => (\n                          <button\n                            onClick={() => signOut({ callbackUrl: \"/\" })}\n                            className={classNames(\n                              active ? \"bg-gray-100\" : \"\",\n                              \"w-full text-left flex items-center px-4 py-2 text-sm text-gray-700\"\n                            )}\n                          >\n                            <ArrowRightEndOnRectangleIcon className=\"h-5 w-5 mr-2\" />\n                            Sign out\n                          </button>\n                        )}\n                      </Menu.Item>\n                    </Menu.Items>\n                  </Transition>\n                </Menu>\n              </div>\n\n              {/* Mobile Menu Button */}\n              <div className=\"-mr-2 flex items-center sm:hidden\">\n                {/* --- [NEW] Notification Bell (Mobile) --- */}\n                <div className=\"mr-2\">\n                  <NotificationBell />\n                </div>\n\n                <Disclosure.Button className=\"inline-flex items-center justify-center p-2 rounded-md text-gray-400 hover:text-gray-500 hover:bg-gray-100 focus:outline-none focus:ring-2 focus:ring-inset focus:ring-blue-500\">\n                  <span className=\"sr-only\">Open main menu</span>\n                  {open ? (\n                    <XMarkIcon className=\"block h-6 w-6\" aria-hidden=\"true\" />\n                  ) : (\n                    <Bars3Icon className=\"block h-6 w-6\" aria-hidden=\"true\" />\n                  )}\n                </Disclosure.Button>\n              </div>\n            </div>\n          </div>\n\n          {/* Mobile Menu Panel (Slides down) */}\n          <Disclosure.Panel className=\"sm:hidden border-t border-gray-200\">\n            <div className=\"pt-2 pb-3 space-y-1\">\n              {appLinks.map((item) => {\n                const isActive = pathname === item.href;\n                return (\n                  <Disclosure.Button\n                    key={item.name}\n                    as={Link}\n                    href={item.href}\n                    className={classNames(\n                      isActive\n                        ? \"bg-blue-50 border-blue-500 text-blue-700\"\n                        : \"border-transparent text-gray-600 hover:bg-gray-50 hover:border-gray-300 hover:text-gray-800\",\n                      \"flex items-center pl-3 pr-4 py-2 border-l-4 text-base font-medium\"\n                    )}\n                    aria-current={isActive ? \"page\" : undefined}\n                  >\n                    <item.icon\n                      className={classNames(\n                        isActive ? \"text-blue-500\" : \"text-gray-400\",\n                        \"h-6 w-6 mr-3\"\n                      )}\n                    />\n                    {item.name}\n                  </Disclosure.Button>\n                );\n              })}\n            </div>\n            {/* Profile Section in Mobile Menu */}\n            <div className=\"pt-4 pb-3 border-t border-gray-200\">\n              <div className=\"flex items-center px-4\">\n                <div className=\"flex-shrink-0\">\n                  {session?.user?.image ? (\n                    <Image\n                      className=\"h-10 w-10 rounded-full\"\n                      src={session.user.image}\n                      alt=\"Profile picture\"\n                      width={40}\n                      height={40}\n                    />\n                  ) : (\n                    <UserCircleIcon className=\"h-10 w-10 text-gray-400\" />\n                  )}\n                </div>\n                <div className=\"ml-3\">\n                  <div className=\"text-base font-medium text-gray-800\">\n                    {session?.user?.name || \"User\"}\n                  </div>\n\n                  <div className=\"text-sm font-medium text-gray-500\">\n                    {session?.user?.email}\n                  </div>\n                </div>\n              </div>\n              <div className=\"mt-3 space-y-1\">\n                <Disclosure.Button\n                  as={Link}\n                  href=\"/app/settings\"\n                  className=\"block px-4 py-2 text-base font-medium text-gray-500 hover:text-gray-800 hover:bg-gray-100\"\n                >\n                  Settings\n                </Disclosure.Button>\n                <Disclosure.Button\n                  as=\"button\"\n                  onClick={() => signOut({ callbackUrl: \"/\" })}\n                  className=\"w-full text-left flex items-center px-4 py-2 text-base font-medium text-gray-500 hover:text-gray-800 hover:bg-gray-100\"\n                >\n                  <ArrowRightEndOnRectangleIcon className=\"h-6 w-6 mr-2\" />\n                  Sign out\n                </Disclosure.Button>\n              </div>\n            </div>\n          </Disclosure.Panel>\n        </>\n      )}\n    </Disclosure>\n  );\n}\n"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 829, "column": 0}, "map": {"version":3,"sources":["file:///Users/ramanakumar/TaskGlyph/src/lib/context/TaskSidebarContext.tsx"],"sourcesContent":["// src/lib/context/TaskDetailContext.tsx\n\"use client\";\n\nimport { createContext, useContext, useState, ReactNode } from \"react\";\nimport { Task } from \"@/lib/db/clientDb\";\n\ntype TaskDetailContextType = {\n  selectedTask: Task | null;\n  selectTask: (task: Task | null) => void;\n};\n\nconst TaskDetailContext = createContext<TaskDetailContextType | undefined>(\n  undefined\n);\n\nexport function TaskDetailProvider({ children }: { children: ReactNode }) {\n  const [selectedTask, setSelectedTask] = useState<Task | null>(null);\n\n  const selectTask = (task: Task | null) => {\n    setSelectedTask(task);\n  };\n\n  return (\n    <TaskDetailContext.Provider value={{ selectedTask, selectTask }}>\n      {children}\n    </TaskDetailContext.Provider>\n  );\n}\n\nexport function useTaskDetail() {\n  const context = useContext(TaskDetailContext);\n  if (!context) {\n    throw new Error(\"useTaskDetail must be used within a TaskDetailProvider\");\n  }\n  return context;\n}\n"],"names":[],"mappings":"AAAA,wCAAwC;;;;;;;;AAGxC;AAFA;;;AAUA,MAAM,kCAAoB,IAAA,sNAAa,EACrC;AAGK,SAAS,mBAAmB,EAAE,QAAQ,EAA2B;IACtE,MAAM,CAAC,cAAc,gBAAgB,GAAG,IAAA,iNAAQ,EAAc;IAE9D,MAAM,aAAa,CAAC;QAClB,gBAAgB;IAClB;IAEA,qBACE,8OAAC,kBAAkB,QAAQ;QAAC,OAAO;YAAE;YAAc;QAAW;kBAC3D;;;;;;AAGP;AAEO,SAAS;IACd,MAAM,UAAU,IAAA,mNAAU,EAAC;IAC3B,IAAI,CAAC,SAAS;QACZ,MAAM,IAAI,MAAM;IAClB;IACA,OAAO;AACT","debugId":null}},
    {"offset": {"line": 876, "column": 0}, "map": {"version":3,"sources":["file:///Users/ramanakumar/TaskGlyph/src/lib/db/useTasks.ts"],"sourcesContent":["\"use client\";\n\nimport { useCallback, useMemo } from \"react\";\nimport db, {\n  Task,\n  OperationType,\n  EntityType,\n  Priority,\n  RecurringSchedule,\n} from \"./clientDb\";\nimport { v4 as uuidv4 } from \"uuid\";\nimport { useTier } from \"./useTier\";\nimport { triggerSync } from \"../sync/syncService\";\nimport { useLiveQuery } from \"dexie-react-hooks\"; // For real-time updates\n\n// [UPDATED] Added meetLink to the creation options\ntype TaskCreationOptions = {\n  projectId?: string | null;\n  parentId?: string | null;\n  notes?: string | null;\n  dueDate?: number | null;\n  priority?: Priority;\n  tags?: string[];\n  recurringSchedule?: RecurringSchedule;\n  reminderAt?: number | null;\n  meetLink?: string | null; // <-- [NEW] Add meetLink\n};\n\nexport function useTasks() {\n  const allTasks = useLiveQuery(() => db.tasks.toArray(), []);\n\n  // âœ… 2. STABILIZE the 'tasks' array with useMemo\n  // This prevents all child hooks (addTask, etc.) from re-rendering\n  const tasks = useMemo(() => allTasks || [], [allTasks]);\n\n  const tier = useTier();\n  const canSync = !!tier;\n\n  /**\n   * Creates a new task and (if free tier) checks 21-task limit.\n   */\n  const addTask = useCallback(\n    async (title: string, options: TaskCreationOptions = {}) => {\n      // 1. ENFORCE 21-TASK LIMIT\n      if (tier === \"free\") {\n        // Use allTasks.length here to get the most current count\n        const count = allTasks?.length || 0;\n        if (count >= 21) {\n          alert(\n            \"Free Plan Limit Reached\\n\\nYou have reached the 21-task limit for the free plan. Please upgrade for unlimited tasks.\"\n          );\n          return; // Stop execution\n        }\n      }\n\n      // 2. CREATE THE FULL TASK OBJECT\n      const now = Date.now();\n      const newTask: Task = {\n        id: uuidv4(),\n        title: title.trim(),\n        completed: false,\n        createdAt: now,\n        updatedAt: now,\n        projectId: options.projectId || null,\n        parentId: options.parentId || null,\n        notes: options.notes || null,\n        dueDate: options.dueDate || null,\n        priority: options.priority || \"none\",\n        tags: options.tags || [],\n        recurringSchedule: options.recurringSchedule || \"none\",\n        reminderAt: options.reminderAt || null,\n\n        // --- [NEW] Add defaults for reminder fields ---\n        meetLink: options.meetLink || null,\n        reminder_30_sent: false,\n        reminder_20_sent: false,\n        reminder_10_sent: false,\n      };\n\n      // Add to local DB (useLiveQuery will auto-update state)\n      await db.tasks.add(newTask);\n\n      // Add to sync outbox\n      if (canSync) {\n        const syncOp = {\n          id: uuidv4(),\n          entityType: \"task\" as EntityType,\n          operation: \"create\" as OperationType,\n          payload: newTask, // Send the full task object\n          timestamp: now,\n        };\n        await db.syncOutbox.add(syncOp);\n        console.log(\"ðŸ“¤ Added CREATE task to sync outbox\", syncOp);\n        triggerSync(); // Poke the sync service\n      }\n      return newTask;\n    },\n    [canSync, tier, allTasks] // Use allTasks for dependency\n  );\n\n  /**\n   * Deletes a task AND all its subtasks (recursively).\n   */\n  const deleteTask = useCallback(\n    async (taskId: string) => {\n      // CASCADING DELETE\n      const idsToDelete: string[] = [taskId];\n      const findChildren = (parentId: string) => {\n        // âœ… Use 'tasks' (memoized) or 'allTasks' here\n        const children = (allTasks || []).filter(\n          (t: Task) => t.parentId === parentId\n        );\n        for (const child of children) {\n          idsToDelete.push(child.id);\n          findChildren(child.id); // Recurse\n        }\n      };\n      findChildren(taskId); // Find all descendants\n\n      // Delete from local DB (useLiveQuery will auto-update state)\n      await db.tasks.bulkDelete(idsToDelete);\n\n      // Add ALL deletes to sync outbox\n      // --- [FIXED] Corrected typo from 'canSunc' to 'canSync' ---\n      if (canSync) {\n        const now = Date.now();\n        const syncOps = idsToDelete.map((id) => ({\n          id: uuidv4(),\n          entityType: \"task\" as EntityType,\n          operation: \"delete\" as OperationType,\n          payload: { id }, // Only need ID for delete\n          timestamp: now,\n        }));\n        await db.syncOutbox.bulkAdd(syncOps);\n        console.log(\n          `ðŸ“¤ Added ${idsToDelete.length} DELETE tasks to sync outbox`\n        );\n        triggerSync();\n      }\n    },\n    [canSync, allTasks] // Use allTasks for dependency\n  );\n\n  /**\n   * Updates any field(s) on a task.\n   */\n  const updateTask = useCallback(\n    async (id: string, updates: Partial<Omit<Task, \"id\" | \"createdAt\">>) => {\n      const updatedAt = Date.now();\n      const finalUpdates = { ...updates, updatedAt };\n\n      // Update local DB (useLiveQuery will auto-update state)\n      await db.tasks.update(id, finalUpdates);\n\n      // Add to sync outbox\n      if (canSync) {\n        // We MUST send the full task object to the API\n        const existingTask = (allTasks || []).find((t: Task) => t.id === id);\n        if (existingTask) {\n          const updatedTask: Task = { ...existingTask, ...finalUpdates };\n          const syncOp = {\n            id: uuidv4(),\n            entityType: \"task\" as EntityType,\n            operation: \"update\" as OperationType,\n            payload: updatedTask, // Send the *full* updated task\n            timestamp: updatedAt,\n          };\n          await db.syncOutbox.add(syncOp);\n          console.log(\"ðŸ“¤ Added UPDATE task to sync outbox\", syncOp);\n          triggerSync();\n        }\n      }\n    },\n    [canSync, allTasks] // Use allTasks for dependency\n  );\n\n  // Return the live tasks array and the new C-U-D functions\n  return {\n    tasks, // Return the memoized 'tasks' for the UI\n    addTask,\n    updateTask,\n    deleteTask,\n  };\n}\n"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 1046, "column": 0}, "map": {"version":3,"sources":["file:///Users/ramanakumar/TaskGlyph/src/components/StylishButton.tsx"],"sourcesContent":["\"use client\";\n\nexport default function StylishButton({\n  onClick,\n  children,\n  type = \"button\",\n  variant = \"primary\",\n  disabled = false,\n  className = \"\",\n  icon,\n}: {\n  onClick?: () => void;\n  children: React.ReactNode;\n  type?: \"button\" | \"submit\";\n  variant?: \"primary\" | \"secondary\";\n  disabled?: boolean;\n  className?: string;\n  icon?: React.ElementType; // Icon component\n}) {\n  const baseStyle =\n    \"px-4 py-2 text-sm font-medium rounded-md flex items-center justify-center gap-2 transition-all duration-200 ease-in-out focus:outline-none focus:ring-2 focus:ring-offset-2\";\n\n  const primaryStyle =\n    \"bg-gray-900 text-white hover:bg-gray-700 focus:ring-gray-900\";\n\n  const secondaryStyle =\n    \"bg-gray-100 text-gray-700 hover:bg-gray-200 focus:ring-gray-400\";\n\n  const disabledStyle = \"opacity-50 cursor-not-allowed\";\n\n  const IconComponent = icon;\n\n  return (\n    <button\n      type={type}\n      onClick={onClick}\n      disabled={disabled}\n      className={`\n        ${baseStyle}\n        ${variant === \"primary\" ? primaryStyle : secondaryStyle}\n        ${disabled ? disabledStyle : \"\"}\n        ${className}\n      `}\n    >\n      {IconComponent && <IconComponent className=\"w-4 h-4\" />}\n      {children}\n    </button>\n  );\n}\n"],"names":[],"mappings":";;;;;AAAA;;AAEe,SAAS,cAAc,EACpC,OAAO,EACP,QAAQ,EACR,OAAO,QAAQ,EACf,UAAU,SAAS,EACnB,WAAW,KAAK,EAChB,YAAY,EAAE,EACd,IAAI,EASL;IACC,MAAM,YACJ;IAEF,MAAM,eACJ;IAEF,MAAM,iBACJ;IAEF,MAAM,gBAAgB;IAEtB,MAAM,gBAAgB;IAEtB,qBACE,8OAAC;QACC,MAAM;QACN,SAAS;QACT,UAAU;QACV,WAAW,CAAC;QACV,EAAE,UAAU;QACZ,EAAE,YAAY,YAAY,eAAe,eAAe;QACxD,EAAE,WAAW,gBAAgB,GAAG;QAChC,EAAE,UAAU;MACd,CAAC;;YAEA,+BAAiB,8OAAC;gBAAc,WAAU;;;;;;YAC1C;;;;;;;AAGP","debugId":null}},
    {"offset": {"line": 1089, "column": 0}, "map": {"version":3,"sources":["file:///Users/ramanakumar/TaskGlyph/src/components/SubtaskItem.tsx"],"sourcesContent":["\"use client\";\n\nimport { useState } from \"react\";\nimport { useTasks } from \"@/lib/db/useTasks\";\nimport { Task } from \"@/lib/db/clientDb\";\nimport { motion } from \"framer-motion\";\nimport { CheckIcon, TrashIcon } from \"@heroicons/react/24/outline\";\n\nexport default function SubtaskItem({ task }: { task: Task }) {\n  const { updateTask, deleteTask } = useTasks();\n  const [isEditing, setIsEditing] = useState(false);\n  const [title, setTitle] = useState(task.title);\n\n  const handleToggle = () =>\n    updateTask(task.id, { completed: !task.completed, updatedAt: Date.now() });\n\n  const handleTitleBlur = (e: React.FocusEvent<HTMLInputElement>) => {\n    setIsEditing(false);\n    const newTitle = e.target.value.trim();\n    if (newTitle && newTitle !== task.title)\n      updateTask(task.id, { title: newTitle });\n    else setTitle(task.title);\n  };\n\n  const handleTitleKeyDown = (e: React.KeyboardEvent<HTMLInputElement>) => {\n    if (e.key === \"Enter\") e.currentTarget.blur();\n    if (e.key === \"Escape\") {\n      setIsEditing(false);\n      setTitle(task.title);\n      e.currentTarget.blur();\n    }\n  };\n\n  return (\n    <motion.li\n      layout\n      initial={{ opacity: 0 }}\n      animate={{ opacity: 1 }}\n      exit={{ opacity: 0 }}\n      className=\"group flex items-center gap-2 py-2 pl-8 pr-4 transition-colors duration-150 hover:bg-gray-50\"\n    >\n      <button\n        onClick={handleToggle}\n        className={`flex-shrink-0 w-4 h-4 rounded-full border-2 transition-all duration-150 flex items-center justify-center ${\n          task.completed\n            ? \"bg-gray-900 border-gray-900\"\n            : \"border-gray-400 hover:border-gray-700\"\n        }`}\n      >\n        {task.completed && (\n          <motion.div\n            initial={{ scale: 0 }}\n            animate={{ scale: 1 }}\n            transition={{ duration: 0.2 }}\n          >\n            <CheckIcon className=\"w-3 h-3 text-white\" />\n          </motion.div>\n        )}\n      </button>\n      <div className=\"flex-1\">\n        {isEditing ? (\n          <input\n            type=\"text\"\n            value={title}\n            onChange={(e) => setTitle(e.target.value)}\n            onBlur={handleTitleBlur}\n            onKeyDown={handleTitleKeyDown}\n            autoFocus\n            className=\"w-full text-sm font-medium text-gray-800 outline-none ring-1 ring-gray-900 rounded px-1 -mx-1 bg-white\"\n          />\n        ) : (\n          <span\n            onClick={() => setIsEditing(true)}\n            className={`text-sm outline-none cursor-pointer rounded px-1 -mx-1 transition-colors duration-150 ${\n              task.completed\n                ? \"line-through text-gray-500\"\n                : \"text-gray-800 hover:bg-gray-100\"\n            }`}\n          >\n            {task.title}\n          </span>\n        )}\n      </div>\n      <button\n        onClick={() => deleteTask(task.id)}\n        className=\"p-1 text-gray-400 hover:text-red-600 rounded opacity-0 group-hover:opacity-100 transition-opacity\"\n        title=\"Delete subtask\"\n      >\n        <TrashIcon className=\"h-3 w-3\" />\n      </button>\n    </motion.li>\n  );\n}\n"],"names":[],"mappings":";;;;;AAEA;AACA;AAEA;AACA;AAAA;AANA;;;;;;AAQe,SAAS,YAAY,EAAE,IAAI,EAAkB;IAC1D,MAAM,EAAE,UAAU,EAAE,UAAU,EAAE,GAAG,IAAA,wIAAQ;IAC3C,MAAM,CAAC,WAAW,aAAa,GAAG,IAAA,iNAAQ,EAAC;IAC3C,MAAM,CAAC,OAAO,SAAS,GAAG,IAAA,iNAAQ,EAAC,KAAK,KAAK;IAE7C,MAAM,eAAe,IACnB,WAAW,KAAK,EAAE,EAAE;YAAE,WAAW,CAAC,KAAK,SAAS;YAAE,WAAW,KAAK,GAAG;QAAG;IAE1E,MAAM,kBAAkB,CAAC;QACvB,aAAa;QACb,MAAM,WAAW,EAAE,MAAM,CAAC,KAAK,CAAC,IAAI;QACpC,IAAI,YAAY,aAAa,KAAK,KAAK,EACrC,WAAW,KAAK,EAAE,EAAE;YAAE,OAAO;QAAS;aACnC,SAAS,KAAK,KAAK;IAC1B;IAEA,MAAM,qBAAqB,CAAC;QAC1B,IAAI,EAAE,GAAG,KAAK,SAAS,EAAE,aAAa,CAAC,IAAI;QAC3C,IAAI,EAAE,GAAG,KAAK,UAAU;YACtB,aAAa;YACb,SAAS,KAAK,KAAK;YACnB,EAAE,aAAa,CAAC,IAAI;QACtB;IACF;IAEA,qBACE,8OAAC,oMAAM,CAAC,EAAE;QACR,MAAM;QACN,SAAS;YAAE,SAAS;QAAE;QACtB,SAAS;YAAE,SAAS;QAAE;QACtB,MAAM;YAAE,SAAS;QAAE;QACnB,WAAU;;0BAEV,8OAAC;gBACC,SAAS;gBACT,WAAW,CAAC,yGAAyG,EACnH,KAAK,SAAS,GACV,gCACA,yCACJ;0BAED,KAAK,SAAS,kBACb,8OAAC,oMAAM,CAAC,GAAG;oBACT,SAAS;wBAAE,OAAO;oBAAE;oBACpB,SAAS;wBAAE,OAAO;oBAAE;oBACpB,YAAY;wBAAE,UAAU;oBAAI;8BAE5B,cAAA,8OAAC,8NAAS;wBAAC,WAAU;;;;;;;;;;;;;;;;0BAI3B,8OAAC;gBAAI,WAAU;0BACZ,0BACC,8OAAC;oBACC,MAAK;oBACL,OAAO;oBACP,UAAU,CAAC,IAAM,SAAS,EAAE,MAAM,CAAC,KAAK;oBACxC,QAAQ;oBACR,WAAW;oBACX,SAAS;oBACT,WAAU;;;;;yCAGZ,8OAAC;oBACC,SAAS,IAAM,aAAa;oBAC5B,WAAW,CAAC,sFAAsF,EAChG,KAAK,SAAS,GACV,+BACA,mCACJ;8BAED,KAAK,KAAK;;;;;;;;;;;0BAIjB,8OAAC;gBACC,SAAS,IAAM,WAAW,KAAK,EAAE;gBACjC,WAAU;gBACV,OAAM;0BAEN,cAAA,8OAAC,8NAAS;oBAAC,WAAU;;;;;;;;;;;;;;;;;AAI7B","debugId":null}},
    {"offset": {"line": 1227, "column": 0}, "map": {"version":3,"sources":["file:///Users/ramanakumar/TaskGlyph/src/lib/context/TaskDetailsPanel.tsx"],"sourcesContent":["/* eslint-disable @typescript-eslint/no-explicit-any */\n\"use client\";\n\nimport { Fragment, useState, useEffect, FormEvent, useMemo } from \"react\";\nimport { Dialog, Transition, Popover } from \"@headlessui/react\";\nimport {\n  XMarkIcon,\n  FlagIcon,\n  ChatBubbleBottomCenterTextIcon,\n  TagIcon,\n  ViewColumnsIcon as SubtaskIcon,\n  BellIcon,\n  ArrowPathIcon, // For recurring\n  TrashIcon,\n  ChevronLeftIcon,\n  ChevronRightIcon,\n  PlusIcon,\n  XCircleIcon,\n  CheckIcon,\n  ArrowDownOnSquareIcon, // For Save\n  ArrowUturnLeftIcon, // For Reset\n  CalendarIcon, // For Due Date\n} from \"@heroicons/react/24/outline\";\nimport { motion, AnimatePresence } from \"framer-motion\";\nimport { useTaskDetail } from \"@/lib/context/TaskSidebarContext\";\nimport { useTasks } from \"@/lib/db/useTasks\";\nimport { Task, Priority, RecurringSchedule } from \"@/lib/db/clientDb\";\nimport DatePicker from \"react-datepicker\";\nimport \"react-datepicker/dist/react-datepicker.css\";\nimport \"@/components/DatePicker.css\"; // Your custom styles\n\n// Import the new components\nimport StylishButton from \"@/components/StylishButton\"; // Corrected Path\nimport SubtaskItem from \"@/components/SubtaskItem\"; // Corrected Path\nimport { format } from \"date-fns\";\n\n// A type for the task properties we want to edit locally\ntype LocalTaskDetails = Pick<\n  Task,\n  \"title\" | \"priority\" | \"dueDate\" | \"reminderAt\"\n> & {\n  recurring: RecurringSchedule;\n};\n\n// --- Main Panel ---\ntype RecurringOption = RecurringSchedule;\n\nexport default function TaskDetailsPanel() {\n  const { selectedTask: selectedTaskFromContext, selectTask } = useTaskDetail();\n  const { tasks, addTask, updateTask, deleteTask } = useTasks();\n\n  const selectedTask = useMemo(() => {\n    if (!selectedTaskFromContext) return null;\n    return (\n      tasks?.find((t: Task) => t.id === selectedTaskFromContext.id) || null\n    );\n  }, [tasks, selectedTaskFromContext]);\n\n  // --- LOCAL STATE ---\n  const [localTask, setLocalTask] = useState<LocalTaskDetails | null>(null);\n  const [notes, setNotes] = useState(\"\");\n  const [newTag, setNewTag] = useState(\"\");\n  const [newSubtaskTitle, setNewSubtaskTitle] = useState(\"\");\n  const [isExpanded, setIsExpanded] = useState(true);\n  const [isSavingDetails, setIsSavingDetails] = useState(false);\n\n  const subtasks = useMemo(() => {\n    if (!selectedTask) return [];\n    return tasks\n      .filter((t: Task) => t.parentId === selectedTask.id)\n      .sort((a, b) => a.createdAt - b.createdAt);\n  }, [tasks, selectedTask]);\n\n  // EFFECT: Load task data into local state when task changes\n  useEffect(() => {\n    if (selectedTask) {\n      setLocalTask({\n        title: selectedTask.title,\n        priority: selectedTask.priority,\n        dueDate: selectedTask.dueDate,\n        reminderAt: selectedTask.reminderAt,\n        recurring: (selectedTask as any).recurring || \"none\",\n      });\n      setNotes(selectedTask.notes || \"\");\n    } else {\n      setLocalTask(null);\n      setNotes(\"\");\n    }\n  }, [selectedTask]);\n\n  if (!selectedTask || !localTask) return null; // Wait for state to be ready\n\n  // --- LOCAL Handlers (updates state) ---\n  const handleClose = () => selectTask(null);\n\n  const handleTitleChange = (e: React.ChangeEvent<HTMLInputElement>) =>\n    setLocalTask({ ...localTask, title: e.target.value });\n\n  const cyclePriority = () => {\n    const priorities: Priority[] = [\"none\", \"low\", \"medium\", \"high\"];\n    const idx = priorities.indexOf(localTask.priority);\n    const next = priorities[(idx + 1) % priorities.length];\n    setLocalTask({ ...localTask, priority: next });\n  };\n\n  const handleSetDueDate = (date: Date | null) =>\n    setLocalTask({ ...localTask, dueDate: date ? date.getTime() : null });\n\n  const handleSetReminder = (date: Date | null) =>\n    setLocalTask({ ...localTask, reminderAt: date ? date.getTime() : null });\n\n  const handleSetRecurring = (option: RecurringOption) =>\n    setLocalTask({ ...localTask, recurring: option });\n\n  // --- SAVE Handlers (updates DB) ---\n\n  const handleSaveNotes = async () => {\n    if (notes !== (selectedTask.notes || \"\")) {\n      await updateTask(selectedTask.id, { notes });\n    }\n  };\n\n  const handleSaveDetails = async () => {\n    if (!localTask) return;\n    setIsSavingDetails(true);\n    await updateTask(selectedTask.id, {\n      ...localTask,\n      title: localTask.title.trim() || \"Untitled Task\",\n    });\n    setTimeout(() => setIsSavingDetails(false), 1000);\n  };\n\n  const handleResetDetails = () => {\n    setLocalTask({\n      title: selectedTask.title,\n      priority: selectedTask.priority,\n      dueDate: selectedTask.dueDate,\n      reminderAt: selectedTask.reminderAt,\n      recurring: (selectedTask as any).recurring || \"none\",\n    });\n    setNotes(selectedTask.notes || \"\");\n  };\n\n  const handleAddTag = (e: FormEvent) => {\n    e.preventDefault();\n    const tag = newTag.trim();\n    if (tag && !selectedTask.tags.includes(tag))\n      updateTask(selectedTask.id, { tags: [...selectedTask.tags, tag] });\n    setNewTag(\"\");\n  };\n\n  const handleRemoveTag = (tag: string) =>\n    updateTask(selectedTask.id, {\n      tags: selectedTask.tags.filter((t) => t !== tag),\n    });\n\n  const handleAddSubtask = (e: FormEvent) => {\n    e.preventDefault();\n    if (!newSubtaskTitle.trim()) return;\n    addTask(newSubtaskTitle, {\n      parentId: selectedTask.id,\n      projectId: selectedTask.projectId,\n    });\n    setNewSubtaskTitle(\"\");\n  };\n\n  const handleDeleteTask = () => {\n    if (confirm(\"Delete this task and all its subtasks?\")) {\n      deleteTask(selectedTask.id);\n      handleClose();\n    }\n  };\n\n  const reminderDate = localTask.reminderAt\n    ? new Date(localTask.reminderAt)\n    : null;\n\n  const recurringOptions: RecurringOption[] = [\n    \"none\",\n    \"daily\",\n    \"weekly\",\n    \"monthly\",\n  ];\n  const currentRecurring = localTask.recurring || \"none\";\n\n  const detailsChanged =\n    localTask.title !== selectedTask.title ||\n    localTask.priority !== selectedTask.priority ||\n    localTask.dueDate !== selectedTask.dueDate ||\n    localTask.reminderAt !== selectedTask.reminderAt ||\n    localTask.recurring !== ((selectedTask as any).recurring || \"none\");\n\n  const notesChanged = notes !== (selectedTask.notes || \"\");\n\n  // --- Helper for styling Popover buttons ---\n  const PopoverButton = ({\n    icon: Icon,\n    label,\n    value,\n    onClick,\n  }: {\n    icon: React.ElementType;\n    label: string;\n    value?: string | null;\n    onClick?: () => void;\n  }) => (\n    <div className=\"flex items-center justify-between\">\n      <span className=\"text-sm font-medium text-gray-700\">{label}</span>\n      <button\n        onClick={onClick}\n        className=\"flex items-center gap-1.5 text-sm text-gray-600 hover:text-gray-900 p-1.5 rounded-md hover:bg-gray-100 transition-colors\"\n      >\n        <Icon\n          className={`w-4 h-4 ${value ? \"text-gray-700\" : \"text-gray-400\"}`}\n        />\n        <span className={value ? \"text-gray-900\" : \"text-gray-500\"}>\n          {value || `Set ${label}`}\n        </span>\n      </button>\n    </div>\n  );\n\n  return (\n    <Transition.Root show={!!selectedTask} as={Fragment}>\n      <Dialog as=\"div\" className=\"relative z-50\" onClose={handleClose}>\n        {/* Overlay - No blur */}\n        <Transition.Child\n          as={Fragment}\n          enter=\"ease-out duration-300\"\n          enterFrom=\"opacity-0\"\n          enterTo=\"opacity-100\"\n          leave=\"ease-in duration-200\"\n          leaveFrom=\"opacity-100\"\n          leaveTo=\"opacity-0\"\n        >\n          <div className=\"fixed inset-0 bg-black/30\" />\n        </Transition.Child>\n\n        {/* Drawer on Right */}\n        <div className=\"fixed inset-0 overflow-hidden\">\n          <div className=\"absolute inset-0 overflow-hidden\">\n            <div className=\"pointer-events-none fixed inset-y-0 right-0 flex max-w-full justify-end\">\n              <Transition.Child\n                as={Fragment}\n                enter=\"transform transition ease-in-out duration-300 sm:duration-500\"\n                enterFrom=\"translate-x-full\"\n                enterTo=\"translate-x-0\"\n                leave=\"transform transition ease-in-out duration-300 sm:duration-500\"\n                leaveFrom=\"translate-x-0\"\n                leaveTo=\"translate-x-full\"\n              >\n                {/* --- CORRECT ARCHITECTURE --- */}\n                <Dialog.Panel className=\"pointer-events-auto flex flex-col\">\n                  <motion.div\n                    animate={{\n                      width: isExpanded ? \"36rem\" : \"24rem\", // 576px / 384px\n                    }}\n                    transition={{ type: \"spring\", stiffness: 260, damping: 28 }}\n                    // --- Scroll is on the CONTENT, not the panel ---\n                    className=\"flex h-full flex-col bg-white shadow-2xl ring-1 ring-gray-900/5\"\n                  >\n                    {/* Header */}\n                    <div className=\"bg-white p-4 flex items-center justify-between flex-shrink-0\">\n                      <button\n                        onClick={() => setIsExpanded(!isExpanded)}\n                        className=\"p-2 rounded-full text-gray-500 hover:bg-gray-100 transition-colors\"\n                        title={isExpanded ? \"Collapse\" : \"Expand\"}\n                      >\n                        {isExpanded ? (\n                          <ChevronRightIcon className=\"w-5 h-5\" />\n                        ) : (\n                          <ChevronLeftIcon className=\"w-5 h-5\" />\n                        )}\n                      </button>\n                      <button\n                        type=\"button\"\n                        className=\"rounded-md p-2 text-gray-500 hover:text-gray-900 hover:bg-gray-100 transition-colors\"\n                        onClick={handleClose}\n                      >\n                        <XMarkIcon className=\"h-5 w-5\" />\n                      </button>\n                    </div>\n\n                    {/* Content - overflow-y-auto is here */}\n                    <div className=\"flex-1 px-6 pt-2 space-y-5 pb-6 overflow-y-auto\">\n                      {/* Title Section */}\n                      <div className=\"py-2\">\n                        <input\n                          type=\"text\"\n                          name=\"title\"\n                          value={localTask.title}\n                          onChange={handleTitleChange}\n                          className=\"w-full text-3xl font-bold text-gray-900 bg-transparent border-none outline-none focus:ring-0 focus:border-transparent p-0 placeholder-gray-400\"\n                          placeholder=\"Task Title\"\n                        />\n                      </div>\n\n                      <hr className=\"border-gray-100\" />\n\n                      {/* --- PROPERTY GRID --- */}\n                      <div\n                        className={`grid ${\n                          isExpanded ? \"grid-cols-2\" : \"grid-cols-1\"\n                        } gap-x-6 gap-y-3 py-3`}\n                      >\n                        {/* Col 1 */}\n                        <div className=\"space-y-3\">\n                          <PopoverButton\n                            label=\"Priority\"\n                            icon={FlagIcon}\n                            value={localTask.priority}\n                            onClick={cyclePriority}\n                          />\n\n                          {/* --- RECURRING POPOVER --- */}\n                          <div className=\"flex items-center justify-between\">\n                            <span className=\"text-sm font-medium text-gray-700\">\n                              Recurring\n                            </span>\n                            <Popover className=\"relative\">\n                              {({ close }) => (\n                                <>\n                                  <Popover.Button className=\"flex items-center gap-1.5 text-sm text-gray-600 hover:text-gray-900 p-1.5 rounded-md hover:bg-gray-100 transition-colors\">\n                                    <ArrowPathIcon\n                                      className={`w-4 h-4 ${\n                                        currentRecurring !== \"none\"\n                                          ? \"text-gray-700\"\n                                          : \"text-gray-400\"\n                                      }`}\n                                    />\n                                    <span\n                                      className={\n                                        currentRecurring !== \"none\"\n                                          ? \"text-gray-900 capitalize\"\n                                          : \"text-gray-500\"\n                                      }\n                                    >\n                                      {currentRecurring === \"none\"\n                                        ? \"Set Recurring\"\n                                        : currentRecurring}\n                                    </span>\n                                  </Popover.Button>\n                                  {/* --- Removed the broken Popover.Portal --- */}\n                                  <Transition\n                                    as={Fragment}\n                                    enter=\"transition duration-200\"\n                                    enterFrom=\"opacity-0 translate-y-1\"\n                                    enterTo=\"opacity-100 translate-y-0\"\n                                    leave=\"transition duration-150\"\n                                    leaveFrom=\"opacity-100 translate-y-0\"\n                                    leaveTo=\"opacity-0 translate-y-1\"\n                                  >\n                                    <Popover.Panel className=\"absolute z-10 mt-3 w-48 left-0\">\n                                      <div className=\"overflow-hidden rounded-lg shadow-lg ring-1 ring-black/5 bg-white\">\n                                        <div className=\"relative flex flex-col p-1\">\n                                          {recurringOptions.map((option) => (\n                                            <button\n                                              key={option}\n                                              onClick={() => {\n                                                handleSetRecurring(option);\n                                                close();\n                                              }}\n                                              className={`w-full text-left px-3 py-2 rounded text-sm capitalize flex items-center justify-between ${\n                                                currentRecurring === option\n                                                  ? \"bg-gray-900 text-white\"\n                                                  : \"text-gray-900 hover:bg-gray-100 transition-colors\"\n                                              }`}\n                                            >\n                                              {option === \"none\"\n                                                ? \"No Repeat\"\n                                                : option}\n                                              {currentRecurring === option && (\n                                                <CheckIcon className=\"w-4 h-4\" />\n                                              )}\n                                            </button>\n                                          ))}\n                                        </div>\n                                      </div>\n                                    </Popover.Panel>\n                                  </Transition>\n                                </>\n                              )}\n                            </Popover>\n                          </div>\n                        </div>\n                        {/* Col 2 */}\n                        <div className=\"space-y-3\">\n                          {/* --- \"DUE DATE\" --- */}\n                          <div className=\"flex items-center justify-between\">\n                            <span className=\"text-sm font-medium text-gray-700\">\n                              Due Date\n                            </span>\n                            <Popover className=\"relative\">\n                              {({ close }) => (\n                                <>\n                                  <Popover.Button className=\"flex items-center gap-1.5 text-sm text-gray-600 hover:text-gray-900 p-1.5 rounded-md hover:bg-gray-100 transition-colors\">\n                                    <CalendarIcon\n                                      className={`w-4 h-4 ${\n                                        localTask.dueDate\n                                          ? \"text-gray-700\"\n                                          : \"text-gray-400\"\n                                      }`}\n                                    />\n                                    <span\n                                      className={\n                                        localTask.dueDate\n                                          ? \"text-gray-900\"\n                                          : \"text-gray-500\"\n                                      }\n                                    >\n                                      {localTask.dueDate\n                                        ? format(localTask.dueDate, \"MMM d\")\n                                        : \"Set date\"}\n                                    </span>\n                                  </Popover.Button>\n                                  {/* --- Removed the broken Popover.Portal --- */}\n                                  <Transition\n                                    as={Fragment}\n                                    enter=\"transition duration-200\"\n                                    enterFrom=\"opacity-0 translate-y-1\"\n                                    enterTo=\"opacity-100 translate-y-0\"\n                                    leave=\"transition duration-150\"\n                                    leaveFrom=\"opacity-100 translate-y-0\"\n                                    leaveTo=\"opacity-0 translate-y-1\"\n                                  >\n                                    <Popover.Panel className=\"absolute z-10 mt-3 right-0\">\n                                      <div className=\"bg-white p-3 shadow-lg rounded-lg ring-1 ring-black/5\">\n                                        <DatePicker\n                                          selected={\n                                            localTask.dueDate\n                                              ? new Date(localTask.dueDate)\n                                              : null\n                                          }\n                                          onChange={(date) => {\n                                            handleSetDueDate(date);\n                                            close();\n                                          }}\n                                          inline\n                                          portalId=\"root\" // <-- FIX: Add portal\n                                          calendarClassName={\n                                            !isExpanded\n                                              ? \"datepicker-collapsed\"\n                                              : \"\"\n                                          }\n                                        />\n                                      </div>\n                                    </Popover.Panel>\n                                  </Transition>\n                                </>\n                              )}\n                            </Popover>\n                          </div>\n\n                          {/* --- \"REMINDER\" --- */}\n                          <div className=\"flex items-center justify-between\">\n                            <span className=\"text-sm font-medium text-gray-700\">\n                              Reminder\n                            </span>\n                            <Popover className=\"relative\">\n                              <Popover.Button className=\"flex items-center gap-1.5 text-sm text-gray-600 hover:text-gray-900 p-1.5 rounded-md hover:bg-gray-100 transition-colors\">\n                                <BellIcon\n                                  className={`w-4 h-4 ${\n                                    reminderDate\n                                      ? \"text-gray-700\"\n                                      : \"text-gray-400\"\n                                  }`}\n                                />\n                                <span\n                                  className={\n                                    reminderDate\n                                      ? \"text-gray-900\"\n                                      : \"text-gray-500\"\n                                  }\n                                >\n                                  {reminderDate\n                                    ? format(reminderDate, \"MMM d, p\")\n                                    : \"Add Reminder\"}\n                                </span>\n                              </Popover.Button>\n                              {/* --- Removed the broken Popover.Portal --- */}\n                              <Transition\n                                as={Fragment}\n                                enter=\"transition duration-200\"\n                                enterFrom=\"opacity-0 translate-y-1\"\n                                enterTo=\"opacity-100 translate-y-0\"\n                                leave=\"transition duration-150\"\n                                leaveFrom=\"opacity-100 translate-y-0\"\n                                leaveTo=\"opacity-0 translate-y-1\"\n                              >\n                                {/* --- FIX: Alignment fix --- */}\n                                <Popover.Panel className=\"absolute z-10 mt-3 right-0\">\n                                  <div className=\"bg-white p-3 shadow-lg rounded-lg ring-1 ring-black/5\">\n                                    <DatePicker\n                                      selected={reminderDate}\n                                      onChange={handleSetReminder}\n                                      showTimeSelect\n                                      inline\n                                      portalId=\"root\" // <-- FIX: Add portal\n                                      calendarClassName={\n                                        !isExpanded\n                                          ? \"datepicker-collapsed\"\n                                          : \"\"\n                                      }\n                                    />\n                                  </div>\n                                </Popover.Panel>\n                              </Transition>\n                            </Popover>\n                          </div>\n                        </div>\n                      </div>\n\n                      <hr className=\"border-gray-100\" />\n\n                      {/* Notes Section */}\n                      <div className=\"pt-3\">\n                        <label className=\"text-sm font-semibold text-gray-700 flex items-center gap-2.5 mb-2\">\n                          <ChatBubbleBottomCenterTextIcon className=\"w-5 h-5 text-gray-500\" />\n                          Notes\n                        </label>\n                        <textarea\n                          name=\"notes\"\n                          value={notes}\n                          onChange={(e) => setNotes(e.target.value)}\n                          onBlur={handleSaveNotes} // Auto-saves on blur\n                          placeholder=\"Add details, links, or anything else...\"\n                          className=\"w-full text-sm p-3 border border-gray-200 rounded-lg bg-gray-50 text-gray-900 resize-y outline-none focus:ring-2 focus:ring-gray-900 focus:border-gray-900 transition-colors placeholder-gray-500\"\n                          rows={6}\n                        />\n                      </div>\n\n                      <hr className=\"border-gray-100\" />\n\n                      {/* Tags Section */}\n                      <div className=\"pt-3\">\n                        <label className=\"text-sm font-semibold text-gray-700 flex items-center gap-2.5 mb-3\">\n                          <TagIcon className=\"w-5 h-5 text-gray-500\" />\n                          Tags\n                        </label>\n                        <div className=\"flex flex-wrap gap-2 mb-3\">\n                          {selectedTask.tags.map((tag) => (\n                            <span\n                              key={tag}\n                              className=\"flex items-center gap-1.5 bg-gray-100 text-gray-800 text-xs px-3 py-1 rounded-full shadow-sm\"\n                            >\n                              {tag}\n                              <button\n                                onClick={() => handleRemoveTag(tag)}\n                                className=\"hover:text-red-500 transition-colors\"\n                                title=\"Remove tag\"\n                              >\n                                <XCircleIcon className=\"w-4 h-4\" />\n                              </button>\n                            </span>\n                          ))}\n                        </div>\n                        <form\n                          onSubmit={handleAddTag}\n                          className=\"flex items-center gap-2 border border-gray-200 rounded-lg bg-gray-50 focus-within:ring-2 focus-within:ring-gray-900 transition-all\"\n                        >\n                          <input\n                            type=\"text\"\n                            value={newTag}\n                            onChange={(e) => setNewTag(e.target.value)}\n                            placeholder=\"Add a tag...\"\n                            className=\"flex-1 text-sm p-3 bg-transparent border-none outline-none text-gray-900 placeholder-gray-500\"\n                          />\n                          <button\n                            type=\"submit\"\n                            className=\"p-3 text-gray-400 hover:text-gray-900 transition-colors\"\n                            title=\"Add tag\"\n                          >\n                            <PlusIcon className=\"w-5 h-5\" />\n                          </button>\n                        </form>\n                      </div>\n\n                      <hr className=\"border-gray-100\" />\n\n                      {/* Subtasks Section */}\n                      <div className=\"pt-3\">\n                        <label className=\"text-sm font-semibold text-gray-700 flex items-center gap-2.5 mb-3\">\n                          <SubtaskIcon className=\"w-5 h-5 text-gray-500\" />\n                          Subtasks\n                        </label>\n                        <ul className=\"mb-3 -mx-6\">\n                          <AnimatePresence initial={false}>\n                            {subtasks.map((t) => (\n                              <SubtaskItem key={t.id} task={t} />\n                            ))}\n                          </AnimatePresence>\n                        </ul>\n                        <form\n                          onSubmit={handleAddSubtask}\n                          className=\"flex items-center gap-2 border border-gray-200 rounded-lg bg-gray-50 focus-within:ring-2 focus-within:ring-gray-900 transition-all\"\n                        >\n                          <input\n                            type=\"text\"\n                            value={newSubtaskTitle}\n                            onChange={(e) => setNewSubtaskTitle(e.target.value)}\n                            placeholder=\"Add a subtask...\"\n                            className=\"flex-1 text-sm p-3 bg-transparent border-none outline-none text-gray-900 placeholder-gray-500\"\n                          />\n                          <button\n                            type=\"submit\"\n                            className=\"p-3 text-gray-400 hover:text-gray-900 transition-colors\"\n                            title=\"Add subtask\"\n                          >\n                            <PlusIcon className=\"w-5 h-5\" />\n                          </button>\n                        </form>\n                      </div>\n\n                      <hr className=\"border-gray-100\" />\n\n                      {/* Delete Section */}\n                      <div className=\"pt-3\">\n                        <button\n                          onClick={handleDeleteTask}\n                          className=\"flex items-center gap-2 text-red-600 text-sm font-medium hover:text-red-700 transition-colors\"\n                        >\n                          <TrashIcon className=\"w-5 h-5\" />\n                          Delete this task\n                        </button>\n                      </div>\n                    </div>\n\n                    {/* --- STICKY FOOTER (sibling to content) --- */}\n                    <motion.div\n                      animate={{\n                        width: isExpanded ? \"36rem\" : \"24rem\", // 576px / 384px\n                      }}\n                      transition={{\n                        type: \"spring\",\n                        stiffness: 260,\n                        damping: 28,\n                      }}\n                      className=\"w-full p-4 bg-white border-t border-gray-200 flex justify-end gap-3 z-10 flex-shrink-0\"\n                    >\n                      <StylishButton\n                        onClick={handleResetDetails}\n                        variant=\"secondary\"\n                        disabled={!detailsChanged && !notesChanged}\n                        icon={ArrowUturnLeftIcon}\n                      >\n                        Reset\n                      </StylishButton>\n                      <StylishButton\n                        onClick={handleSaveDetails}\n                        variant=\"primary\"\n                        disabled={!detailsChanged || isSavingDetails}\n                        icon={ArrowDownOnSquareIcon}\n                      >\n                        {isSavingDetails ? \"Saving...\" : \"Save Changes\"}\n                      </StylishButton>\n                    </motion.div>\n                  </motion.div>\n                </Dialog.Panel>\n              </Transition.Child>\n            </div>\n          </div>\n        </div>\n      </Dialog>\n    </Transition.Root>\n  );\n}\n"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 2281, "column": 0}, "map": {"version":3,"sources":["file:///Users/ramanakumar/TaskGlyph/src/app/app/layout.tsx"],"sourcesContent":["\"use client\";\n\nimport AppNavbar from \"@/components/AppNavbar\";\nimport TaskDetailsPanel from \"@/lib/context/TaskDetailsPanel\";\nimport { TaskDetailProvider } from \"@/lib/context/TaskSidebarContext\";\nimport { useSession } from \"next-auth/react\";\nimport { useRouter } from \"next/navigation\";\nimport { useEffect } from \"react\";\nimport \"react-datepicker/dist/react-datepicker.css\";\n\n// âœ… Corrected imports (context + panel)\n\nexport default function AppLayout({ children }: { children: React.ReactNode }) {\n  const { data: session, status } = useSession();\n  const router = useRouter();\n\n  // Redirect to signin if session missing\n  useEffect(() => {\n    if (status === \"loading\") return;\n    if (!session) {\n      router.push(\"/auth/signin\");\n    }\n  }, [session, status, router]);\n\n  // Loading state\n  if (status === \"loading\") {\n    return (\n      <div className=\"min-h-screen flex items-center justify-center bg-gray-100\">\n        <p className=\"text-gray-600\">Loading session...</p>\n      </div>\n    );\n  }\n\n  // Authenticated layout\n  if (session) {\n    return (\n      <TaskDetailProvider>\n        <div className=\"min-h-screen bg-gray-100\">\n          <AppNavbar />\n          <main className=\"py-10\">\n            <div className=\"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8\">\n              {children}\n            </div>\n          </main>\n          {/* âœ… Context panel placed here */}\n          <TaskDetailsPanel />\n        </div>\n      </TaskDetailProvider>\n    );\n  }\n\n  return null;\n}\n"],"names":[],"mappings":";;;;;AAEA;AACA;AACA;AACA;AACA;AACA;AAPA;;;;;;;;;AAYe,SAAS,UAAU,EAAE,QAAQ,EAAiC;IAC3E,MAAM,EAAE,MAAM,OAAO,EAAE,MAAM,EAAE,GAAG,IAAA,4JAAU;IAC5C,MAAM,SAAS,IAAA,+IAAS;IAExB,wCAAwC;IACxC,IAAA,kNAAS,EAAC;QACR,IAAI,WAAW,WAAW;QAC1B,IAAI,CAAC,SAAS;YACZ,OAAO,IAAI,CAAC;QACd;IACF,GAAG;QAAC;QAAS;QAAQ;KAAO;IAE5B,gBAAgB;IAChB,IAAI,WAAW,WAAW;QACxB,qBACE,8OAAC;YAAI,WAAU;sBACb,cAAA,8OAAC;gBAAE,WAAU;0BAAgB;;;;;;;;;;;IAGnC;IAEA,uBAAuB;IACvB,IAAI,SAAS;QACX,qBACE,8OAAC,kKAAkB;sBACjB,cAAA,8OAAC;gBAAI,WAAU;;kCACb,8OAAC,0IAAS;;;;;kCACV,8OAAC;wBAAK,WAAU;kCACd,cAAA,8OAAC;4BAAI,WAAU;sCACZ;;;;;;;;;;;kCAIL,8OAAC,qJAAgB;;;;;;;;;;;;;;;;IAIzB;IAEA,OAAO;AACT","debugId":null}}]
}
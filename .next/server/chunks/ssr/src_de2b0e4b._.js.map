{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///Users/ramanakumar/TaskGlyph/src/lib/db/useProjects.ts"],"sourcesContent":["\"use client\";\n\nimport { useCallback, useMemo } from \"react\";\nimport db, { Project, Task, OperationType, EntityType } from \"./clientDb\";\nimport { v4 as uuidv4 } from \"uuid\";\nimport { useTier } from \"./useTier\"; // We might need this later for project limits\nimport { triggerSync } from \"../sync/syncService\";\nimport { useLiveQuery } from \"dexie-react-hooks\";\n\n// Define the type for the optional fields when creating a project\ntype ProjectCreationOptions = {\n  description?: string | null;\n  accentColor?: string | null;\n};\n\n// Define the type for updating a project\ntype ProjectUpdateOptions = Partial<Omit<Project, \"id\" | \"createdAt\">>;\n\nexport function useProjects() {\n  const allProjects = useLiveQuery(() => db.projects.toArray(), []);\n  // Memoize projects array for stability\n  const projects = useMemo(() => allProjects || [], [allProjects]);\n\n  const tier = useTier();\n  const canSync = !!tier;\n\n  /**\n   * Creates a new project.\n   */\n  const addProject = useCallback(\n    async (name: string, options: ProjectCreationOptions = {}) => {\n      // Note: You can add a project limit check for free tier here\n      // if (tier === 'free' && projects.length >= 3) { // Example limit\n      //   alert(\"Free plan project limit reached.\");\n      //   return;\n      // }\n\n      const now = Date.now();\n      const newProject: Project = {\n        id: uuidv4(),\n        name: name.trim(),\n        description: options.description || null,\n        accentColor: options.accentColor || null,\n        createdAt: now,\n        updatedAt: now,\n      };\n\n      // Add to local DB (useLiveQuery will update state)\n      await db.projects.add(newProject);\n\n      // Add to sync outbox\n      if (canSync) {\n        const syncOp = {\n          id: uuidv4(),\n          entityType: \"project\" as EntityType,\n          operation: \"create\" as OperationType,\n          payload: newProject,\n          timestamp: now,\n        };\n        await db.syncOutbox.add(syncOp);\n        console.log(\"ðŸ“¤ Added CREATE project to sync outbox\", syncOp);\n        triggerSync();\n      }\n      return newProject;\n    },\n    [canSync] // âœ… 1. REMOVED 'tier' dependency\n  );\n\n  /**\n   * Deletes a project AND all tasks/subtasks associated with it.\n   */\n  const deleteProject = useCallback(\n    async (projectId: string) => {\n      // âœ… CASCADING DELETE\n      // 1. Find all tasks associated with this project\n      const allTasks = await db.tasks.toArray();\n      const taskIdsToDelete: string[] = [];\n\n      const findTasksRecursive = (pId: string) => {\n        // âœ… 2. ADDED (t: Task) type\n        const children = allTasks.filter((t: Task) => t.projectId === pId);\n        for (const child of children) {\n          taskIdsToDelete.push(child.id);\n          // Also find subtasks of these tasks (if any)\n          findSubtasks(child.id);\n        }\n      };\n\n      const findSubtasks = (parentId: string) => {\n        // âœ… 3. ADDED (t: Task) type\n        const children = allTasks.filter((t: Task) => t.parentId === parentId);\n        for (const child of children) {\n          taskIdsToDelete.push(child.id);\n          findSubtasks(child.id); // Recurse for sub-sub-tasks\n        }\n      };\n\n      // Start the search\n      findTasksRecursive(projectId);\n\n      // 2. Delete project and all its tasks in a single transaction\n      await db.transaction(\n        \"rw\",\n        db.projects,\n        db.tasks,\n        db.syncOutbox,\n        async () => {\n          // Delete the project itself\n          await db.projects.delete(projectId);\n\n          // Delete all found tasks/subtasks\n          if (taskIdsToDelete.length > 0) {\n            await db.tasks.bulkDelete(taskIdsToDelete);\n          }\n\n          // 3. Add all deletes to sync outbox\n          if (canSync) {\n            const now = Date.now();\n            const projectSyncOp = {\n              id: uuidv4(),\n              entityType: \"project\" as EntityType,\n              operation: \"delete\" as OperationType,\n              payload: { id: projectId },\n              timestamp: now,\n            };\n\n            const taskSyncOps = taskIdsToDelete.map((id) => ({\n              id: uuidv4(),\n              entityType: \"task\" as EntityType,\n              operation: \"delete\" as OperationType,\n              payload: { id },\n              timestamp: now,\n            }));\n\n            // Add all operations to the outbox\n            await db.syncOutbox.bulkAdd([projectSyncOp, ...taskSyncOps]);\n\n            console.log(\n              `ðŸ“¤ Added DELETE project and ${taskIdsToDelete.length} tasks to sync outbox`\n            );\n            triggerSync();\n          }\n        }\n      );\n    },\n    [canSync] // allTasks is fetched inside\n  );\n\n  /**\n   * Updates any field(s) on a project.\n   */\n  const updateProject = useCallback(\n    async (id: string, updates: ProjectUpdateOptions) => {\n      const updatedAt = Date.now();\n      const finalUpdates = { ...updates, updatedAt };\n\n      // Update local DB\n      await db.projects.update(id, finalUpdates);\n\n      // Add to sync outbox\n      if (canSync) {\n        // We must send the full object\n        // âœ… 4. Changed 'projects' to 'allProjects' for stability\n        const existingProject = (allProjects || []).find(\n          (p: Project) => p.id === id\n        );\n\n        if (existingProject) {\n          const updatedProject: Project = {\n            ...existingProject,\n            ...finalUpdates,\n          };\n          const syncOp = {\n            id: uuidv4(),\n            entityType: \"project\" as EntityType,\n            operation: \"update\" as OperationType,\n            payload: updatedProject, // Send the full updated project\n            timestamp: updatedAt,\n          };\n          await db.syncOutbox.add(syncOp);\n          console.log(\"ðŸ“¤ Added UPDATE project to sync outbox\", syncOp);\n          triggerSync();\n        }\n      }\n    },\n    [canSync, allProjects] // Depends on the stable allProjects\n  );\n\n  // Return the live-query-powered projects array and the C-U-D functions\n  return {\n    projects, // Return memoized 'projects' for the UI\n    addProject,\n    updateProject,\n    deleteProject,\n  };\n}\n"],"names":[],"mappings":";;;;AAEA;AACA;AACA;AACA,qNAAqC,8CAA8C;AACnF;AACA;AAPA;;;;;;;AAkBO,SAAS;IACd,MAAM,cAAc,IAAA,2LAAY,EAAC,IAAM,uIAAE,CAAC,QAAQ,CAAC,OAAO,IAAI,EAAE;IAChE,uCAAuC;IACvC,MAAM,WAAW,IAAA,gNAAO,EAAC,IAAM,eAAe,EAAE,EAAE;QAAC;KAAY;IAE/D,MAAM,OAAO,IAAA,sIAAO;IACpB,MAAM,UAAU,CAAC,CAAC;IAElB;;GAEC,GACD,MAAM,aAAa,IAAA,oNAAW,EAC5B,OAAO,MAAc,UAAkC,CAAC,CAAC;QACvD,6DAA6D;QAC7D,kEAAkE;QAClE,+CAA+C;QAC/C,YAAY;QACZ,IAAI;QAEJ,MAAM,MAAM,KAAK,GAAG;QACpB,MAAM,aAAsB;YAC1B,IAAI,IAAA,iLAAM;YACV,MAAM,KAAK,IAAI;YACf,aAAa,QAAQ,WAAW,IAAI;YACpC,aAAa,QAAQ,WAAW,IAAI;YACpC,WAAW;YACX,WAAW;QACb;QAEA,mDAAmD;QACnD,MAAM,uIAAE,CAAC,QAAQ,CAAC,GAAG,CAAC;QAEtB,qBAAqB;QACrB,IAAI,SAAS;YACX,MAAM,SAAS;gBACb,IAAI,IAAA,iLAAM;gBACV,YAAY;gBACZ,WAAW;gBACX,SAAS;gBACT,WAAW;YACb;YACA,MAAM,uIAAE,CAAC,UAAU,CAAC,GAAG,CAAC;YACxB,QAAQ,GAAG,CAAC,0CAA0C;YACtD,IAAA,gJAAW;QACb;QACA,OAAO;IACT,GACA;QAAC;KAAQ,CAAC,iCAAiC;;IAG7C;;GAEC,GACD,MAAM,gBAAgB,IAAA,oNAAW,EAC/B,OAAO;QACL,qBAAqB;QACrB,iDAAiD;QACjD,MAAM,WAAW,MAAM,uIAAE,CAAC,KAAK,CAAC,OAAO;QACvC,MAAM,kBAA4B,EAAE;QAEpC,MAAM,qBAAqB,CAAC;YAC1B,4BAA4B;YAC5B,MAAM,WAAW,SAAS,MAAM,CAAC,CAAC,IAAY,EAAE,SAAS,KAAK;YAC9D,KAAK,MAAM,SAAS,SAAU;gBAC5B,gBAAgB,IAAI,CAAC,MAAM,EAAE;gBAC7B,6CAA6C;gBAC7C,aAAa,MAAM,EAAE;YACvB;QACF;QAEA,MAAM,eAAe,CAAC;YACpB,4BAA4B;YAC5B,MAAM,WAAW,SAAS,MAAM,CAAC,CAAC,IAAY,EAAE,QAAQ,KAAK;YAC7D,KAAK,MAAM,SAAS,SAAU;gBAC5B,gBAAgB,IAAI,CAAC,MAAM,EAAE;gBAC7B,aAAa,MAAM,EAAE,GAAG,4BAA4B;YACtD;QACF;QAEA,mBAAmB;QACnB,mBAAmB;QAEnB,8DAA8D;QAC9D,MAAM,uIAAE,CAAC,WAAW,CAClB,MACA,uIAAE,CAAC,QAAQ,EACX,uIAAE,CAAC,KAAK,EACR,uIAAE,CAAC,UAAU,EACb;YACE,4BAA4B;YAC5B,MAAM,uIAAE,CAAC,QAAQ,CAAC,MAAM,CAAC;YAEzB,kCAAkC;YAClC,IAAI,gBAAgB,MAAM,GAAG,GAAG;gBAC9B,MAAM,uIAAE,CAAC,KAAK,CAAC,UAAU,CAAC;YAC5B;YAEA,oCAAoC;YACpC,IAAI,SAAS;gBACX,MAAM,MAAM,KAAK,GAAG;gBACpB,MAAM,gBAAgB;oBACpB,IAAI,IAAA,iLAAM;oBACV,YAAY;oBACZ,WAAW;oBACX,SAAS;wBAAE,IAAI;oBAAU;oBACzB,WAAW;gBACb;gBAEA,MAAM,cAAc,gBAAgB,GAAG,CAAC,CAAC,KAAO,CAAC;wBAC/C,IAAI,IAAA,iLAAM;wBACV,YAAY;wBACZ,WAAW;wBACX,SAAS;4BAAE;wBAAG;wBACd,WAAW;oBACb,CAAC;gBAED,mCAAmC;gBACnC,MAAM,uIAAE,CAAC,UAAU,CAAC,OAAO,CAAC;oBAAC;uBAAkB;iBAAY;gBAE3D,QAAQ,GAAG,CACT,CAAC,4BAA4B,EAAE,gBAAgB,MAAM,CAAC,qBAAqB,CAAC;gBAE9E,IAAA,gJAAW;YACb;QACF;IAEJ,GACA;QAAC;KAAQ,CAAC,6BAA6B;;IAGzC;;GAEC,GACD,MAAM,gBAAgB,IAAA,oNAAW,EAC/B,OAAO,IAAY;QACjB,MAAM,YAAY,KAAK,GAAG;QAC1B,MAAM,eAAe;YAAE,GAAG,OAAO;YAAE;QAAU;QAE7C,kBAAkB;QAClB,MAAM,uIAAE,CAAC,QAAQ,CAAC,MAAM,CAAC,IAAI;QAE7B,qBAAqB;QACrB,IAAI,SAAS;YACX,+BAA+B;YAC/B,yDAAyD;YACzD,MAAM,kBAAkB,CAAC,eAAe,EAAE,EAAE,IAAI,CAC9C,CAAC,IAAe,EAAE,EAAE,KAAK;YAG3B,IAAI,iBAAiB;gBACnB,MAAM,iBAA0B;oBAC9B,GAAG,eAAe;oBAClB,GAAG,YAAY;gBACjB;gBACA,MAAM,SAAS;oBACb,IAAI,IAAA,iLAAM;oBACV,YAAY;oBACZ,WAAW;oBACX,SAAS;oBACT,WAAW;gBACb;gBACA,MAAM,uIAAE,CAAC,UAAU,CAAC,GAAG,CAAC;gBACxB,QAAQ,GAAG,CAAC,0CAA0C;gBACtD,IAAA,gJAAW;YACb;QACF;IACF,GACA;QAAC;QAAS;KAAY,CAAC,oCAAoC;;IAG7D,uEAAuE;IACvE,OAAO;QACL;QACA;QACA;QACA;IACF;AACF","debugId":null}},
    {"offset": {"line": 183, "column": 0}, "map": {"version":3,"sources":["file:///Users/ramanakumar/TaskGlyph/src/components/TaskCard.tsx"],"sourcesContent":["// src/components/TaskCard.tsx\n\"use client\";\n\nimport {\n  useState,\n  FocusEvent,\n  KeyboardEvent,\n  useMemo,\n  MouseEvent,\n} from \"react\";\nimport { motion, AnimatePresence } from \"framer-motion\";\nimport { useTasks } from \"@/lib/db/useTasks\";\nimport { Task, Priority } from \"@/lib/db/clientDb\";\nimport {\n  TrashIcon,\n  CheckIcon,\n  PencilIcon,\n  FlagIcon,\n  CalendarIcon,\n  TagIcon,\n  ChatBubbleBottomCenterTextIcon,\n  XCircleIcon,\n} from \"@heroicons/react/24/outline\";\nimport { useTaskDetail } from \"@/lib/context/TaskSidebarContext\";\nimport { format, isToday, isTomorrow } from \"date-fns\";\n\n// --- [INTERNAL] Subtask Component ---\nfunction SubtaskItem({ task }: { task: Task }) {\n  const { updateTask, deleteTask } = useTasks();\n  const { selectTask } = useTaskDetail();\n  const [isEditing, setIsEditing] = useState(false);\n  const [title, setTitle] = useState(task.title);\n\n  const handleToggle = (e: MouseEvent<HTMLButtonElement>) => {\n    e.stopPropagation();\n    updateTask(task.id, { completed: !task.completed, updatedAt: Date.now() });\n  };\n  const handleTitleBlur = (e: FocusEvent<HTMLInputElement>) => {\n    e.stopPropagation();\n    setIsEditing(false);\n    const newTitle = e.target.value.trim();\n    if (newTitle && newTitle !== task.title)\n      updateTask(task.id, { title: newTitle });\n    else setTitle(task.title);\n  };\n  const handleTitleKeyDown = (e: KeyboardEvent<HTMLInputElement>) => {\n    e.stopPropagation();\n    if (e.key === \"Enter\") e.currentTarget.blur();\n    if (e.key === \"Escape\") {\n      setIsEditing(false);\n      setTitle(task.title);\n      e.currentTarget.blur();\n    }\n  };\n  const openSubtaskDetails = (e: MouseEvent<HTMLSpanElement>) => {\n    e.stopPropagation();\n    selectTask(task);\n  };\n  const handleDelete = (e: MouseEvent<HTMLButtonElement>) => {\n    e.stopPropagation();\n    deleteTask(task.id);\n  };\n\n  return (\n    // âœ… 6. Add stopPropagation to the subtask item\n    <motion.li\n      layout\n      initial={{ opacity: 0 }}\n      animate={{ opacity: 1 }}\n      exit={{ opacity: 0 }}\n      className=\"group flex items-center gap-2 pl-8 pr-4 py-1\"\n      onClick={(e) => e.stopPropagation()} // Stop click from bubbling to parent\n    >\n      <button\n        onClick={handleToggle}\n        className={`flex-shrink-0 w-4 h-4 rounded-full border-2 transition-all duration-150 flex items-center justify-center ${\n          task.completed\n            ? \"bg-blue-600 border-blue-600\"\n            : \"border-gray-400 hover:border-blue-500\"\n        }`}\n      >\n        {task.completed && (\n          <motion.div\n            initial={{ scale: 0 }}\n            animate={{ scale: 1 }}\n            transition={{ duration: 0.2 }}\n          >\n            <CheckIcon className=\"w-3 h-3 text-white\" />\n          </motion.div>\n        )}\n      </button>\n      <div className=\"flex-1\">\n        {isEditing ? (\n          <input\n            type=\"text\"\n            value={title}\n            onChange={(e) => setTitle(e.target.value)}\n            onBlur={handleTitleBlur}\n            onKeyDown={handleTitleKeyDown}\n            onClick={(e) => e.stopPropagation()} // Stop click\n            autoFocus\n            className=\"w-full text-xs font-medium text-gray-800 outline-none ring-1 ring-blue-500 rounded px-1 -mx-1 bg-white\"\n          />\n        ) : (\n          <span\n            onClick={openSubtaskDetails}\n            className={`text-xs text-gray-700 outline-none cursor-pointer rounded px-1 -mx-1 ${\n              task.completed\n                ? \"line-through text-gray-500\"\n                : \"hover:bg-gray-100/50\"\n            }`}\n          >\n            {task.title}\n          </span>\n        )}\n      </div>\n      <button\n        onClick={handleDelete}\n        className=\"p-1 text-gray-400 hover:text-red-600 rounded opacity-0 group-hover:opacity-100 transition-opacity\"\n        title=\"Delete subtask\"\n      >\n        <TrashIcon className=\"h-3 w-3\" />\n      </button>\n    </motion.li>\n  );\n}\n// --- [END] Subtask Component ---\n\n// --- [MAIN] TaskCard Component ---\nexport default function TaskCard({ task }: { task: Task }) {\n  const { tasks, updateTask, deleteTask } = useTasks();\n  const { selectTask } = useTaskDetail();\n\n  const [isEditing, setIsEditing] = useState(false);\n  const [title, setTitle] = useState(task.title);\n\n  const subtasks = useMemo(\n    () =>\n      tasks\n        .filter((t: Task) => t.parentId === task.id)\n        .sort((a, b) => a.createdAt - b.createdAt),\n    [tasks, task.id]\n  );\n\n  // --- Handlers ---\n  const handleTitleBlur = (e: FocusEvent<HTMLInputElement>) => {\n    e.stopPropagation();\n    setIsEditing(false);\n    const newTitle = e.target.value.trim();\n    if (newTitle && newTitle !== task.title)\n      updateTask(task.id, { title: newTitle });\n    else setTitle(task.title);\n  };\n  const handleTitleKeyDown = (e: KeyboardEvent<HTMLInputElement>) => {\n    e.stopPropagation();\n    if (e.key === \"Enter\") e.currentTarget.blur();\n    if (e.key === \"Escape\") {\n      setIsEditing(false);\n      setTitle(task.title);\n      e.currentTarget.blur();\n    }\n  };\n  const handleToggle = (e: MouseEvent<HTMLButtonElement>) => {\n    e.stopPropagation();\n    updateTask(task.id, { completed: !task.completed, updatedAt: Date.now() });\n  };\n  const cyclePriority = (e: MouseEvent<HTMLButtonElement>) => {\n    e.stopPropagation();\n    const priorities: Priority[] = [\"none\", \"low\", \"medium\", \"high\"];\n    const currentIdx = priorities.indexOf(task.priority);\n    const nextPriority = priorities[(currentIdx + 1) % priorities.length];\n    updateTask(task.id, { priority: nextPriority });\n  };\n  const handleRemoveTag = (\n    e: MouseEvent<HTMLButtonElement>,\n    tagToRemove: string\n  ) => {\n    e.stopPropagation();\n    updateTask(task.id, { tags: task.tags.filter((t) => t !== tagToRemove) });\n  };\n\n  const openDetailsPanel = () => {\n    if (!isEditing) {\n      selectTask(task);\n    }\n  };\n\n  const handleEditClick = (e: MouseEvent<HTMLButtonElement>) => {\n    e.stopPropagation();\n    setIsEditing(true);\n  };\n\n  const handleDeleteClick = (e: MouseEvent<HTMLButtonElement>) => {\n    e.stopPropagation();\n    if (confirm(\"Are you sure you want to delete this task?\")) {\n      deleteTask(task.id);\n    }\n  };\n\n  // --- UI Helpers ---\n  const getPriorityClasses = () => {\n    switch (task.priority) {\n      case \"high\":\n        return \"text-red-500\";\n      case \"medium\":\n        return \"text-yellow-500\";\n      case \"low\":\n        return \"text-blue-500\";\n      default:\n        return \"text-gray-400\";\n    }\n  };\n  const renderSmartDueDate = () => {\n    if (!task.dueDate) return null;\n    const date = new Date(task.dueDate);\n    let label = \"\";\n    let color = \"text-gray-500\";\n    const today = new Date().setHours(0, 0, 0, 0);\n    const taskDate = new Date(task.dueDate).setHours(0, 0, 0, 0);\n    if (taskDate < today) {\n      label = format(date, \"MMM d\");\n      color = \"text-red-600 font-medium\";\n    } else if (isToday(date)) {\n      label = \"Today\";\n      color = \"text-green-600 font-medium\";\n    } else if (isTomorrow(date)) {\n      label = \"Tomorrow\";\n      color = \"text-blue-600\";\n    } else {\n      label = format(date, \"MMM d\");\n    }\n    return (\n      <div className={`flex items-center gap-1 ${color}`}>\n        <CalendarIcon className=\"w-4 h-4\" />\n        <span>{label}</span>\n      </div>\n    );\n  };\n\n  return (\n    // âœ… 6. Main click handler is on the LI\n    <motion.li\n      layout\n      onClick={openDetailsPanel} // Click anywhere on the li\n      initial={{ opacity: 0, y: 10 }}\n      animate={{ opacity: 1, y: 0 }}\n      exit={{ opacity: 0, x: -50, transition: { duration: 0.2 } }}\n      transition={{ type: \"spring\", stiffness: 300, damping: 25 }}\n      className={`group relative bg-white/60 backdrop-blur-lg rounded-lg shadow-md border border-white/30 transition-all duration-300 cursor-pointer ${\n        task.completed\n          ? \"opacity-60\"\n          : \"opacity-100 hover:shadow-lg hover:-translate-y-0.5\"\n      }`}\n    >\n      {/* All content is now in a single div, no z-index needed */}\n      <div className=\"flex items-start gap-3 p-4\">\n        {/* Checkbox */}\n        <button\n          onClick={handleToggle} // Has stopPropagation\n          className={`flex-shrink-0 w-5 h-5 mt-0.5 rounded-full border-2 transition-all duration-150 flex items-center justify-center ${\n            task.completed\n              ? \"bg-blue-600 border-blue-600\"\n              : \"border-gray-400 hover:border-blue-500\"\n          }`}\n          aria-label={\n            task.completed ? \"Mark as incomplete\" : \"Mark as complete\"\n          }\n        >\n          <AnimatePresence>\n            {task.completed && (\n              <motion.div\n                initial={{ scale: 0 }}\n                animate={{ scale: 1 }}\n                exit={{ scale: 0 }}\n                transition={{ duration: 0.2 }}\n              >\n                <CheckIcon className=\"w-4 h-4 text-white\" />\n              </motion.div>\n            )}\n          </AnimatePresence>\n        </button>\n\n        {/* Title & Meta */}\n        <div className=\"flex-1 overflow-hidden\">\n          {isEditing ? (\n            <input\n              type=\"text\"\n              value={title}\n              onChange={(e) => setTitle(e.target.value)}\n              onBlur={handleTitleBlur} // Has stopPropagation\n              onKeyDown={handleTitleKeyDown} // Has stopPropagation\n              onClick={(e) => e.stopPropagation()} // Has stopPropagation\n              autoFocus\n              className=\"w-full text-sm font-medium text-gray-900 outline-none ring-2 ring-blue-500 rounded px-1 -mx-1 bg-white\"\n            />\n          ) : (\n            // The span no longer needs an onClick, the li handles it\n            <span\n              className={`text-sm font-medium text-gray-900 outline-none rounded px-1 -mx-1 ${\n                task.completed ? \"line-through text-gray-500\" : \"\"\n              }`}\n            >\n              {task.title}\n            </span>\n          )}\n\n          <div className=\"flex items-center flex-wrap gap-x-3 gap-y-1 mt-2 text-xs\">\n            {renderSmartDueDate()}\n            {task.tags.map((tag) => (\n              <span\n                key={tag}\n                onClick={(e) => e.stopPropagation()} // Has stopPropagation\n                className=\"flex items-center gap-1 bg-gray-200 text-gray-700 px-1.5 py-0.5 rounded-full\"\n              >\n                <TagIcon className=\"w-3 h-3\" />\n                <span>{tag}</span>\n                <button\n                  onClick={(e) => handleRemoveTag(e, tag)} // Has stopPropagation\n                  className=\"text-gray-500 hover:text-red-600\"\n                >\n                  <XCircleIcon className=\"w-3 h-3\" />\n                </button>\n              </span>\n            ))}\n            {task.notes && (\n              <button\n                onClick={(e) => {\n                  // Has stopPropagation\n                  e.stopPropagation();\n                  openDetailsPanel();\n                }}\n                className=\"flex items-center gap-1 text-gray-500 hover:text-blue-600\"\n                title=\"Show notes\"\n              >\n                <ChatBubbleBottomCenterTextIcon className=\"w-4 h-4 text-blue-600\" />\n              </button>\n            )}\n          </div>\n        </div>\n\n        {/* Priority & Context Menu */}\n        <div className=\"flex-shrink-0 flex items-center gap-1\">\n          <button\n            onClick={cyclePriority} // Has stopPropagation\n            className={`w-5 h-5 rounded-full transition-colors ${getPriorityClasses()}`}\n            title={`Priority: ${task.priority}`}\n          >\n            {task.priority === \"high\" && !task.completed && (\n              <span className=\"absolute w-5 h-5 bg-red-500 rounded-full opacity-75 animate-ping\"></span>\n            )}\n            <FlagIcon className=\"relative\" />\n          </button>\n\n          <div className=\"flex items-center opacity-0 group-hover:opacity-100 transition-opacity\">\n            <button\n              onClick={handleEditClick} // Has stopPropagation\n              title=\"Edit title\"\n              className=\"p-1 text-gray-400 hover:text-gray-700 rounded\"\n            >\n              <PencilIcon className=\"h-4 w-4\" />\n            </button>\n            <button\n              onClick={handleDeleteClick} // Has stopPropagation\n              title=\"Delete task\"\n              className=\"p-1 text-gray-400 hover:text-red-600 rounded\"\n            >\n              <TrashIcon className=\"h-4 w-4\" />\n            </button>\n          </div>\n        </div>\n      </div>\n\n      {/* Subtask Section */}\n      <AnimatePresence>\n        {subtasks.length > 0 && (\n          <motion.div\n            initial={{ opacity: 0 }}\n            animate={{ opacity: 1 }}\n            exit={{ opacity: 0 }}\n            className=\"pt-2 pb-1 border-t border-gray-200/50\"\n          >\n            <ul className=\"space-y-1\">\n              <AnimatePresence>\n                {subtasks.map((subtask) => (\n                  // The SubtaskItem itself handles its own stopPropagation\n                  <SubtaskItem key={subtask.id} task={subtask} />\n                ))}\n              </AnimatePresence>\n            </ul>\n          </motion.div>\n        )}\n      </AnimatePresence>\n    </motion.li>\n  );\n}\n"],"names":[],"mappings":"AAAA,8BAA8B;;;;;;AAG9B;AAOA;AAAA;AACA;AAEA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAUA;AACA;AAAA;AAAA;AAvBA;;;;;;;;AAyBA,uCAAuC;AACvC,SAAS,YAAY,EAAE,IAAI,EAAkB;IAC3C,MAAM,EAAE,UAAU,EAAE,UAAU,EAAE,GAAG,IAAA,wIAAQ;IAC3C,MAAM,EAAE,UAAU,EAAE,GAAG,IAAA,6JAAa;IACpC,MAAM,CAAC,WAAW,aAAa,GAAG,IAAA,iNAAQ,EAAC;IAC3C,MAAM,CAAC,OAAO,SAAS,GAAG,IAAA,iNAAQ,EAAC,KAAK,KAAK;IAE7C,MAAM,eAAe,CAAC;QACpB,EAAE,eAAe;QACjB,WAAW,KAAK,EAAE,EAAE;YAAE,WAAW,CAAC,KAAK,SAAS;YAAE,WAAW,KAAK,GAAG;QAAG;IAC1E;IACA,MAAM,kBAAkB,CAAC;QACvB,EAAE,eAAe;QACjB,aAAa;QACb,MAAM,WAAW,EAAE,MAAM,CAAC,KAAK,CAAC,IAAI;QACpC,IAAI,YAAY,aAAa,KAAK,KAAK,EACrC,WAAW,KAAK,EAAE,EAAE;YAAE,OAAO;QAAS;aACnC,SAAS,KAAK,KAAK;IAC1B;IACA,MAAM,qBAAqB,CAAC;QAC1B,EAAE,eAAe;QACjB,IAAI,EAAE,GAAG,KAAK,SAAS,EAAE,aAAa,CAAC,IAAI;QAC3C,IAAI,EAAE,GAAG,KAAK,UAAU;YACtB,aAAa;YACb,SAAS,KAAK,KAAK;YACnB,EAAE,aAAa,CAAC,IAAI;QACtB;IACF;IACA,MAAM,qBAAqB,CAAC;QAC1B,EAAE,eAAe;QACjB,WAAW;IACb;IACA,MAAM,eAAe,CAAC;QACpB,EAAE,eAAe;QACjB,WAAW,KAAK,EAAE;IACpB;IAEA,OACE,+CAA+C;kBAC/C,8OAAC,oMAAM,CAAC,EAAE;QACR,MAAM;QACN,SAAS;YAAE,SAAS;QAAE;QACtB,SAAS;YAAE,SAAS;QAAE;QACtB,MAAM;YAAE,SAAS;QAAE;QACnB,WAAU;QACV,SAAS,CAAC,IAAM,EAAE,eAAe;;0BAEjC,8OAAC;gBACC,SAAS;gBACT,WAAW,CAAC,yGAAyG,EACnH,KAAK,SAAS,GACV,gCACA,yCACJ;0BAED,KAAK,SAAS,kBACb,8OAAC,oMAAM,CAAC,GAAG;oBACT,SAAS;wBAAE,OAAO;oBAAE;oBACpB,SAAS;wBAAE,OAAO;oBAAE;oBACpB,YAAY;wBAAE,UAAU;oBAAI;8BAE5B,cAAA,8OAAC,8NAAS;wBAAC,WAAU;;;;;;;;;;;;;;;;0BAI3B,8OAAC;gBAAI,WAAU;0BACZ,0BACC,8OAAC;oBACC,MAAK;oBACL,OAAO;oBACP,UAAU,CAAC,IAAM,SAAS,EAAE,MAAM,CAAC,KAAK;oBACxC,QAAQ;oBACR,WAAW;oBACX,SAAS,CAAC,IAAM,EAAE,eAAe;oBACjC,SAAS;oBACT,WAAU;;;;;yCAGZ,8OAAC;oBACC,SAAS;oBACT,WAAW,CAAC,qEAAqE,EAC/E,KAAK,SAAS,GACV,+BACA,wBACJ;8BAED,KAAK,KAAK;;;;;;;;;;;0BAIjB,8OAAC;gBACC,SAAS;gBACT,WAAU;gBACV,OAAM;0BAEN,cAAA,8OAAC,8NAAS;oBAAC,WAAU;;;;;;;;;;;;;;;;;AAI7B;AAIe,SAAS,SAAS,EAAE,IAAI,EAAkB;IACvD,MAAM,EAAE,KAAK,EAAE,UAAU,EAAE,UAAU,EAAE,GAAG,IAAA,wIAAQ;IAClD,MAAM,EAAE,UAAU,EAAE,GAAG,IAAA,6JAAa;IAEpC,MAAM,CAAC,WAAW,aAAa,GAAG,IAAA,iNAAQ,EAAC;IAC3C,MAAM,CAAC,OAAO,SAAS,GAAG,IAAA,iNAAQ,EAAC,KAAK,KAAK;IAE7C,MAAM,WAAW,IAAA,gNAAO,EACtB,IACE,MACG,MAAM,CAAC,CAAC,IAAY,EAAE,QAAQ,KAAK,KAAK,EAAE,EAC1C,IAAI,CAAC,CAAC,GAAG,IAAM,EAAE,SAAS,GAAG,EAAE,SAAS,GAC7C;QAAC;QAAO,KAAK,EAAE;KAAC;IAGlB,mBAAmB;IACnB,MAAM,kBAAkB,CAAC;QACvB,EAAE,eAAe;QACjB,aAAa;QACb,MAAM,WAAW,EAAE,MAAM,CAAC,KAAK,CAAC,IAAI;QACpC,IAAI,YAAY,aAAa,KAAK,KAAK,EACrC,WAAW,KAAK,EAAE,EAAE;YAAE,OAAO;QAAS;aACnC,SAAS,KAAK,KAAK;IAC1B;IACA,MAAM,qBAAqB,CAAC;QAC1B,EAAE,eAAe;QACjB,IAAI,EAAE,GAAG,KAAK,SAAS,EAAE,aAAa,CAAC,IAAI;QAC3C,IAAI,EAAE,GAAG,KAAK,UAAU;YACtB,aAAa;YACb,SAAS,KAAK,KAAK;YACnB,EAAE,aAAa,CAAC,IAAI;QACtB;IACF;IACA,MAAM,eAAe,CAAC;QACpB,EAAE,eAAe;QACjB,WAAW,KAAK,EAAE,EAAE;YAAE,WAAW,CAAC,KAAK,SAAS;YAAE,WAAW,KAAK,GAAG;QAAG;IAC1E;IACA,MAAM,gBAAgB,CAAC;QACrB,EAAE,eAAe;QACjB,MAAM,aAAyB;YAAC;YAAQ;YAAO;YAAU;SAAO;QAChE,MAAM,aAAa,WAAW,OAAO,CAAC,KAAK,QAAQ;QACnD,MAAM,eAAe,UAAU,CAAC,CAAC,aAAa,CAAC,IAAI,WAAW,MAAM,CAAC;QACrE,WAAW,KAAK,EAAE,EAAE;YAAE,UAAU;QAAa;IAC/C;IACA,MAAM,kBAAkB,CACtB,GACA;QAEA,EAAE,eAAe;QACjB,WAAW,KAAK,EAAE,EAAE;YAAE,MAAM,KAAK,IAAI,CAAC,MAAM,CAAC,CAAC,IAAM,MAAM;QAAa;IACzE;IAEA,MAAM,mBAAmB;QACvB,IAAI,CAAC,WAAW;YACd,WAAW;QACb;IACF;IAEA,MAAM,kBAAkB,CAAC;QACvB,EAAE,eAAe;QACjB,aAAa;IACf;IAEA,MAAM,oBAAoB,CAAC;QACzB,EAAE,eAAe;QACjB,IAAI,QAAQ,+CAA+C;YACzD,WAAW,KAAK,EAAE;QACpB;IACF;IAEA,qBAAqB;IACrB,MAAM,qBAAqB;QACzB,OAAQ,KAAK,QAAQ;YACnB,KAAK;gBACH,OAAO;YACT,KAAK;gBACH,OAAO;YACT,KAAK;gBACH,OAAO;YACT;gBACE,OAAO;QACX;IACF;IACA,MAAM,qBAAqB;QACzB,IAAI,CAAC,KAAK,OAAO,EAAE,OAAO;QAC1B,MAAM,OAAO,IAAI,KAAK,KAAK,OAAO;QAClC,IAAI,QAAQ;QACZ,IAAI,QAAQ;QACZ,MAAM,QAAQ,IAAI,OAAO,QAAQ,CAAC,GAAG,GAAG,GAAG;QAC3C,MAAM,WAAW,IAAI,KAAK,KAAK,OAAO,EAAE,QAAQ,CAAC,GAAG,GAAG,GAAG;QAC1D,IAAI,WAAW,OAAO;YACpB,QAAQ,IAAA,+JAAM,EAAC,MAAM;YACrB,QAAQ;QACV,OAAO,IAAI,IAAA,iJAAO,EAAC,OAAO;YACxB,QAAQ;YACR,QAAQ;QACV,OAAO,IAAI,IAAA,uJAAU,EAAC,OAAO;YAC3B,QAAQ;YACR,QAAQ;QACV,OAAO;YACL,QAAQ,IAAA,+JAAM,EAAC,MAAM;QACvB;QACA,qBACE,8OAAC;YAAI,WAAW,CAAC,wBAAwB,EAAE,OAAO;;8BAChD,8OAAC,uOAAY;oBAAC,WAAU;;;;;;8BACxB,8OAAC;8BAAM;;;;;;;;;;;;IAGb;IAEA,OACE,uCAAuC;kBACvC,8OAAC,oMAAM,CAAC,EAAE;QACR,MAAM;QACN,SAAS;QACT,SAAS;YAAE,SAAS;YAAG,GAAG;QAAG;QAC7B,SAAS;YAAE,SAAS;YAAG,GAAG;QAAE;QAC5B,MAAM;YAAE,SAAS;YAAG,GAAG,CAAC;YAAI,YAAY;gBAAE,UAAU;YAAI;QAAE;QAC1D,YAAY;YAAE,MAAM;YAAU,WAAW;YAAK,SAAS;QAAG;QAC1D,WAAW,CAAC,mIAAmI,EAC7I,KAAK,SAAS,GACV,eACA,sDACJ;;0BAGF,8OAAC;gBAAI,WAAU;;kCAEb,8OAAC;wBACC,SAAS;wBACT,WAAW,CAAC,gHAAgH,EAC1H,KAAK,SAAS,GACV,gCACA,yCACJ;wBACF,cACE,KAAK,SAAS,GAAG,uBAAuB;kCAG1C,cAAA,8OAAC,4MAAe;sCACb,KAAK,SAAS,kBACb,8OAAC,oMAAM,CAAC,GAAG;gCACT,SAAS;oCAAE,OAAO;gCAAE;gCACpB,SAAS;oCAAE,OAAO;gCAAE;gCACpB,MAAM;oCAAE,OAAO;gCAAE;gCACjB,YAAY;oCAAE,UAAU;gCAAI;0CAE5B,cAAA,8OAAC,8NAAS;oCAAC,WAAU;;;;;;;;;;;;;;;;;;;;;kCAO7B,8OAAC;wBAAI,WAAU;;4BACZ,0BACC,8OAAC;gCACC,MAAK;gCACL,OAAO;gCACP,UAAU,CAAC,IAAM,SAAS,EAAE,MAAM,CAAC,KAAK;gCACxC,QAAQ;gCACR,WAAW;gCACX,SAAS,CAAC,IAAM,EAAE,eAAe;gCACjC,SAAS;gCACT,WAAU;;;;;uCAGZ,yDAAyD;0CACzD,8OAAC;gCACC,WAAW,CAAC,kEAAkE,EAC5E,KAAK,SAAS,GAAG,+BAA+B,IAChD;0CAED,KAAK,KAAK;;;;;;0CAIf,8OAAC;gCAAI,WAAU;;oCACZ;oCACA,KAAK,IAAI,CAAC,GAAG,CAAC,CAAC,oBACd,8OAAC;4CAEC,SAAS,CAAC,IAAM,EAAE,eAAe;4CACjC,WAAU;;8DAEV,8OAAC,wNAAO;oDAAC,WAAU;;;;;;8DACnB,8OAAC;8DAAM;;;;;;8DACP,8OAAC;oDACC,SAAS,CAAC,IAAM,gBAAgB,GAAG;oDACnC,WAAU;8DAEV,cAAA,8OAAC,oOAAW;wDAAC,WAAU;;;;;;;;;;;;2CAVpB;;;;;oCAcR,KAAK,KAAK,kBACT,8OAAC;wCACC,SAAS,CAAC;4CACR,sBAAsB;4CACtB,EAAE,eAAe;4CACjB;wCACF;wCACA,WAAU;wCACV,OAAM;kDAEN,cAAA,8OAAC,6RAA8B;4CAAC,WAAU;;;;;;;;;;;;;;;;;;;;;;;kCAOlD,8OAAC;wBAAI,WAAU;;0CACb,8OAAC;gCACC,SAAS;gCACT,WAAW,CAAC,uCAAuC,EAAE,sBAAsB;gCAC3E,OAAO,CAAC,UAAU,EAAE,KAAK,QAAQ,EAAE;;oCAElC,KAAK,QAAQ,KAAK,UAAU,CAAC,KAAK,SAAS,kBAC1C,8OAAC;wCAAK,WAAU;;;;;;kDAElB,8OAAC,2NAAQ;wCAAC,WAAU;;;;;;;;;;;;0CAGtB,8OAAC;gCAAI,WAAU;;kDACb,8OAAC;wCACC,SAAS;wCACT,OAAM;wCACN,WAAU;kDAEV,cAAA,8OAAC,iOAAU;4CAAC,WAAU;;;;;;;;;;;kDAExB,8OAAC;wCACC,SAAS;wCACT,OAAM;wCACN,WAAU;kDAEV,cAAA,8OAAC,8NAAS;4CAAC,WAAU;;;;;;;;;;;;;;;;;;;;;;;;;;;;;0BAO7B,8OAAC,4MAAe;0BACb,SAAS,MAAM,GAAG,mBACjB,8OAAC,oMAAM,CAAC,GAAG;oBACT,SAAS;wBAAE,SAAS;oBAAE;oBACtB,SAAS;wBAAE,SAAS;oBAAE;oBACtB,MAAM;wBAAE,SAAS;oBAAE;oBACnB,WAAU;8BAEV,cAAA,8OAAC;wBAAG,WAAU;kCACZ,cAAA,8OAAC,4MAAe;sCACb,SAAS,GAAG,CAAC,CAAC,UACb,yDAAyD;8CACzD,8OAAC;oCAA6B,MAAM;mCAAlB,QAAQ,EAAE;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAS9C","debugId":null}},
    {"offset": {"line": 779, "column": 0}, "map": {"version":3,"sources":["file:///Users/ramanakumar/TaskGlyph/src/components/ProjectCard.tsx"],"sourcesContent":["// src/components/ProjectCard.tsx\n\"use client\";\n\nimport {\n  useState,\n  useMemo,\n  FormEvent,\n  FocusEvent,\n  KeyboardEvent,\n  // âœ… 1. REMOVED Fragment, Popover, and Transition\n} from \"react\";\nimport { motion, AnimatePresence } from \"framer-motion\";\nimport { useTasks } from \"@/lib/db/useTasks\";\nimport { useProjects } from \"@/lib/db/useProjects\";\nimport { Project, Task } from \"@/lib/db/clientDb\";\nimport TaskCard from \"@/components/TaskCard\";\nimport {\n  PlusIcon,\n  // âœ… 2. REMOVED EllipsisHorizontalIcon\n  PencilIcon,\n  TrashIcon,\n  ChevronDownIcon,\n} from \"@heroicons/react/24/outline\";\n\nexport default function ProjectCard({ project }: { project: Project }) {\n  const { tasks, addTask } = useTasks();\n  const { updateProject, deleteProject } = useProjects();\n  const [isEditing, setIsEditing] = useState(false);\n  const [title, setTitle] = useState(project.name);\n  const [isExpanded, setIsExpanded] = useState(false);\n  const [newTaskTitle, setNewTaskTitle] = useState(\"\");\n\n  const projectTasks = useMemo(() => {\n    return tasks\n      .filter((t: Task) => t.projectId === project.id && !t.parentId)\n      .sort((a, b) => a.createdAt - b.createdAt);\n  }, [tasks, project.id]);\n\n  // --- Project Handlers ---\n  const handleTitleBlur = (e: FocusEvent<HTMLInputElement>) => {\n    setIsEditing(false);\n    const newTitle = e.target.value.trim();\n    if (newTitle && newTitle !== project.name)\n      updateProject(project.id, { name: newTitle });\n    else setTitle(project.name);\n  };\n  const handleTitleKeyDown = (e: KeyboardEvent<HTMLInputElement>) => {\n    if (e.key === \"Enter\") e.currentTarget.blur();\n    if (e.key === \"Escape\") {\n      setIsEditing(false);\n      setTitle(project.name);\n      e.currentTarget.blur();\n    }\n  };\n  const handleDelete = () => {\n    if (\n      confirm(\n        `Are you sure you want to delete \"${project.name}\" and all its tasks?`\n      )\n    ) {\n      deleteProject(project.id);\n    }\n  };\n  const handleAddTask = (e: FormEvent<HTMLFormElement>) => {\n    e.preventDefault();\n    if (!newTaskTitle.trim()) return;\n    addTask(newTaskTitle.trim(), { projectId: project.id });\n    setNewTaskTitle(\"\");\n  };\n\n  // âœ… 3. REMOVED Popover wrapper. Added `group` for hover icons.\n  return (\n    <motion.section\n      layout\n      variants={{\n        hidden: { opacity: 0, y: 20 },\n        visible: { opacity: 1, y: 0 },\n      }}\n      initial=\"hidden\"\n      animate=\"visible\"\n      className=\"group relative bg-white/50 backdrop-blur-md rounded-xl shadow-md border border-gray-100 transition-all z-10\"\n    >\n      {/* --- Project Header --- */}\n      <div className=\"flex items-center justify-between p-4 border-b border-gray-200/80\">\n        <div className=\"flex items-center gap-2\">\n          <button\n            onClick={() => setIsExpanded(!isExpanded)}\n            className=\"p-1 text-gray-400 hover:text-gray-700 rounded-full\"\n          >\n            <ChevronDownIcon\n              className={`w-5 h-5 transition-transform duration-200 ${\n                isExpanded ? \"\" : \"-rotate-90\"\n              }`}\n            />\n          </button>\n          {isEditing ? (\n            <input\n              type=\"text\"\n              value={title}\n              onChange={(e) => setTitle(e.target.value)}\n              onBlur={handleTitleBlur}\n              onKeyDown={handleTitleKeyDown}\n              autoFocus\n              className=\"text-lg font-semibold text-gray-900 w-full outline-none ring-2 ring-blue-500 rounded px-1 -mx-1 bg-white\"\n            />\n          ) : (\n            <h2\n              onClick={() => setIsEditing(true)}\n              className=\"text-lg font-semibold text-gray-900 cursor-text hover:bg-gray-100/50 px-1 -mx-1 rounded\"\n            >\n              {project.name}\n            </h2>\n          )}\n        </div>\n\n        {/* âœ… 4. REPLACED Popover.Button with hover icons */}\n        <div className=\"flex items-center opacity-0 group-hover:opacity-100 transition-opacity\">\n          <button\n            onClick={() => setIsEditing(true)}\n            title=\"Edit project name\"\n            className=\"p-1 text-gray-400 hover:text-gray-700 rounded\"\n          >\n            <PencilIcon className=\"h-4 w-4\" />\n          </button>\n          <button\n            onClick={handleDelete}\n            title=\"Delete project\"\n            className=\"p-1 text-gray-400 hover:text-red-600 rounded\"\n          >\n            <TrashIcon className=\"h-4 w-4\" />\n          </button>\n        </div>\n      </div>\n\n      {/* --- Collapsible Task List --- */}\n      <AnimatePresence>\n        {isExpanded && (\n          <motion.div\n            key=\"content\"\n            initial={{ height: 0, opacity: 0 }}\n            animate={{ height: \"auto\", opacity: 1 }}\n            exit={{ height: 0, opacity: 0 }}\n            transition={{ duration: 0.3, ease: \"easeInOut\" }}\n            className=\"overflow-hidden\"\n          >\n            <div className=\"p-4 space-y-2\">\n              <ul className=\"space-y-2\">\n                <AnimatePresence>\n                  {projectTasks.map((task) => (\n                    <TaskCard key={task.id} task={task} />\n                  ))}\n                </AnimatePresence>\n              </ul>\n\n              {/* Polished \"Add Task\" form */}\n              <form onSubmit={handleAddTask} className=\"flex gap-2 pt-2\">\n                <input\n                  type=\"text\"\n                  name=\"taskTitle\"\n                  value={newTaskTitle}\n                  onChange={(e) => setNewTaskTitle(e.target.value)}\n                  placeholder=\"Add a task...\"\n                  className=\"flex-1 bg-white/70 rounded-lg px-3 py-1.5 text-sm placeholder-gray-500 shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500\"\n                />\n                <button\n                  type=\"submit\"\n                  className=\"flex-shrink-0 p-1.5 text-gray-500 rounded-full hover:bg-gray-200 hover:text-gray-700 transition-colors\"\n                  title=\"Add task to project\"\n                >\n                  <PlusIcon className=\"h-5 w-5\" />\n                </button>\n              </form>\n            </div>\n          </motion.div>\n        )}\n      </AnimatePresence>\n    </motion.section>\n  );\n}\n"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 1065, "column": 0}, "map": {"version":3,"sources":["file:///Users/ramanakumar/TaskGlyph/src/components/Modal.tsx"],"sourcesContent":["// src/components/Modal.tsx\n\"use client\";\n\nimport { Dialog, Transition } from \"@headlessui/react\";\nimport { Fragment, ReactNode } from \"react\";\nimport { XMarkIcon } from \"@heroicons/react/24/outline\";\n\ninterface ModalProps {\n  isOpen: boolean;\n  onClose: () => void;\n  title: string;\n  children: ReactNode;\n}\n\nexport default function Modal({\n  isOpen,\n  onClose,\n  title,\n  children,\n}: ModalProps) {\n  return (\n    <Transition appear show={isOpen} as={Fragment}>\n      <Dialog as=\"div\" className=\"relative z-50\" onClose={onClose}>\n        {/* Backdrop */}\n        <Transition.Child\n          as={Fragment}\n          enter=\"ease-out duration-200\"\n          enterFrom=\"opacity-0\"\n          enterTo=\"opacity-100\"\n          leave=\"ease-in duration-150\"\n          leaveFrom=\"opacity-100\"\n          leaveTo=\"opacity-0\"\n        >\n          <div className=\"fixed inset-0 bg-black/30 backdrop-blur-sm\" />\n        </Transition.Child>\n\n        {/* Modal Panel */}\n        <div className=\"fixed inset-0 overflow-y-auto\">\n          <div className=\"flex min-h-full items-center justify-center p-4 text-center\">\n            <Transition.Child\n              as={Fragment}\n              enter=\"ease-out duration-200\"\n              enterFrom=\"opacity-0 scale-95\"\n              enterTo=\"opacity-100 scale-100\"\n              leave=\"ease-in duration-150\"\n              leaveFrom=\"opacity-100 scale-100\"\n              leaveTo=\"opacity-0 scale-95\"\n            >\n              {/* âœ… (Point 1) Updated styling to match the new blur-UI */}\n              <Dialog.Panel className=\"w-full max-w-md transform overflow-hidden rounded-2xl bg-white/70 p-6 text-left align-middle shadow-xl transition-all backdrop-blur-lg border border-white/30\">\n                {/* Header */}\n                <div className=\"flex items-center justify-between\">\n                  <Dialog.Title\n                    as=\"h3\"\n                    className=\"text-lg font-medium leading-6 text-gray-900\"\n                  >\n                    {title}\n                  </Dialog.Title>\n                  <button\n                    onClick={onClose}\n                    className=\"p-1 rounded-full text-gray-400 hover:bg-gray-100 hover:text-gray-600\"\n                  >\n                    <XMarkIcon className=\"w-5 h-5\" />\n                  </button>\n                </div>\n\n                {/* Content */}\n                <div className=\"mt-4\">{children}</div>\n              </Dialog.Panel>\n            </Transition.Child>\n          </div>\n        </div>\n      </Dialog>\n    </Transition>\n  );\n}\n"],"names":[],"mappings":"AAAA,2BAA2B;;;;;;AAG3B;AAAA;AACA;AACA;AAJA;;;;;AAae,SAAS,MAAM,EAC5B,MAAM,EACN,OAAO,EACP,KAAK,EACL,QAAQ,EACG;IACX,qBACE,8OAAC,qMAAU;QAAC,MAAM;QAAC,MAAM;QAAQ,IAAI,iNAAQ;kBAC3C,cAAA,8OAAC,yLAAM;YAAC,IAAG;YAAM,WAAU;YAAgB,SAAS;;8BAElD,8OAAC,qMAAU,CAAC,KAAK;oBACf,IAAI,iNAAQ;oBACZ,OAAM;oBACN,WAAU;oBACV,SAAQ;oBACR,OAAM;oBACN,WAAU;oBACV,SAAQ;8BAER,cAAA,8OAAC;wBAAI,WAAU;;;;;;;;;;;8BAIjB,8OAAC;oBAAI,WAAU;8BACb,cAAA,8OAAC;wBAAI,WAAU;kCACb,cAAA,8OAAC,qMAAU,CAAC,KAAK;4BACf,IAAI,iNAAQ;4BACZ,OAAM;4BACN,WAAU;4BACV,SAAQ;4BACR,OAAM;4BACN,WAAU;4BACV,SAAQ;sCAGR,cAAA,8OAAC,yLAAM,CAAC,KAAK;gCAAC,WAAU;;kDAEtB,8OAAC;wCAAI,WAAU;;0DACb,8OAAC,yLAAM,CAAC,KAAK;gDACX,IAAG;gDACH,WAAU;0DAET;;;;;;0DAEH,8OAAC;gDACC,SAAS;gDACT,WAAU;0DAEV,cAAA,8OAAC,8NAAS;oDAAC,WAAU;;;;;;;;;;;;;;;;;kDAKzB,8OAAC;wCAAI,WAAU;kDAAQ;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAQvC","debugId":null}},
    {"offset": {"line": 1203, "column": 0}, "map": {"version":3,"sources":["file:///Users/ramanakumar/TaskGlyph/src/components/AddProjectModal.tsx"],"sourcesContent":["// src/components/AddProjectModal.tsx\n\"use client\";\n\nimport { useState, FormEvent } from \"react\";\nimport Modal from \"./Modal\"; // Import the reusable modal shell\nimport { useProjects } from \"@/lib/db/useProjects\";\n\ninterface AddProjectModalProps {\n  isOpen: boolean;\n  onClose: () => void;\n}\n\nexport default function AddProjectModal({\n  isOpen,\n  onClose,\n}: AddProjectModalProps) {\n  const [title, setTitle] = useState(\"\");\n  const { addProject } = useProjects();\n  const [error, setError] = useState<string | null>(null);\n\n  const handleSubmit = (e: FormEvent) => {\n    e.preventDefault();\n    if (!title.trim()) {\n      setError(\"Project name cannot be empty.\");\n      return;\n    }\n\n    addProject(title.trim());\n\n    setError(null);\n    setTitle(\"\");\n    onClose();\n  };\n\n  const handleClose = () => {\n    setError(null);\n    setTitle(\"\");\n    onClose();\n  };\n\n  return (\n    <Modal isOpen={isOpen} onClose={handleClose} title=\"Create New Project\">\n      <form onSubmit={handleSubmit} className=\"space-y-4\">\n        <div>\n          <label\n            htmlFor=\"projectName\"\n            className=\"block text-sm font-medium text-gray-700\"\n          >\n            Project Name\n          </label>\n          {/* âœ… (Point 1) Polished input field */}\n          <input\n            type=\"text\"\n            id=\"projectName\"\n            value={title}\n            onChange={(e) => setTitle(e.target.value)}\n            className=\"mt-1 block w-full rounded-lg border-gray-300 bg-white/70 px-3 py-2 shadow-sm focus:border-blue-500 focus:ring-blue-500 sm:text-sm\"\n            placeholder=\"e.g., Q4 Marketing Plan\"\n            autoFocus\n          />\n          {error && <p className=\"mt-1 text-xs text-red-600\">{error}</p>}\n        </div>\n\n        {/* âœ… (Point 1) Polished buttons */}\n        <div className=\"mt-6 flex justify-end gap-3\">\n          <button\n            type=\"button\"\n            onClick={handleClose}\n            className=\"px-4 py-2 text-sm font-medium text-gray-700 bg-gray-100 rounded-lg hover:bg-gray-200 transition-colors\"\n          >\n            Cancel\n          </button>\n          <button\n            type=\"submit\"\n            className=\"px-4 py-2 text-sm font-medium text-white bg-blue-600 rounded-lg hover:bg-blue-700 transition-colors\"\n          >\n            Create Project\n          </button>\n        </div>\n      </form>\n    </Modal>\n  );\n}\n"],"names":[],"mappings":"AAAA,qCAAqC;;;;;;AAGrC;AACA,wNAA6B,kCAAkC;AAC/D;AAJA;;;;;AAWe,SAAS,gBAAgB,EACtC,MAAM,EACN,OAAO,EACc;IACrB,MAAM,CAAC,OAAO,SAAS,GAAG,IAAA,iNAAQ,EAAC;IACnC,MAAM,EAAE,UAAU,EAAE,GAAG,IAAA,8IAAW;IAClC,MAAM,CAAC,OAAO,SAAS,GAAG,IAAA,iNAAQ,EAAgB;IAElD,MAAM,eAAe,CAAC;QACpB,EAAE,cAAc;QAChB,IAAI,CAAC,MAAM,IAAI,IAAI;YACjB,SAAS;YACT;QACF;QAEA,WAAW,MAAM,IAAI;QAErB,SAAS;QACT,SAAS;QACT;IACF;IAEA,MAAM,cAAc;QAClB,SAAS;QACT,SAAS;QACT;IACF;IAEA,qBACE,8OAAC,sIAAK;QAAC,QAAQ;QAAQ,SAAS;QAAa,OAAM;kBACjD,cAAA,8OAAC;YAAK,UAAU;YAAc,WAAU;;8BACtC,8OAAC;;sCACC,8OAAC;4BACC,SAAQ;4BACR,WAAU;sCACX;;;;;;sCAID,8OAAC;4BACC,MAAK;4BACL,IAAG;4BACH,OAAO;4BACP,UAAU,CAAC,IAAM,SAAS,EAAE,MAAM,CAAC,KAAK;4BACxC,WAAU;4BACV,aAAY;4BACZ,SAAS;;;;;;wBAEV,uBAAS,8OAAC;4BAAE,WAAU;sCAA6B;;;;;;;;;;;;8BAItD,8OAAC;oBAAI,WAAU;;sCACb,8OAAC;4BACC,MAAK;4BACL,SAAS;4BACT,WAAU;sCACX;;;;;;sCAGD,8OAAC;4BACC,MAAK;4BACL,WAAU;sCACX;;;;;;;;;;;;;;;;;;;;;;;AAOX","debugId":null}},
    {"offset": {"line": 1327, "column": 0}, "map": {"version":3,"sources":["file:///Users/ramanakumar/TaskGlyph/src/components/CustomTimeInput.tsx"],"sourcesContent":["// src/components/CustomTimeInput.tsx\n\"use client\";\n\nimport { useState } from \"react\";\nimport { ChevronUpIcon, ChevronDownIcon } from \"@heroicons/react/24/outline\";\n\ninterface CustomTimeInputProps {\n  value: Date;\n  onChange: (newDate: Date) => void;\n}\n\nexport default function CustomTimeInput({\n  value,\n  onChange,\n}: CustomTimeInputProps) {\n  const [is24Hour, setIs24Hour] = useState(false);\n\n  // --- Get values from the date prop ---\n  let hours = value.getHours();\n  const minutes = value.getMinutes();\n  let meridiem = \"AM\";\n\n  if (!is24Hour) {\n    meridiem = hours >= 12 ? \"PM\" : \"AM\";\n    hours = hours % 12;\n    if (hours === 0) hours = 12; // 0 o'clock (midnight) is 12 AM\n  }\n\n  // --- Handlers for changing time ---\n  const handleChange = (\n    newHours: number,\n    newMinutes: number,\n    newMeridiem?: \"AM\" | \"PM\"\n  ) => {\n    const newDate = new Date(value.getTime());\n\n    if (is24Hour) {\n      newDate.setHours(newHours);\n    } else {\n      let h24 = newHours;\n      if (newMeridiem === \"PM\" && h24 < 12) {\n        h24 += 12;\n      }\n      if (newMeridiem === \"AM\" && h24 === 12) {\n        h24 = 0; // Midnight case\n      }\n      newDate.setHours(h24);\n    }\n\n    newDate.setMinutes(newMinutes);\n    onChange(newDate);\n  };\n\n  const pad = (num: number) => num.toString().padStart(2, \"0\");\n\n  const incrementHour = () => {\n    const newHours = (value.getHours() + 1) % 24;\n    handleChange(newHours, minutes);\n  };\n  const decrementHour = () => {\n    const newHours = (value.getHours() - 1 + 24) % 24;\n    handleChange(newHours, minutes);\n  };\n\n  const incrementMinute = () => {\n    const newMinutes = (value.getMinutes() + 1) % 60;\n    let newHours = value.getHours();\n    if (newMinutes === 0) {\n      // Rolled over\n      newHours = (newHours + 1) % 24;\n    }\n    handleChange(newHours, newMinutes);\n  };\n  const decrementMinute = () => {\n    const newMinutes = (value.getMinutes() - 1 + 60) % 60;\n    let newHours = value.getHours();\n    if (newMinutes === 59) {\n      // Rolled back\n      newHours = (newHours - 1 + 24) % 24;\n    }\n    handleChange(newHours, newMinutes);\n  };\n\n  const toggleMeridiem = () => {\n    const currentHours = value.getHours();\n    const newHours = (currentHours + 12) % 24; // Flip AM/PM\n    handleChange(newHours, minutes);\n  };\n\n  const handleHourTextChange = (e: React.ChangeEvent<HTMLInputElement>) => {\n    let newHours = parseInt(e.target.value) || 0;\n    if (is24Hour) {\n      if (newHours > 23) newHours = 23;\n    } else {\n      if (newHours > 12) newHours = 12;\n    }\n    if (newHours < 0) newHours = 0;\n    handleChange(newHours, minutes, meridiem as \"AM\" | \"PM\");\n  };\n\n  const handleMinuteTextChange = (e: React.ChangeEvent<HTMLInputElement>) => {\n    let newMinutes = parseInt(e.target.value) || 0;\n    if (newMinutes > 59) newMinutes = 59;\n    if (newMinutes < 0) newMinutes = 0;\n    handleChange(hours, newMinutes, meridiem as \"AM\" | \"PM\");\n  };\n\n  return (\n    <div className=\"w-full\">\n      {/* 1. 12/24hr format toggle */}\n      <div className=\"flex justify-end mb-1\">\n        <button\n          type=\"button\"\n          onClick={() => setIs24Hour(!is24Hour)}\n          className=\"text-xs font-medium text-blue-600 hover:text-blue-800\"\n        >\n          {is24Hour ? \"Switch to 12-Hour\" : \"Switch to 24-Hour\"}\n        </button>\n      </div>\n\n      {/* 2. The Time Input Fields */}\n      <div className=\"flex items-center gap-2\">\n        {/* Hour Input */}\n        <div className=\"flex-1 flex items-center border border-gray-300 rounded-md shadow-sm\">\n          <input\n            type=\"text\"\n            inputMode=\"numeric\"\n            value={is24Hour ? pad(hours) : hours}\n            onChange={handleHourTextChange}\n            className=\"w-full text-center text-lg py-2 border-none rounded-l-md focus:ring-0\"\n          />\n          <div className=\"flex flex-col border-l border-gray-300\">\n            <button\n              type=\"button\"\n              onClick={incrementHour}\n              className=\"p-1 text-gray-500 hover:text-black border-b border-gray-300\"\n            >\n              <ChevronUpIcon className=\"w-4 h-4\" />\n            </button>\n            <button\n              type=\"button\"\n              onClick={decrementHour}\n              className=\"p-1 text-gray-500 hover:text-black\"\n            >\n              <ChevronDownIcon className=\"w-4 h-4\" />\n            </button>\n          </div>\n        </div>\n\n        <span className=\"font-bold text-lg text-gray-500\">:</span>\n\n        {/* Minute Input */}\n        <div className=\"flex-1 flex items-center border border-gray-300 rounded-md shadow-sm\">\n          <input\n            type=\"text\"\n            inputMode=\"numeric\"\n            value={pad(minutes)}\n            onChange={handleMinuteTextChange}\n            className=\"w-full text-center text-lg py-2 border-none rounded-l-md focus:ring-0\"\n          />\n          <div className=\"flex flex-col border-l border-gray-300\">\n            <button\n              type=\"button\"\n              onClick={incrementMinute}\n              className=\"p-1 text-gray-500 hover:text-black border-b border-gray-300\"\n            >\n              <ChevronUpIcon className=\"w-4 h-4\" />\n            </button>\n            <button\n              type=\"button\"\n              onClick={decrementMinute}\n              className=\"p-1 text-gray-500 hover:text-black\"\n            >\n              <ChevronDownIcon className=\"w-4 h-4\" />\n            </button>\n          </div>\n        </div>\n\n        {/* 3. AM/PM Changer */}\n        {!is24Hour && (\n          <button\n            type=\"button\"\n            onClick={toggleMeridiem}\n            className=\"px-4 py-2 text-lg font-medium bg-gray-100 text-gray-800 rounded-md shadow-sm border border-gray-300 hover:bg-gray-200\"\n          >\n            {meridiem}\n          </button>\n        )}\n      </div>\n    </div>\n  );\n}\n"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 1597, "column": 0}, "map": {"version":3,"sources":["file:///Users/ramanakumar/TaskGlyph/src/components/AddMeetingModal.tsx"],"sourcesContent":["\"use client\";\n\nimport { Fragment, useState, useEffect } from \"react\";\nimport { Dialog, Transition } from \"@headlessui/react\";\nimport { XMarkIcon, LinkIcon } from \"@heroicons/react/24/outline\";\nimport StylishButton from \"./StylishButton\";\nimport CustomTimeInput from \"./CustomTimeInput\";\nimport { Task } from \"@/lib/db/clientDb\"; // <-- Import Task type\n\ninterface AddMeetingModalProps {\n  isOpen: boolean;\n  onClose: () => void;\n  onSave: (meeting: {\n    title: string;\n    description: string;\n    meetLink: string;\n    meetingTime: Date;\n  }) => void;\n  // --- [NEW] ---\n  selectedDate: Date | null; // For adding a new meeting\n  existingMeeting: Task | null; // For editing an existing one\n}\n\nexport default function AddMeetingModal({\n  isOpen,\n  onClose,\n  onSave,\n  selectedDate,\n  existingMeeting, // <-- [NEW]\n}: AddMeetingModalProps) {\n  const [title, setTitle] = useState(\"\");\n  const [description, setDescription] = useState(\"\");\n  const [meetLink, setMeetLink] = useState(\"\");\n  const [meetingTime, setMeetingTime] = useState(new Date());\n\n  const isEditMode = !!existingMeeting;\n\n  // This effect now fills the form when the modal opens\n  useEffect(() => {\n    if (isOpen) {\n      if (isEditMode && existingMeeting) {\n        // --- EDIT MODE ---\n        // Fill form with existing data\n        setTitle(existingMeeting.title);\n        setDescription(existingMeeting.notes || \"\");\n        setMeetLink(existingMeeting.meetLink || \"\");\n        setMeetingTime(new Date(existingMeeting.dueDate!));\n      } else if (selectedDate) {\n        // --- ADD MODE ---\n        // Set date from calendar and default the time\n        const newMeetingTime = new Date(selectedDate);\n        const now = new Date();\n        newMeetingTime.setHours(now.getHours() + 1);\n        newMeetingTime.setMinutes(0);\n        newMeetingTime.setSeconds(0);\n        setMeetingTime(newMeetingTime);\n\n        // Reset fields\n        setTitle(\"\");\n        setDescription(\"\");\n        setMeetLink(\"\");\n      }\n    }\n  }, [isOpen, existingMeeting, selectedDate, isEditMode]);\n\n  const handleSave = () => {\n    if (!title.trim()) return;\n\n    onSave({\n      title,\n      description,\n      meetLink,\n      meetingTime: meetingTime,\n    });\n  };\n\n  return (\n    <Transition.Root show={isOpen} as={Fragment}>\n      <Dialog as=\"div\" className=\"relative z-50\" onClose={onClose}>\n        <Transition.Child\n          as={Fragment}\n          enter=\"ease-out duration-300\"\n          enterFrom=\"opacity-0\"\n          enterTo=\"opacity-100\"\n          leave=\"ease-in duration-200\"\n          leaveFrom=\"opacity-100\"\n          leaveTo=\"opacity-0\"\n        >\n          <div className=\"fixed inset-0 bg-black/30\" />\n        </Transition.Child>\n\n        <div className=\"fixed inset-0 overflow-y-auto\">\n          <div className=\"flex min-h-full items-center justify-center p-4\">\n            <Transition.Child\n              as={Fragment}\n              enter=\"ease-out duration-300\"\n              enterFrom=\"opacity-0 scale-95\"\n              enterTo=\"opacity-100 scale-100\"\n              leave=\"ease-in duration-200\"\n              leaveFrom=\"opacity-100 scale-100\"\n              leaveTo=\"opacity-0 scale-95\"\n            >\n              <Dialog.Panel className=\"w-full max-w-md transform overflow-hidden rounded-2xl bg-white p-6 text-left align-middle shadow-xl transition-all\">\n                <div className=\"flex items-center justify-between\">\n                  <Dialog.Title\n                    as=\"h3\"\n                    className=\"text-lg font-medium leading-6 text-gray-900\"\n                  >\n                    {/* --- [NEW] Dynamic Title --- */}\n                    {isEditMode ? \"Edit Meeting\" : \"Add New Meeting\"}\n                  </Dialog.Title>\n                  <button\n                    onClick={onClose}\n                    className=\"p-1 rounded-full hover:bg-gray-100\"\n                  >\n                    <XMarkIcon className=\"w-5 h-5 text-gray-500\" />\n                  </button>\n                </div>\n\n                <div className=\"mt-4 space-y-4\">\n                  {/* Title */}\n                  <div>\n                    <label\n                      htmlFor=\"title\"\n                      className=\"block text-sm font-medium text-gray-700\"\n                    >\n                      Meeting Name\n                    </label>\n                    <input\n                      type=\"text\"\n                      id=\"title\"\n                      value={title}\n                      onChange={(e) => setTitle(e.target.value)}\n                      className=\"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500 py-2.5\"\n                      placeholder=\"e.g., Team Sync\"\n                    />\n                  </div>\n\n                  {/* Time */}\n                  <div>\n                    <label\n                      htmlFor=\"time\"\n                      className=\"block text-sm font-medium text-gray-700 mb-1\"\n                    >\n                      Time\n                    </label>\n                    <CustomTimeInput\n                      value={meetingTime}\n                      onChange={setMeetingTime}\n                    />\n                  </div>\n\n                  {/* Meet Link */}\n                  <div>\n                    <label\n                      htmlFor=\"link\"\n                      className=\"block text-sm font-medium text-gray-700\"\n                    >\n                      Meeting Link (Optional)\n                    </label>\n                    <div className=\"relative mt-1\">\n                      <div className=\"pointer-events-none absolute inset-y-0 left-0 flex items-center pl-3\">\n                        <LinkIcon\n                          className=\"h-5 w-5 text-gray-400\"\n                          aria-hidden=\"true\"\n                        />\n                      </div>\n                      <input\n                        type=\"text\"\n                        id=\"link\"\n                        value={meetLink}\n                        onChange={(e) => setMeetLink(e.target.value)}\n                        className=\"block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500 py-2.5 pl-10\"\n                        placeholder=\"https://meet.google.com/...\"\n                      />\n                    </div>\n                  </div>\n\n                  {/* Description */}\n                  <div>\n                    <label\n                      htmlFor=\"description\"\n                      className=\"block text-sm font-medium text-gray-700\"\n                    >\n                      Description (Optional)\n                    </label>\n                    <textarea\n                      id=\"description\"\n                      value={description}\n                      onChange={(e) => setDescription(e.target.value)}\n                      rows={3}\n                      className=\"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500 sm:text-sm\"\n                      placeholder=\"Meeting agenda, notes...\"\n                    />\n                  </div>\n                </div>\n\n                <div className=\"mt-6 flex justify-end gap-3\">\n                  <StylishButton variant=\"secondary\" onClick={onClose}>\n                    Cancel\n                  </StylishButton>\n                  <StylishButton variant=\"primary\" onClick={handleSave}>\n                    {/* --- [NEW] Dynamic Button Text --- */}\n                    {isEditMode ? \"Save Changes\" : \"Save Meeting\"}\n                  </StylishButton>\n                </div>\n              </Dialog.Panel>\n            </Transition.Child>\n          </div>\n        </div>\n      </Dialog>\n    </Transition.Root>\n  );\n}\n"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 1947, "column": 0}, "map": {"version":3,"sources":["file:///Users/ramanakumar/TaskGlyph/src/components/TaskCalendar.tsx"],"sourcesContent":["// src/components/TaskCalendar.tsx\n\n\"use client\";\n\nimport { useMemo, useState } from \"react\";\nimport FullCalendar from \"@fullcalendar/react\";\nimport dayGridPlugin from \"@fullcalendar/daygrid\";\nimport interactionPlugin, { DateClickArg } from \"@fullcalendar/interaction\";\nimport { EventClickArg, EventInput } from \"@fullcalendar/core\";\nimport { Task } from \"@/lib/db/clientDb\";\nimport { useTasks } from \"@/lib/db/useTasks\";\nimport AddMeetingModal from \"./AddMeetingModal\";\n\n// Note: We removed useTaskDetail, we don't need it here anymore\n\ninterface TaskCalendarProps {\n  tasks: Task[];\n}\n\nexport default function TaskCalendar({ tasks }: TaskCalendarProps) {\n  // [UPDATED] Get updateTask from the hook\n  const { tasks: allTasks, addTask, updateTask } = useTasks();\n\n  // --- State for the modal ---\n  const [isModalOpen, setIsModalOpen] = useState(false);\n  const [selectedDate, setSelectedDate] = useState<Date | null>(null);\n  // --- [NEW] State to hold the task we are editing ---\n  const [editingTask, setEditingTask] = useState<Task | null>(null);\n\n  // Convert tasks to calendar events\n  const calendarEvents = useMemo(() => {\n    return tasks\n      .filter((task) => !!task.dueDate)\n      .map(\n        (task) =>\n          ({\n            id: task.id,\n            title: task.title,\n            start: new Date(task.dueDate!),\n          } as EventInput)\n      );\n  }, [tasks]);\n\n  // --- [THIS IS THE FIX] ---\n  // When you click an *existing* task on the calendar...\n  const handleEventClick = (clickInfo: EventClickArg) => {\n    const taskId = clickInfo.event.id;\n    const task = allTasks.find((t: Task) => t.id === taskId);\n    if (task) {\n      // Set the task to edit and open the modal\n      setEditingTask(task);\n      setSelectedDate(null); // Ensure we're not in 'add' mode\n      setIsModalOpen(true);\n    }\n  };\n\n  // When you click on a *date*\n  const handleDateClick = (clickInfo: DateClickArg) => {\n    setSelectedDate(clickInfo.date); // Save the date they clicked\n    setEditingTask(null); // Ensure we're not in 'edit' mode\n    setIsModalOpen(true); // Open the modal\n  };\n\n  // [UPDATED] This function now handles BOTH adding and updating\n  const handleSaveMeeting = async (meeting: {\n    title: string;\n    description: string;\n    meetLink: string;\n    meetingTime: Date;\n  }) => {\n    if (editingTask) {\n      // --- UPDATE LOGIC ---\n      await updateTask(editingTask.id, {\n        title: meeting.title,\n        notes: meeting.description,\n        meetLink: meeting.meetLink,\n        dueDate: meeting.meetingTime.getTime(),\n        reminderAt: meeting.meetingTime.getTime(), // Also update reminder time\n        // Reset flags so reminders send again\n        reminder_30_sent: false,\n        reminder_20_sent: false,\n        reminder_10_sent: false,\n      });\n    } else {\n      // --- ADD LOGIC ---\n      await addTask(meeting.title, {\n        notes: meeting.description,\n        meetLink: meeting.meetLink,\n        dueDate: meeting.meetingTime.getTime(),\n        reminderAt: meeting.meetingTime.getTime(),\n      });\n    }\n\n    // Close and reset modal state\n    setIsModalOpen(false);\n    setEditingTask(null);\n    setSelectedDate(null);\n  };\n\n  const handleCloseModal = () => {\n    setIsModalOpen(false);\n    setEditingTask(null);\n    setSelectedDate(null);\n  };\n\n  return (\n    <>\n      <div className=\"bg-white rounded-lg shadow-lg border border-gray-200 p-6\">\n        <FullCalendar\n          plugins={[dayGridPlugin, interactionPlugin]}\n          initialView=\"dayGridMonth\"\n          headerToolbar={{\n            left: \"prev,next today\",\n            center: \"title\",\n            right: \"dayGridMonth,dayGridWeek,dayGridDay\",\n          }}\n          events={calendarEvents}\n          eventClick={handleEventClick} // <-- This now opens the edit modal\n          dateClick={handleDateClick} // <-- This opens the add modal\n          selectable={true}\n          height=\"auto\"\n          eventColor=\"#2563eb\"\n        />\n      </div>\n\n      {/* --- [UPDATED] Render the modal --- */}\n      <AddMeetingModal\n        isOpen={isModalOpen}\n        onClose={handleCloseModal}\n        onSave={handleSaveMeeting}\n        selectedDate={selectedDate}\n        existingMeeting={editingTask}\n      />\n    </>\n  );\n}\n"],"names":[],"mappings":"AAAA,kCAAkC;;;;;;AAIlC;AACA;AACA;AACA;AAGA;AACA;AATA;;;;;;;;AAiBe,SAAS,aAAa,EAAE,KAAK,EAAqB;IAC/D,yCAAyC;IACzC,MAAM,EAAE,OAAO,QAAQ,EAAE,OAAO,EAAE,UAAU,EAAE,GAAG,IAAA,wIAAQ;IAEzD,8BAA8B;IAC9B,MAAM,CAAC,aAAa,eAAe,GAAG,IAAA,iNAAQ,EAAC;IAC/C,MAAM,CAAC,cAAc,gBAAgB,GAAG,IAAA,iNAAQ,EAAc;IAC9D,sDAAsD;IACtD,MAAM,CAAC,aAAa,eAAe,GAAG,IAAA,iNAAQ,EAAc;IAE5D,mCAAmC;IACnC,MAAM,iBAAiB,IAAA,gNAAO,EAAC;QAC7B,OAAO,MACJ,MAAM,CAAC,CAAC,OAAS,CAAC,CAAC,KAAK,OAAO,EAC/B,GAAG,CACF,CAAC,OACC,CAAC;gBACC,IAAI,KAAK,EAAE;gBACX,OAAO,KAAK,KAAK;gBACjB,OAAO,IAAI,KAAK,KAAK,OAAO;YAC9B,CAAe;IAEvB,GAAG;QAAC;KAAM;IAEV,4BAA4B;IAC5B,uDAAuD;IACvD,MAAM,mBAAmB,CAAC;QACxB,MAAM,SAAS,UAAU,KAAK,CAAC,EAAE;QACjC,MAAM,OAAO,SAAS,IAAI,CAAC,CAAC,IAAY,EAAE,EAAE,KAAK;QACjD,IAAI,MAAM;YACR,0CAA0C;YAC1C,eAAe;YACf,gBAAgB,OAAO,iCAAiC;YACxD,eAAe;QACjB;IACF;IAEA,6BAA6B;IAC7B,MAAM,kBAAkB,CAAC;QACvB,gBAAgB,UAAU,IAAI,GAAG,6BAA6B;QAC9D,eAAe,OAAO,kCAAkC;QACxD,eAAe,OAAO,iBAAiB;IACzC;IAEA,+DAA+D;IAC/D,MAAM,oBAAoB,OAAO;QAM/B,IAAI,aAAa;YACf,uBAAuB;YACvB,MAAM,WAAW,YAAY,EAAE,EAAE;gBAC/B,OAAO,QAAQ,KAAK;gBACpB,OAAO,QAAQ,WAAW;gBAC1B,UAAU,QAAQ,QAAQ;gBAC1B,SAAS,QAAQ,WAAW,CAAC,OAAO;gBACpC,YAAY,QAAQ,WAAW,CAAC,OAAO;gBACvC,sCAAsC;gBACtC,kBAAkB;gBAClB,kBAAkB;gBAClB,kBAAkB;YACpB;QACF,OAAO;YACL,oBAAoB;YACpB,MAAM,QAAQ,QAAQ,KAAK,EAAE;gBAC3B,OAAO,QAAQ,WAAW;gBAC1B,UAAU,QAAQ,QAAQ;gBAC1B,SAAS,QAAQ,WAAW,CAAC,OAAO;gBACpC,YAAY,QAAQ,WAAW,CAAC,OAAO;YACzC;QACF;QAEA,8BAA8B;QAC9B,eAAe;QACf,eAAe;QACf,gBAAgB;IAClB;IAEA,MAAM,mBAAmB;QACvB,eAAe;QACf,eAAe;QACf,gBAAgB;IAClB;IAEA,qBACE;;0BACE,8OAAC;gBAAI,WAAU;0BACb,cAAA,8OAAC,mKAAY;oBACX,SAAS;wBAAC,6JAAa;wBAAE,iKAAiB;qBAAC;oBAC3C,aAAY;oBACZ,eAAe;wBACb,MAAM;wBACN,QAAQ;wBACR,OAAO;oBACT;oBACA,QAAQ;oBACR,YAAY;oBACZ,WAAW;oBACX,YAAY;oBACZ,QAAO;oBACP,YAAW;;;;;;;;;;;0BAKf,8OAAC,gJAAe;gBACd,QAAQ;gBACR,SAAS;gBACT,QAAQ;gBACR,cAAc;gBACd,iBAAiB;;;;;;;;AAIzB","debugId":null}},
    {"offset": {"line": 2086, "column": 0}, "map": {"version":3,"sources":["file:///Users/ramanakumar/TaskGlyph/src/app/app/tasks/page.tsx"],"sourcesContent":["// src/app/tasks/page.tsx\n\n\"use client\";\n\nimport { useState, FormEvent, useRef, useEffect } from \"react\";\nimport { motion, AnimatePresence } from \"framer-motion\";\nimport { useTasks } from \"@/lib/db/useTasks\";\nimport { useProjects } from \"@/lib/db/useProjects\";\nimport { Task, Project } from \"@/lib/db/clientDb\";\nimport {\n  PlusIcon,\n  MagnifyingGlassIcon,\n  CalendarDaysIcon,\n  ListBulletIcon,\n} from \"@heroicons/react/24/outline\";\nimport TaskCard from \"@/components/TaskCard\";\nimport ProjectCard from \"@/components/ProjectCard\";\nimport AddProjectModal from \"@/components/AddProjectModal\";\nimport { DndContext, closestCenter, DragEndEvent } from \"@dnd-kit/core\";\nimport TaskCalendar from \"@/components/TaskCalendar\"; // <-- 1. IMPORT YOUR NEW COMPONENT\n\nexport default function TaskPageContent() {\n  const { tasks, addTask } = useTasks();\n  const { projects } = useProjects();\n\n  const [newTaskTitle, setNewTaskTitle] = useState(\"\");\n  const [viewMode, setViewMode] = useState<\"list\" | \"calendar\">(\"list\");\n  const [searchTerm, setSearchTerm] = useState(\"\");\n  const [isModalOpen, setIsModalOpen] = useState(false);\n  const [isSearchVisible, setIsSearchVisible] = useState(false);\n  const searchInputRef = useRef<HTMLInputElement>(null);\n\n  // Filter logic\n  const filteredTasks = tasks.filter((task: Task) =>\n    task.title.toLowerCase().includes(searchTerm.toLowerCase())\n  );\n  const standaloneTasks = filteredTasks\n    .filter((task: Task) => !task.projectId && !task.parentId)\n    .sort((a, b) => a.createdAt - b.createdAt);\n\n  const filteredProjects = projects.filter((project: Project) =>\n    project.name.toLowerCase().includes(searchTerm.toLowerCase())\n  );\n\n  const handleAddTask = (e: FormEvent) => {\n    e.preventDefault();\n    if (newTaskTitle.trim()) {\n      addTask(newTaskTitle.trim());\n      setNewTaskTitle(\"\");\n    }\n  };\n\n  const handleAddProject = () => setIsModalOpen(true);\n\n  const handleDragEnd = (event: DragEndEvent) => {\n    const { active, over } = event;\n    if (over && active.id !== over.id) {\n      console.log(\"Drag end:\", active.id, \"over\", over.id);\n      alert(\"Drag-and-drop feature coming soon!\");\n    }\n  };\n\n  // Auto-focus when search becomes visible\n  useEffect(() => {\n    if (isSearchVisible) searchInputRef.current?.focus();\n  }, [isSearchVisible]);\n\n  return (\n    <>\n      <DndContext onDragEnd={handleDragEnd} collisionDetection={closestCenter}>\n        <div className=\"bg-gray-100/50 min-h-screen p-6\">\n          <main className=\"w-full\">\n            {/* Header */}\n            <div className=\"flex flex-col sm:flex-row justify-between items-center mb-6 gap-4\">\n              <h1 className=\"text-3xl font-bold text-gray-900\">\n                Tasks & Projects\n              </h1>\n\n              <div className=\"flex items-center gap-4\">\n                {/* Search */}\n                <div className=\"relative flex items-center h-10\">\n                  <AnimatePresence>\n                    {isSearchVisible && (\n                      <motion.input\n                        ref={searchInputRef}\n                        type=\"text\"\n                        placeholder=\"Search...\"\n                        value={searchTerm}\n                        onChange={(e) => setSearchTerm(e.target.value)}\n                        onBlur={() => setIsSearchVisible(false)}\n                        className=\"pl-10 pr-4 py-2 w-48 sm:w-64 bg-white/70 border-none rounded-lg shadow-sm text-sm placeholder-gray-500 focus:outline-none focus:ring-2 focus:ring-blue-500 backdrop-blur-md\"\n                        initial={{ width: 0, opacity: 0 }}\n                        animate={{ width: \"100%\", opacity: 1 }}\n                        exit={{ width: 0, opacity: 0 }}\n                        transition={{ duration: 0.2, ease: \"easeInOut\" }}\n                      />\n                    )}\n                  </AnimatePresence>\n                  <motion.button\n                    layout\n                    onClick={() => setIsSearchVisible(true)}\n                    className=\"p-2 text-gray-500 hover:text-gray-900 hover:bg-gray-200 rounded-full\"\n                  >\n                    <MagnifyingGlassIcon className=\"w-5 h-5\" />\n                  </motion.button>\n                </div>\n\n                {/* View Toggle */}\n                <div className=\"flex bg-gray-200 p-1 rounded-lg\">\n                  <button\n                    className={`px-3 py-1 text-sm rounded-md flex items-center gap-1.5 ${\n                      viewMode === \"list\" ? \"bg-white shadow\" : \"text-gray-600\"\n                    }`}\n                    onClick={() => setViewMode(\"list\")}\n                  >\n                    <ListBulletIcon className=\"w-4 h-4\" /> List\n                  </button>\n                  <button\n                    className={`px-3 py-1 text-sm rounded-md flex items-center gap-1.5 ${\n                      viewMode === \"calendar\"\n                        ? \"bg-white shadow\"\n                        : \"text-gray-600\"\n                    }`}\n                    onClick={() => setViewMode(\"calendar\")}\n                  >\n                    <CalendarDaysIcon className=\"w-4 h-4\" /> Calendar\n                  </button>\n                </div>\n              </div>\n            </div>\n\n            {/* Content */}\n            {viewMode === \"list\" ? (\n              <div className=\"grid grid-cols-1 lg:grid-cols-3 gap-8 items-start\">\n                {/* Projects */}\n                <div className=\"lg:col-span-2 space-y-6\">\n                  <div className=\"flex justify-between items-center\">\n                    <h2 className=\"text-xl font-semibold text-gray-800\">\n                      Projects\n                    </h2>\n                    <button\n                      onClick={handleAddProject}\n                      className=\"flex items-center gap-1 text-sm bg-blue-600 text-white px-3 py-1.5 rounded-lg shadow-sm hover:bg-blue-700 transition-colors focus:outline-none focus:ring-2 focus:ring-blue-500\"\n                    >\n                      <PlusIcon className=\"w-4 h-4\" />\n                      New Project\n                    </button>\n                  </div>\n\n                  {projects.length === 0 ? (\n                    <div className=\"text-center p-8 bg-white/70 backdrop-blur-md rounded-lg shadow-sm border border-gray-100\">\n                      <p className=\"text-gray-500\">You have no projects.</p>\n                      <p className=\"text-sm text-gray-400 mt-2\">\n                        Click â€œNew Projectâ€ to create one.\n                      </p>\n                    </div>\n                  ) : (\n                    <motion.div layout className=\"space-y-6\">\n                      <AnimatePresence>\n                        {filteredProjects.map((project) => (\n                          <ProjectCard key={project.id} project={project} />\n                        ))}\n                      </AnimatePresence>\n                    </motion.div>\n                  )}\n                </div>\n\n                {/* Standalone Tasks */}\n                <div className=\"lg:col-span-1 space-y-4\">\n                  <h2 className=\"text-xl font-semibold text-gray-800\">\n                    Standalone Tasks\n                  </h2>\n\n                  <form\n                    onSubmit={handleAddTask}\n                    className=\"flex gap-2 flex-shrink-0\"\n                  >\n                    <input\n                      type=\"text\"\n                      name=\"taskTitle\"\n                      value={newTaskTitle}\n                      onChange={(e) => setNewTaskTitle(e.target.value)}\n                      placeholder=\"Add a standalone task...\"\n                      className=\"flex-1 bg-white/70 rounded-lg px-3 py-1.5 text-sm placeholder-gray-500 shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 border-none backdrop-blur-md\"\n                    />\n                    <button\n                      type=\"submit\"\n                      className=\"flex-shrink-0 p-1.5 bg-blue-600 text-white rounded-lg shadow-sm hover:bg-blue-700 transition-colors\"\n                      title=\"Add task\"\n                    >\n                      <PlusIcon className=\"h-5 w-5\" />\n                    </button>\n                  </form>\n\n                  {standaloneTasks.length === 0 ? (\n                    <div className=\"text-center p-6 bg-white/70 backdrop-blur-md rounded-lg shadow-sm border border-gray-100\">\n                      <p className=\"text-gray-500 text-sm\">\n                        No standalone tasks.\n                      </p>\n                    </div>\n                  ) : (\n                    <motion.ul layout className=\"space-y-2\">\n                      <AnimatePresence>\n                        {standaloneTasks.map((task) => (\n                          <TaskCard key={task.id} task={task} />\n                        ))}\n                      </AnimatePresence>\n                    </motion.ul>\n                  )}\n                </div>\n              </div>\n            ) : (\n              // <-- 2. REPLACE THE PLACEHOLDER\n              // --- Calendar View ---\n              <TaskCalendar tasks={tasks} />\n            )}\n          </main>\n        </div>\n      </DndContext>\n\n      {/* Add Project Modal */}\n      <AddProjectModal\n        isOpen={isModalOpen}\n        onClose={() => setIsModalOpen(false)}\n      />\n    </>\n  );\n}\n"],"names":[],"mappings":"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","debugId":null}}]
}
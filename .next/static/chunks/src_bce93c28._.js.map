{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///Users/ramanakumar/TaskGlyph/src/lib/db/useTier.ts"],"sourcesContent":["// src/lib/db/useTier.ts\n\"use client\";\n\nimport { useEffect, useState } from \"react\";\nimport { useSession } from \"next-auth/react\";\nimport db, { UserMetadata } from \"./clientDb\";\n\nexport function useTier() {\n  const { data: session, status } = useSession();\n  const [tier, setTier] = useState<UserMetadata[\"tier\"] | null>(null);\n\n  useEffect(() => {\n    // 1. Define an async function to fetch and set tier\n    const getAndSetTier = async (userId: string) => {\n      // 2. Try getting from local DB first for speed and offline support\n      const localMeta = await db.userMetadata.get(userId);\n      if (localMeta) {\n        setTier(localMeta.tier);\n      } else {\n        // If nothing is in local, set to 'free' as a default\n        setTier(\"free\");\n      }\n\n      // 3. --- THIS IS THE FIX ---\n      // Only try to fetch from the server if we are ONLINE\n      if (navigator.onLine) {\n        try {\n          const response = await fetch(\"/api/user/tier\");\n          if (response.ok) {\n            const data = await response.json();\n            if (data.tier) {\n              // 4. Save the latest info to local DB and update state\n              await db.userMetadata.put({\n                userId: userId,\n                tier: data.tier,\n                trialStartedAt: data.trialStartedAt || 0,\n              });\n\n              // Only update state if it's different from local\n              if (!localMeta || localMeta.tier !== data.tier) {\n                setTier(data.tier);\n              }\n            }\n          } else {\n            // If fetch fails, we've already set from local, so we're good.\n            console.error(\"Server responded with an error for /api/user/tier\");\n          }\n        } catch (error) {\n          console.error(\"Failed to fetch user tier:\", error);\n          // If fetch fails, we're still safe because we already set from localMeta\n        }\n      }\n      // If we are OFFLINE, we skip the fetch entirely and just use localMeta\n    };\n\n    if (status === \"authenticated\" && session?.user?.id) {\n      getAndSetTier(session.user.id);\n    } else if (status === \"unauthenticated\") {\n      setTier(null);\n    }\n  }, [session, status]);\n\n  return tier;\n}\n"],"names":[],"mappings":"AAAA,wBAAwB;;;;;AAGxB;AACA;AACA;;AAJA;;;;AAMO,SAAS;;IACd,MAAM,EAAE,MAAM,OAAO,EAAE,MAAM,EAAE,GAAG,IAAA,+JAAU;IAC5C,MAAM,CAAC,MAAM,QAAQ,GAAG,IAAA,yKAAQ,EAA8B;IAE9D,IAAA,0KAAS;6BAAC;gBA4C0B;YA3ClC,oDAAoD;YACpD,MAAM;mDAAgB,OAAO;oBAC3B,mEAAmE;oBACnE,MAAM,YAAY,MAAM,0IAAE,CAAC,YAAY,CAAC,GAAG,CAAC;oBAC5C,IAAI,WAAW;wBACb,QAAQ,UAAU,IAAI;oBACxB,OAAO;wBACL,qDAAqD;wBACrD,QAAQ;oBACV;oBAEA,6BAA6B;oBAC7B,qDAAqD;oBACrD,IAAI,UAAU,MAAM,EAAE;wBACpB,IAAI;4BACF,MAAM,WAAW,MAAM,MAAM;4BAC7B,IAAI,SAAS,EAAE,EAAE;gCACf,MAAM,OAAO,MAAM,SAAS,IAAI;gCAChC,IAAI,KAAK,IAAI,EAAE;oCACb,uDAAuD;oCACvD,MAAM,0IAAE,CAAC,YAAY,CAAC,GAAG,CAAC;wCACxB,QAAQ;wCACR,MAAM,KAAK,IAAI;wCACf,gBAAgB,KAAK,cAAc,IAAI;oCACzC;oCAEA,iDAAiD;oCACjD,IAAI,CAAC,aAAa,UAAU,IAAI,KAAK,KAAK,IAAI,EAAE;wCAC9C,QAAQ,KAAK,IAAI;oCACnB;gCACF;4BACF,OAAO;gCACL,+DAA+D;gCAC/D,QAAQ,KAAK,CAAC;4BAChB;wBACF,EAAE,OAAO,OAAO;4BACd,QAAQ,KAAK,CAAC,8BAA8B;wBAC5C,yEAAyE;wBAC3E;oBACF;gBACA,uEAAuE;gBACzE;;YAEA,IAAI,WAAW,oBAAmB,oBAAA,+BAAA,gBAAA,QAAS,IAAI,cAAb,oCAAA,cAAe,EAAE,GAAE;gBACnD,cAAc,QAAQ,IAAI,CAAC,EAAE;YAC/B,OAAO,IAAI,WAAW,mBAAmB;gBACvC,QAAQ;YACV;QACF;4BAAG;QAAC;QAAS;KAAO;IAEpB,OAAO;AACT;GAxDgB;;QACoB,+JAAU","debugId":null}},
    {"offset": {"line": 90, "column": 0}, "map": {"version":3,"sources":["file:///Users/ramanakumar/TaskGlyph/src/lib/db/useNotifications.ts"],"sourcesContent":["// src/lib/db/useNotifications.ts\n\"use client\";\n\nimport { useMemo } from \"react\";\nimport db from \"./clientDb\";\nimport { useLiveQuery } from \"dexie-react-hooks\";\n\n/**\n * Gets all UNREAD notifications for the bell icon\n */\nexport function useUnreadNotifications() {\n  const notifs = useLiveQuery(() =>\n    // --- THIS IS THE FIX ---\n    // Query for the number 0 (for false) instead of the boolean\n    db.notifications.where(\"read\").equals(0).reverse().sortBy(\"createdAt\")\n  );\n\n  return useMemo(() => notifs || [], [notifs]);\n}\n"],"names":[],"mappings":"AAAA,iCAAiC;;;;;AAGjC;AACA;AACA;;AAJA;;;;AASO,SAAS;;IACd,MAAM,SAAS,IAAA,8LAAY;uDAAC,IAC1B,0BAA0B;YAC1B,4DAA4D;YAC5D,0IAAE,CAAC,aAAa,CAAC,KAAK,CAAC,QAAQ,MAAM,CAAC,GAAG,OAAO,GAAG,MAAM,CAAC;;IAG5D,OAAO,IAAA,wKAAO;0CAAC,IAAM,UAAU,EAAE;yCAAE;QAAC;KAAO;AAC7C;GARgB;;QACC,8LAAY","debugId":null}},
    {"offset": {"line": 128, "column": 0}, "map": {"version":3,"sources":["file:///Users/ramanakumar/TaskGlyph/src/components/NotificationBell.tsx"],"sourcesContent":["// src/components/NotificationBell.tsx\n\"use client\";\n\nimport { Fragment } from \"react\";\nimport { Popover, Transition } from \"@headlessui/react\";\nimport { BellIcon, XMarkIcon } from \"@heroicons/react/24/outline\";\nimport { useUnreadNotifications } from \"@/lib/db/useNotifications\";\nimport db from \"@/lib/db/clientDb\"; // Import the db instance\n\nexport default function NotificationBell() {\n  const unreadNotifs = useUnreadNotifications();\n  const unreadCount = unreadNotifs.length;\n\n  const markAsRead = async (id: string) => {\n    await db.notifications.update(id, { read: true });\n  };\n\n  return (\n    <Popover className=\"relative\">\n      <Popover.Button className=\"relative rounded-full p-1 text-gray-400 hover:text-gray-500 focus:outline-none\">\n        <span className=\"sr-only\">View notifications</span>\n        <BellIcon className=\"h-6 w-6\" aria-hidden=\"true\" />\n        {/* Red Dot */}\n        {unreadCount > 0 && (\n          <span className=\"absolute top-0 right-0 block h-2.5 w-2.5 rounded-full bg-red-500 ring-2 ring-white\" />\n        )}\n      </Popover.Button>\n      <Transition\n        as={Fragment}\n        enter=\"transition ease-out duration-200\"\n        enterFrom=\"opacity-0 translate-y-1\"\n        enterTo=\"opacity-100 translate-y-0\"\n        leave=\"transition ease-in duration-150\"\n        leaveFrom=\"opacity-100 translate-y-0\"\n        leaveTo=\"opacity-0 translate-y-1\"\n      >\n        <Popover.Panel className=\"absolute right-0 z-10 mt-3 w-screen max-w-xs transform px-4 sm:px-0\">\n          <div className=\"overflow-hidden rounded-lg shadow-lg ring-1 ring-black/5\">\n            <div className=\"relative grid gap-4 bg-white p-4\">\n              <h3 className=\"text-base font-medium text-gray-900\">\n                Notifications\n              </h3>\n              {unreadCount === 0 ? (\n                <p className=\"text-sm text-gray-500\">\n                  You&apos;re all caught up!\n                </p>\n              ) : (\n                <ul className=\"max-h-60 overflow-y-auto space-y-2\">\n                  {unreadNotifs.map((notif) => (\n                    <li\n                      key={notif.id}\n                      className=\"flex items-start gap-3 p-2 rounded-lg hover:bg-gray-50\"\n                    >\n                      <div className=\"flex-1\">\n                        <p className=\"text-sm text-gray-800\">{notif.message}</p>\n                        <span className=\"text-xs text-gray-400\">\n                          {new Date(notif.createdAt).toLocaleTimeString()}\n                        </span>\n                      </div>\n                      <button\n                        onClick={() => markAsRead(notif.id)}\n                        title=\"Dismiss\"\n                      >\n                        <XMarkIcon className=\"w-4 h-4 text-gray-400 hover:text-gray-700\" />\n                      </button>\n                    </li>\n                  ))}\n                </ul>\n              )}\n            </div>\n          </div>\n        </Popover.Panel>\n      </Transition>\n    </Popover>\n  );\n}\n"],"names":[],"mappings":"AAAA,sCAAsC;;;;;;AAGtC;AACA;AAAA;AACA;AAAA;AACA;AACA,6NAAoC,yBAAyB;;;AAN7D;;;;;;AAQe,SAAS;;IACtB,MAAM,eAAe,IAAA,iKAAsB;IAC3C,MAAM,cAAc,aAAa,MAAM;IAEvC,MAAM,aAAa,OAAO;QACxB,MAAM,0IAAE,CAAC,aAAa,CAAC,MAAM,CAAC,IAAI;YAAE,MAAM;QAAK;IACjD;IAEA,qBACE,6LAAC,+LAAO;QAAC,WAAU;;0BACjB,6LAAC,+LAAO,CAAC,MAAM;gBAAC,WAAU;;kCACxB,6LAAC;wBAAK,WAAU;kCAAU;;;;;;kCAC1B,6LAAC,8NAAQ;wBAAC,WAAU;wBAAU,eAAY;;;;;;oBAEzC,cAAc,mBACb,6LAAC;wBAAK,WAAU;;;;;;;;;;;;0BAGpB,6LAAC,wMAAU;gBACT,IAAI,yKAAQ;gBACZ,OAAM;gBACN,WAAU;gBACV,SAAQ;gBACR,OAAM;gBACN,WAAU;gBACV,SAAQ;0BAER,cAAA,6LAAC,+LAAO,CAAC,KAAK;oBAAC,WAAU;8BACvB,cAAA,6LAAC;wBAAI,WAAU;kCACb,cAAA,6LAAC;4BAAI,WAAU;;8CACb,6LAAC;oCAAG,WAAU;8CAAsC;;;;;;gCAGnD,gBAAgB,kBACf,6LAAC;oCAAE,WAAU;8CAAwB;;;;;yDAIrC,6LAAC;oCAAG,WAAU;8CACX,aAAa,GAAG,CAAC,CAAC,sBACjB,6LAAC;4CAEC,WAAU;;8DAEV,6LAAC;oDAAI,WAAU;;sEACb,6LAAC;4DAAE,WAAU;sEAAyB,MAAM,OAAO;;;;;;sEACnD,6LAAC;4DAAK,WAAU;sEACb,IAAI,KAAK,MAAM,SAAS,EAAE,kBAAkB;;;;;;;;;;;;8DAGjD,6LAAC;oDACC,SAAS,IAAM,WAAW,MAAM,EAAE;oDAClC,OAAM;8DAEN,cAAA,6LAAC,iOAAS;wDAAC,WAAU;;;;;;;;;;;;2CAblB,MAAM,EAAE;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAyBnC;GAlEwB;;QACD,iKAAsB;;;KADrB","debugId":null}},
    {"offset": {"line": 322, "column": 0}, "map": {"version":3,"sources":["file:///Users/ramanakumar/TaskGlyph/src/components/AppNavbar.tsx"],"sourcesContent":["// src/components/AppNavbar.tsx\n\"use client\";\n\nimport { Fragment } from \"react\";\nimport Link from \"next/link\";\nimport Image from \"next/image\";\nimport { useSession, signOut } from \"next-auth/react\";\nimport { Disclosure, Menu, Transition } from \"@headlessui/react\";\nimport {\n  ChevronDownIcon,\n  ListBulletIcon,\n  PencilIcon,\n  BookOpenIcon,\n  ClockIcon,\n  UserCircleIcon,\n  HomeIcon,\n  ChartBarIcon,\n  Bars3Icon,\n  XMarkIcon,\n  ArrowRightEndOnRectangleIcon,\n} from \"@heroicons/react/24/outline\";\nimport { useTier } from \"@/lib/db/useTier\";\nimport { usePathname } from \"next/navigation\";\nimport NotificationBell from \"./NotificationBell\"; // <-- [NEW] Import the bell\n\nfunction classNames(...classes: string[]) {\n  return classes.filter(Boolean).join(\" \");\n}\n\nexport default function AppNavbar() {\n  const { data: session } = useSession();\n  const tier = useTier();\n  const pathname = usePathname();\n\n  const appLinks = [\n    { name: \"Home\", href: \"/app\", icon: HomeIcon },\n    { name: \"Tasks\", href: \"/app/tasks\", icon: ListBulletIcon },\n    { name: \"Notes\", href: \"/app/notes\", icon: PencilIcon },\n    { name: \"Diary\", href: \"/app/diary\", icon: BookOpenIcon },\n    { name: \"Pomodoro\", href: \"/app/pomodoro\", icon: ClockIcon },\n    { name: \"Dashboard\", href: \"/app/dashboard\", icon: ChartBarIcon },\n  ];\n\n  return (\n    <Disclosure\n      as=\"nav\"\n      className=\"bg-white shadow-sm border-b border-gray-200 sticky top-0 z-40\"\n    >\n      {({ open }) => (\n        <>\n          <div className=\"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8\">\n            <div className=\"flex h-16\">\n              {/* Left Side: Logo */}\n              <div className=\"flex-shrink-0 flex items-center\">\n                <Link href=\"/app\">\n                  <Image\n                    src=\"/logo.png\" // Using logo3.png\n                    alt=\"TaskGlyph Logo\"\n                    width={150}\n                    height={32}\n                    className=\"h-40 w-auto\"\n                  />\n                </Link>\n              </div>\n\n              {/* Center: App Links (Desktop) */}\n              <div className=\"hidden sm:flex flex-1 items-center justify-center space-x-8\">\n                {appLinks.map((item) => {\n                  const isActive = pathname === item.href;\n                  return (\n                    <Link\n                      key={item.name}\n                      href={item.href}\n                      className={classNames(\n                        isActive\n                          ? \"border-blue-500 text-blue-600\"\n                          : \"border-transparent text-gray-500 hover:border-gray-300 hover:text-gray-700\",\n                        \"inline-flex items-center px-1 pt-1 border-b-2 text-sm font-medium\"\n                      )}\n                      aria-current={isActive ? \"page\" : undefined}\n                    >\n                      <item.icon\n                        className={classNames(\n                          isActive ? \"text-blue-500\" : \"text-gray-400\",\n                          \"h-5 w-5 mr-1.5\"\n                        )}\n                      />\n                      {item.name}\n                    </Link>\n                  );\n                })}\n              </div>\n\n              {/* Right Side: Tier & Profile (Desktop) */}\n              <div className=\"hidden sm:ml-6 sm:flex sm:items-center flex-shrink-0\">\n                <span\n                  className={classNames(\n                    \"inline-flex items-center px-3 py-0.5 rounded-full text-sm font-medium mr-4\",\n                    tier === \"free\"\n                      ? \"bg-blue-100 text-blue-800\"\n                      : \"bg-green-100 text-green-800\"\n                  )}\n                >\n                  {tier\n                    ? `${tier.charAt(0).toUpperCase() + tier.slice(1)} Tier`\n                    : \"Loading...\"}\n                </span>\n\n                {/* --- [NEW] Notification Bell (Desktop) --- */}\n                <div className=\"mr-3\">\n                  <NotificationBell />\n                </div>\n\n                <Menu as=\"div\" className=\"relative\">\n                  <div>\n                    <Menu.Button className=\"flex items-center text-sm rounded-full hover:opacity-80 transition focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500\">\n                      <span className=\"sr-only\">Open user menu</span>\n                      {session?.user?.image ? (\n                        <Image\n                          className=\"h-9 w-9 rounded-full\"\n                          src={session.user.image}\n                          alt=\"Profile picture\"\n                          width={36}\n                          height={36}\n                        />\n                      ) : (\n                        <UserCircleIcon className=\"h-9 w-9 text-gray-400\" />\n                      )}\n                      <ChevronDownIcon className=\"h-4 w-4 text-gray-400 ml-1\" />\n                    </Menu.Button>\n                  </div>\n                  <Transition\n                    as={Fragment}\n                    enter=\"transition ease-out duration-200\"\n                    enterFrom=\"transform opacity-0 scale-95\"\n                    enterTo=\"transform opacity-100 scale-100\"\n                    leave=\"transition ease-in duration-75\"\n                    leaveFrom=\"transform opacity-100 scale-100\"\n                    leaveTo=\"transform opacity-0 scale-95\"\n                  >\n                    <Menu.Items className=\"origin-top-right absolute right-0 mt-2 w-56 rounded-md shadow-lg py-1 bg-white ring-1 ring-black ring-opacity-5 focus:outline-none\">\n                      <div className=\"px-4 py-3 border-b border-gray-100\">\n                        <p className=\"text-sm font-medium text-gray-900 truncate\">\n                          {session?.user?.name || \"User\"}\n                        </p>\n                        <p className=\"text-sm text-gray-500 truncate\">\n                          {session?.user?.email}\n                        </p>\n                      </div>\n                      <Menu.Item>\n                        {({ active }) => (\n                          <Link\n                            href=\"/app/settings\"\n                            className={classNames(\n                              active ? \"bg-gray-100\" : \"\",\n                              \"block px-4 py-2 text-sm text-gray-700\"\n                            )}\n                          >\n                            Settings\n                          </Link>\n                        )}\n                      </Menu.Item>\n                      <Menu.Item>\n                        {({ active }) => (\n                          <button\n                            onClick={() => signOut({ callbackUrl: \"/\" })}\n                            className={classNames(\n                              active ? \"bg-gray-100\" : \"\",\n                              \"w-full text-left flex items-center px-4 py-2 text-sm text-gray-700\"\n                            )}\n                          >\n                            <ArrowRightEndOnRectangleIcon className=\"h-5 w-5 mr-2\" />\n                            Sign out\n                          </button>\n                        )}\n                      </Menu.Item>\n                    </Menu.Items>\n                  </Transition>\n                </Menu>\n              </div>\n\n              {/* Mobile Menu Button */}\n              <div className=\"-mr-2 flex items-center sm:hidden\">\n                {/* --- [NEW] Notification Bell (Mobile) --- */}\n                <div className=\"mr-2\">\n                  <NotificationBell />\n                </div>\n\n                <Disclosure.Button className=\"inline-flex items-center justify-center p-2 rounded-md text-gray-400 hover:text-gray-500 hover:bg-gray-100 focus:outline-none focus:ring-2 focus:ring-inset focus:ring-blue-500\">\n                  <span className=\"sr-only\">Open main menu</span>\n                  {open ? (\n                    <XMarkIcon className=\"block h-6 w-6\" aria-hidden=\"true\" />\n                  ) : (\n                    <Bars3Icon className=\"block h-6 w-6\" aria-hidden=\"true\" />\n                  )}\n                </Disclosure.Button>\n              </div>\n            </div>\n          </div>\n\n          {/* Mobile Menu Panel (Slides down) */}\n          <Disclosure.Panel className=\"sm:hidden border-t border-gray-200\">\n            <div className=\"pt-2 pb-3 space-y-1\">\n              {appLinks.map((item) => {\n                const isActive = pathname === item.href;\n                return (\n                  <Disclosure.Button\n                    key={item.name}\n                    as={Link}\n                    href={item.href}\n                    className={classNames(\n                      isActive\n                        ? \"bg-blue-50 border-blue-500 text-blue-700\"\n                        : \"border-transparent text-gray-600 hover:bg-gray-50 hover:border-gray-300 hover:text-gray-800\",\n                      \"flex items-center pl-3 pr-4 py-2 border-l-4 text-base font-medium\"\n                    )}\n                    aria-current={isActive ? \"page\" : undefined}\n                  >\n                    <item.icon\n                      className={classNames(\n                        isActive ? \"text-blue-500\" : \"text-gray-400\",\n                        \"h-6 w-6 mr-3\"\n                      )}\n                    />\n                    {item.name}\n                  </Disclosure.Button>\n                );\n              })}\n            </div>\n            {/* Profile Section in Mobile Menu */}\n            <div className=\"pt-4 pb-3 border-t border-gray-200\">\n              <div className=\"flex items-center px-4\">\n                <div className=\"flex-shrink-0\">\n                  {session?.user?.image ? (\n                    <Image\n                      className=\"h-10 w-10 rounded-full\"\n                      src={session.user.image}\n                      alt=\"Profile picture\"\n                      width={40}\n                      height={40}\n                    />\n                  ) : (\n                    <UserCircleIcon className=\"h-10 w-10 text-gray-400\" />\n                  )}\n                </div>\n                <div className=\"ml-3\">\n                  <div className=\"text-base font-medium text-gray-800\">\n                    {session?.user?.name || \"User\"}\n                  </div>\n\n                  <div className=\"text-sm font-medium text-gray-500\">\n                    {session?.user?.email}\n                  </div>\n                </div>\n              </div>\n              <div className=\"mt-3 space-y-1\">\n                <Disclosure.Button\n                  as={Link}\n                  href=\"/app/settings\"\n                  className=\"block px-4 py-2 text-base font-medium text-gray-500 hover:text-gray-800 hover:bg-gray-100\"\n                >\n                  Settings\n                </Disclosure.Button>\n                <Disclosure.Button\n                  as=\"button\"\n                  onClick={() => signOut({ callbackUrl: \"/\" })}\n                  className=\"w-full text-left flex items-center px-4 py-2 text-base font-medium text-gray-500 hover:text-gray-800 hover:bg-gray-100\"\n                >\n                  <ArrowRightEndOnRectangleIcon className=\"h-6 w-6 mr-2\" />\n                  Sign out\n                </Disclosure.Button>\n              </div>\n            </div>\n          </Disclosure.Panel>\n        </>\n      )}\n    </Disclosure>\n  );\n}\n"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 887, "column": 0}, "map": {"version":3,"sources":["file:///Users/ramanakumar/TaskGlyph/src/lib/context/TaskSidebarContext.tsx"],"sourcesContent":["// src/lib/context/TaskDetailContext.tsx\n\"use client\";\n\nimport { createContext, useContext, useState, ReactNode } from \"react\";\nimport { Task } from \"@/lib/db/clientDb\";\n\ntype TaskDetailContextType = {\n  selectedTask: Task | null;\n  selectTask: (task: Task | null) => void;\n};\n\nconst TaskDetailContext = createContext<TaskDetailContextType | undefined>(\n  undefined\n);\n\nexport function TaskDetailProvider({ children }: { children: ReactNode }) {\n  const [selectedTask, setSelectedTask] = useState<Task | null>(null);\n\n  const selectTask = (task: Task | null) => {\n    setSelectedTask(task);\n  };\n\n  return (\n    <TaskDetailContext.Provider value={{ selectedTask, selectTask }}>\n      {children}\n    </TaskDetailContext.Provider>\n  );\n}\n\nexport function useTaskDetail() {\n  const context = useContext(TaskDetailContext);\n  if (!context) {\n    throw new Error(\"useTaskDetail must be used within a TaskDetailProvider\");\n  }\n  return context;\n}\n"],"names":[],"mappings":"AAAA,wCAAwC;;;;;;;;AAGxC;;;AAFA;;AAUA,MAAM,kCAAoB,IAAA,8KAAa,EACrC;AAGK,SAAS,mBAAmB,KAAqC;QAArC,EAAE,QAAQ,EAA2B,GAArC;;IACjC,MAAM,CAAC,cAAc,gBAAgB,GAAG,IAAA,yKAAQ,EAAc;IAE9D,MAAM,aAAa,CAAC;QAClB,gBAAgB;IAClB;IAEA,qBACE,6LAAC,kBAAkB,QAAQ;QAAC,OAAO;YAAE;YAAc;QAAW;kBAC3D;;;;;;AAGP;GAZgB;KAAA;AAcT,SAAS;;IACd,MAAM,UAAU,IAAA,2KAAU,EAAC;IAC3B,IAAI,CAAC,SAAS;QACZ,MAAM,IAAI,MAAM;IAClB;IACA,OAAO;AACT;IANgB","debugId":null}},
    {"offset": {"line": 940, "column": 0}, "map": {"version":3,"sources":["file:///Users/ramanakumar/TaskGlyph/src/lib/db/useTasks.ts"],"sourcesContent":["\"use client\";\n\nimport { useCallback, useMemo } from \"react\";\nimport db, {\n  Task,\n  OperationType,\n  EntityType,\n  Priority,\n  RecurringSchedule,\n} from \"./clientDb\";\nimport { v4 as uuidv4 } from \"uuid\";\nimport { useTier } from \"./useTier\";\nimport { triggerSync } from \"../sync/syncService\";\nimport { useLiveQuery } from \"dexie-react-hooks\"; // For real-time updates\n\n// [UPDATED] Added meetLink to the creation options\ntype TaskCreationOptions = {\n  projectId?: string | null;\n  parentId?: string | null;\n  notes?: string | null;\n  dueDate?: number | null;\n  priority?: Priority;\n  tags?: string[];\n  recurringSchedule?: RecurringSchedule;\n  reminderAt?: number | null;\n  meetLink?: string | null; // <-- [NEW] Add meetLink\n};\n\nexport function useTasks() {\n  const allTasks = useLiveQuery(() => db.tasks.toArray(), []);\n\n  // âœ… 2. STABILIZE the 'tasks' array with useMemo\n  // This prevents all child hooks (addTask, etc.) from re-rendering\n  const tasks = useMemo(() => allTasks || [], [allTasks]);\n\n  const tier = useTier();\n  const canSync = !!tier;\n\n  /**\n   * Creates a new task and (if free tier) checks 21-task limit.\n   */\n  const addTask = useCallback(\n    async (title: string, options: TaskCreationOptions = {}) => {\n      // 1. ENFORCE 21-TASK LIMIT\n      if (tier === \"free\") {\n        // Use allTasks.length here to get the most current count\n        const count = allTasks?.length || 0;\n        if (count >= 21) {\n          alert(\n            \"Free Plan Limit Reached\\n\\nYou have reached the 21-task limit for the free plan. Please upgrade for unlimited tasks.\"\n          );\n          return; // Stop execution\n        }\n      }\n\n      // 2. CREATE THE FULL TASK OBJECT\n      const now = Date.now();\n      const newTask: Task = {\n        id: uuidv4(),\n        title: title.trim(),\n        completed: false,\n        createdAt: now,\n        updatedAt: now,\n        projectId: options.projectId || null,\n        parentId: options.parentId || null,\n        notes: options.notes || null,\n        dueDate: options.dueDate || null,\n        priority: options.priority || \"none\",\n        tags: options.tags || [],\n        recurringSchedule: options.recurringSchedule || \"none\",\n        reminderAt: options.reminderAt || null,\n\n        // --- [NEW] Add defaults for reminder fields ---\n        meetLink: options.meetLink || null,\n        reminder_30_sent: false,\n        reminder_20_sent: false,\n        reminder_10_sent: false,\n      };\n\n      // Add to local DB (useLiveQuery will auto-update state)\n      await db.tasks.add(newTask);\n\n      // Add to sync outbox\n      if (canSync) {\n        const syncOp = {\n          id: uuidv4(),\n          entityType: \"task\" as EntityType,\n          operation: \"create\" as OperationType,\n          payload: newTask, // Send the full task object\n          timestamp: now,\n        };\n        await db.syncOutbox.add(syncOp);\n        console.log(\"ðŸ“¤ Added CREATE task to sync outbox\", syncOp);\n        triggerSync(); // Poke the sync service\n      }\n      return newTask;\n    },\n    [canSync, tier, allTasks] // Use allTasks for dependency\n  );\n\n  /**\n   * Deletes a task AND all its subtasks (recursively).\n   */\n  const deleteTask = useCallback(\n    async (taskId: string) => {\n      // CASCADING DELETE\n      const idsToDelete: string[] = [taskId];\n      const findChildren = (parentId: string) => {\n        // âœ… Use 'tasks' (memoized) or 'allTasks' here\n        const children = (allTasks || []).filter(\n          (t: Task) => t.parentId === parentId\n        );\n        for (const child of children) {\n          idsToDelete.push(child.id);\n          findChildren(child.id); // Recurse\n        }\n      };\n      findChildren(taskId); // Find all descendants\n\n      // Delete from local DB (useLiveQuery will auto-update state)\n      await db.tasks.bulkDelete(idsToDelete);\n\n      // Add ALL deletes to sync outbox\n      // --- [FIXED] Corrected typo from 'canSunc' to 'canSync' ---\n      if (canSync) {\n        const now = Date.now();\n        const syncOps = idsToDelete.map((id) => ({\n          id: uuidv4(),\n          entityType: \"task\" as EntityType,\n          operation: \"delete\" as OperationType,\n          payload: { id }, // Only need ID for delete\n          timestamp: now,\n        }));\n        await db.syncOutbox.bulkAdd(syncOps);\n        console.log(\n          `ðŸ“¤ Added ${idsToDelete.length} DELETE tasks to sync outbox`\n        );\n        triggerSync();\n      }\n    },\n    [canSync, allTasks] // Use allTasks for dependency\n  );\n\n  /**\n   * Updates any field(s) on a task.\n   */\n  const updateTask = useCallback(\n    async (id: string, updates: Partial<Omit<Task, \"id\" | \"createdAt\">>) => {\n      const updatedAt = Date.now();\n      const finalUpdates = { ...updates, updatedAt };\n\n      // Update local DB (useLiveQuery will auto-update state)\n      await db.tasks.update(id, finalUpdates);\n\n      // Add to sync outbox\n      if (canSync) {\n        // We MUST send the full task object to the API\n        const existingTask = (allTasks || []).find((t: Task) => t.id === id);\n        if (existingTask) {\n          const updatedTask: Task = { ...existingTask, ...finalUpdates };\n          const syncOp = {\n            id: uuidv4(),\n            entityType: \"task\" as EntityType,\n            operation: \"update\" as OperationType,\n            payload: updatedTask, // Send the *full* updated task\n            timestamp: updatedAt,\n          };\n          await db.syncOutbox.add(syncOp);\n          console.log(\"ðŸ“¤ Added UPDATE task to sync outbox\", syncOp);\n          triggerSync();\n        }\n      }\n    },\n    [canSync, allTasks] // Use allTasks for dependency\n  );\n\n  // Return the live tasks array and the new C-U-D functions\n  return {\n    tasks, // Return the memoized 'tasks' for the UI\n    addTask,\n    updateTask,\n    deleteTask,\n  };\n}\n"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 1140, "column": 0}, "map": {"version":3,"sources":["file:///Users/ramanakumar/TaskGlyph/src/components/StylishButton.tsx"],"sourcesContent":["\"use client\";\n\nexport default function StylishButton({\n  onClick,\n  children,\n  type = \"button\",\n  variant = \"primary\",\n  disabled = false,\n  className = \"\",\n  icon,\n}: {\n  onClick?: () => void;\n  children: React.ReactNode;\n  type?: \"button\" | \"submit\";\n  variant?: \"primary\" | \"secondary\";\n  disabled?: boolean;\n  className?: string;\n  icon?: React.ElementType; // Icon component\n}) {\n  const baseStyle =\n    \"px-4 py-2 text-sm font-medium rounded-md flex items-center justify-center gap-2 transition-all duration-200 ease-in-out focus:outline-none focus:ring-2 focus:ring-offset-2\";\n\n  const primaryStyle =\n    \"bg-gray-900 text-white hover:bg-gray-700 focus:ring-gray-900\";\n\n  const secondaryStyle =\n    \"bg-gray-100 text-gray-700 hover:bg-gray-200 focus:ring-gray-400\";\n\n  const disabledStyle = \"opacity-50 cursor-not-allowed\";\n\n  const IconComponent = icon;\n\n  return (\n    <button\n      type={type}\n      onClick={onClick}\n      disabled={disabled}\n      className={`\n        ${baseStyle}\n        ${variant === \"primary\" ? primaryStyle : secondaryStyle}\n        ${disabled ? disabledStyle : \"\"}\n        ${className}\n      `}\n    >\n      {IconComponent && <IconComponent className=\"w-4 h-4\" />}\n      {children}\n    </button>\n  );\n}\n"],"names":[],"mappings":";;;;;AAAA;;AAEe,SAAS,cAAc,KAgBrC;QAhBqC,EACpC,OAAO,EACP,QAAQ,EACR,OAAO,QAAQ,EACf,UAAU,SAAS,EACnB,WAAW,KAAK,EAChB,YAAY,EAAE,EACd,IAAI,EASL,GAhBqC;IAiBpC,MAAM,YACJ;IAEF,MAAM,eACJ;IAEF,MAAM,iBACJ;IAEF,MAAM,gBAAgB;IAEtB,MAAM,gBAAgB;IAEtB,qBACE,6LAAC;QACC,MAAM;QACN,SAAS;QACT,UAAU;QACV,WAAW,AAAC,aAER,OADA,WAAU,cAEV,OADA,YAAY,YAAY,eAAe,gBAAe,cAEtD,OADA,WAAW,gBAAgB,IAAG,cACpB,OAAV,WAAU;;YAGb,+BAAiB,6LAAC;gBAAc,WAAU;;;;;;YAC1C;;;;;;;AAGP;KA9CwB","debugId":null}},
    {"offset": {"line": 1185, "column": 0}, "map": {"version":3,"sources":["file:///Users/ramanakumar/TaskGlyph/src/components/SubtaskItem.tsx"],"sourcesContent":["\"use client\";\n\nimport { useState } from \"react\";\nimport { useTasks } from \"@/lib/db/useTasks\";\nimport { Task } from \"@/lib/db/clientDb\";\nimport { motion } from \"framer-motion\";\nimport { CheckIcon, TrashIcon } from \"@heroicons/react/24/outline\";\n\nexport default function SubtaskItem({ task }: { task: Task }) {\n  const { updateTask, deleteTask } = useTasks();\n  const [isEditing, setIsEditing] = useState(false);\n  const [title, setTitle] = useState(task.title);\n\n  const handleToggle = () =>\n    updateTask(task.id, { completed: !task.completed, updatedAt: Date.now() });\n\n  const handleTitleBlur = (e: React.FocusEvent<HTMLInputElement>) => {\n    setIsEditing(false);\n    const newTitle = e.target.value.trim();\n    if (newTitle && newTitle !== task.title)\n      updateTask(task.id, { title: newTitle });\n    else setTitle(task.title);\n  };\n\n  const handleTitleKeyDown = (e: React.KeyboardEvent<HTMLInputElement>) => {\n    if (e.key === \"Enter\") e.currentTarget.blur();\n    if (e.key === \"Escape\") {\n      setIsEditing(false);\n      setTitle(task.title);\n      e.currentTarget.blur();\n    }\n  };\n\n  return (\n    <motion.li\n      layout\n      initial={{ opacity: 0 }}\n      animate={{ opacity: 1 }}\n      exit={{ opacity: 0 }}\n      className=\"group flex items-center gap-2 py-2 pl-8 pr-4 transition-colors duration-150 hover:bg-gray-50\"\n    >\n      <button\n        onClick={handleToggle}\n        className={`flex-shrink-0 w-4 h-4 rounded-full border-2 transition-all duration-150 flex items-center justify-center ${\n          task.completed\n            ? \"bg-gray-900 border-gray-900\"\n            : \"border-gray-400 hover:border-gray-700\"\n        }`}\n      >\n        {task.completed && (\n          <motion.div\n            initial={{ scale: 0 }}\n            animate={{ scale: 1 }}\n            transition={{ duration: 0.2 }}\n          >\n            <CheckIcon className=\"w-3 h-3 text-white\" />\n          </motion.div>\n        )}\n      </button>\n      <div className=\"flex-1\">\n        {isEditing ? (\n          <input\n            type=\"text\"\n            value={title}\n            onChange={(e) => setTitle(e.target.value)}\n            onBlur={handleTitleBlur}\n            onKeyDown={handleTitleKeyDown}\n            autoFocus\n            className=\"w-full text-sm font-medium text-gray-800 outline-none ring-1 ring-gray-900 rounded px-1 -mx-1 bg-white\"\n          />\n        ) : (\n          <span\n            onClick={() => setIsEditing(true)}\n            className={`text-sm outline-none cursor-pointer rounded px-1 -mx-1 transition-colors duration-150 ${\n              task.completed\n                ? \"line-through text-gray-500\"\n                : \"text-gray-800 hover:bg-gray-100\"\n            }`}\n          >\n            {task.title}\n          </span>\n        )}\n      </div>\n      <button\n        onClick={() => deleteTask(task.id)}\n        className=\"p-1 text-gray-400 hover:text-red-600 rounded opacity-0 group-hover:opacity-100 transition-opacity\"\n        title=\"Delete subtask\"\n      >\n        <TrashIcon className=\"h-3 w-3\" />\n      </button>\n    </motion.li>\n  );\n}\n"],"names":[],"mappings":";;;;;AAEA;AACA;AAEA;AACA;AAAA;;;AANA;;;;;AAQe,SAAS,YAAY,KAAwB;QAAxB,EAAE,IAAI,EAAkB,GAAxB;;IAClC,MAAM,EAAE,UAAU,EAAE,UAAU,EAAE,GAAG,IAAA,2IAAQ;IAC3C,MAAM,CAAC,WAAW,aAAa,GAAG,IAAA,yKAAQ,EAAC;IAC3C,MAAM,CAAC,OAAO,SAAS,GAAG,IAAA,yKAAQ,EAAC,KAAK,KAAK;IAE7C,MAAM,eAAe,IACnB,WAAW,KAAK,EAAE,EAAE;YAAE,WAAW,CAAC,KAAK,SAAS;YAAE,WAAW,KAAK,GAAG;QAAG;IAE1E,MAAM,kBAAkB,CAAC;QACvB,aAAa;QACb,MAAM,WAAW,EAAE,MAAM,CAAC,KAAK,CAAC,IAAI;QACpC,IAAI,YAAY,aAAa,KAAK,KAAK,EACrC,WAAW,KAAK,EAAE,EAAE;YAAE,OAAO;QAAS;aACnC,SAAS,KAAK,KAAK;IAC1B;IAEA,MAAM,qBAAqB,CAAC;QAC1B,IAAI,EAAE,GAAG,KAAK,SAAS,EAAE,aAAa,CAAC,IAAI;QAC3C,IAAI,EAAE,GAAG,KAAK,UAAU;YACtB,aAAa;YACb,SAAS,KAAK,KAAK;YACnB,EAAE,aAAa,CAAC,IAAI;QACtB;IACF;IAEA,qBACE,6LAAC,uMAAM,CAAC,EAAE;QACR,MAAM;QACN,SAAS;YAAE,SAAS;QAAE;QACtB,SAAS;YAAE,SAAS;QAAE;QACtB,MAAM;YAAE,SAAS;QAAE;QACnB,WAAU;;0BAEV,6LAAC;gBACC,SAAS;gBACT,WAAW,AAAC,4GAIX,OAHC,KAAK,SAAS,GACV,gCACA;0BAGL,KAAK,SAAS,kBACb,6LAAC,uMAAM,CAAC,GAAG;oBACT,SAAS;wBAAE,OAAO;oBAAE;oBACpB,SAAS;wBAAE,OAAO;oBAAE;oBACpB,YAAY;wBAAE,UAAU;oBAAI;8BAE5B,cAAA,6LAAC,iOAAS;wBAAC,WAAU;;;;;;;;;;;;;;;;0BAI3B,6LAAC;gBAAI,WAAU;0BACZ,0BACC,6LAAC;oBACC,MAAK;oBACL,OAAO;oBACP,UAAU,CAAC,IAAM,SAAS,EAAE,MAAM,CAAC,KAAK;oBACxC,QAAQ;oBACR,WAAW;oBACX,SAAS;oBACT,WAAU;;;;;yCAGZ,6LAAC;oBACC,SAAS,IAAM,aAAa;oBAC5B,WAAW,AAAC,yFAIX,OAHC,KAAK,SAAS,GACV,+BACA;8BAGL,KAAK,KAAK;;;;;;;;;;;0BAIjB,6LAAC;gBACC,SAAS,IAAM,WAAW,KAAK,EAAE;gBACjC,WAAU;gBACV,OAAM;0BAEN,cAAA,6LAAC,iOAAS;oBAAC,WAAU;;;;;;;;;;;;;;;;;AAI7B;GApFwB;;QACa,2IAAQ;;;KADrB","debugId":null}},
    {"offset": {"line": 1337, "column": 0}, "map": {"version":3,"sources":["file:///Users/ramanakumar/TaskGlyph/src/lib/context/TaskDetailsPanel.tsx"],"sourcesContent":["/* eslint-disable @typescript-eslint/no-explicit-any */\n\"use client\";\n\nimport { Fragment, useState, useEffect, FormEvent, useMemo } from \"react\";\nimport { Dialog, Transition, Popover } from \"@headlessui/react\";\nimport {\n  XMarkIcon,\n  FlagIcon,\n  ChatBubbleBottomCenterTextIcon,\n  TagIcon,\n  ViewColumnsIcon as SubtaskIcon,\n  BellIcon,\n  ArrowPathIcon, // For recurring\n  TrashIcon,\n  ChevronLeftIcon,\n  ChevronRightIcon,\n  PlusIcon,\n  XCircleIcon,\n  CheckIcon,\n  ArrowDownOnSquareIcon, // For Save\n  ArrowUturnLeftIcon, // For Reset\n  CalendarIcon, // For Due Date\n} from \"@heroicons/react/24/outline\";\nimport { motion, AnimatePresence } from \"framer-motion\";\nimport { useTaskDetail } from \"@/lib/context/TaskSidebarContext\";\nimport { useTasks } from \"@/lib/db/useTasks\";\nimport { Task, Priority, RecurringSchedule } from \"@/lib/db/clientDb\";\nimport DatePicker from \"react-datepicker\";\nimport \"react-datepicker/dist/react-datepicker.css\";\nimport \"@/components/DatePicker.css\"; // Your custom styles\n\n// Import the new components\nimport StylishButton from \"@/components/StylishButton\"; // Corrected Path\nimport SubtaskItem from \"@/components/SubtaskItem\"; // Corrected Path\nimport { format } from \"date-fns\";\n\n// A type for the task properties we want to edit locally\ntype LocalTaskDetails = Pick<\n  Task,\n  \"title\" | \"priority\" | \"dueDate\" | \"reminderAt\"\n> & {\n  // âœ… FIX 2: Rename 'recurring' to 'recurringSchedule' to match the db\n  recurringSchedule: RecurringSchedule;\n};\n\n// --- Main Panel ---\ntype RecurringOption = RecurringSchedule;\n\nexport default function TaskDetailsPanel() {\n  const { selectedTask: selectedTaskFromContext, selectTask } = useTaskDetail();\n  const { tasks, addTask, updateTask, deleteTask } = useTasks();\n\n  const selectedTask = useMemo(() => {\n    if (!selectedTaskFromContext) return null;\n    return (\n      tasks?.find((t: Task) => t.id === selectedTaskFromContext.id) || null\n    );\n  }, [tasks, selectedTaskFromContext]);\n\n  // --- LOCAL STATE ---\n  const [localTask, setLocalTask] = useState<LocalTaskDetails | null>(null);\n  const [notes, setNotes] = useState(\"\");\n  const [newTag, setNewTag] = useState(\"\");\n  const [newSubtaskTitle, setNewSubtaskTitle] = useState(\"\");\n  const [isExpanded, setIsExpanded] = useState(true);\n  const [isSavingDetails, setIsSavingDetails] = useState(false);\n\n  const subtasks = useMemo(() => {\n    if (!selectedTask) return [];\n    return tasks\n      .filter((t: Task) => t.parentId === selectedTask.id)\n      .sort((a, b) => a.createdAt - b.createdAt);\n  }, [tasks, selectedTask]);\n\n  // EFFECT: Load task data into local state when task changes\n  useEffect(() => {\n    if (selectedTask) {\n      setLocalTask({\n        title: selectedTask.title,\n        priority: selectedTask.priority,\n        dueDate: selectedTask.dueDate,\n        reminderAt: selectedTask.reminderAt,\n        // âœ… FIX 2: Read from 'recurringSchedule'\n        recurringSchedule: selectedTask.recurringSchedule || \"none\",\n      });\n      setNotes(selectedTask.notes || \"\");\n    } else {\n      setLocalTask(null);\n      setNotes(\"\");\n    }\n  }, [selectedTask]);\n\n  if (!selectedTask || !localTask) return null; // Wait for state to be ready\n\n  // --- LOCAL Handlers (updates state) ---\n  const handleClose = () => selectTask(null);\n\n  const handleTitleChange = (e: React.ChangeEvent<HTMLInputElement>) =>\n    setLocalTask({ ...localTask, title: e.target.value });\n\n  const cyclePriority = () => {\n    const priorities: Priority[] = [\"none\", \"low\", \"medium\", \"high\"];\n    const idx = priorities.indexOf(localTask.priority);\n    const next = priorities[(idx + 1) % priorities.length];\n    setLocalTask({ ...localTask, priority: next });\n  };\n\n  const handleSetDueDate = (date: Date | null) =>\n    setLocalTask({ ...localTask, dueDate: date ? date.getTime() : null });\n\n  const handleSetReminder = (date: Date | null) =>\n    setLocalTask({ ...localTask, reminderAt: date ? date.getTime() : null });\n\n  const handleSetRecurring = (option: RecurringOption) =>\n    // âœ… FIX 2: Update 'recurringSchedule'\n    setLocalTask({ ...localTask, recurringSchedule: option });\n\n  // --- SAVE Handlers (updates DB) ---\n\n  const handleSaveNotes = async () => {\n    if (notes !== (selectedTask.notes || \"\")) {\n      await updateTask(selectedTask.id, { notes });\n    }\n  };\n\n  const handleSaveDetails = async () => {\n    if (!localTask) return;\n    setIsSavingDetails(true);\n\n    // âœ… FIX 2: We can now spread localTask, as its shape matches the db\n    await updateTask(selectedTask.id, {\n      ...localTask,\n      title: localTask.title.trim() || \"Untitled Task\",\n    });\n\n    setTimeout(() => setIsSavingDetails(false), 1000);\n  };\n\n  const handleResetDetails = () => {\n    setLocalTask({\n      title: selectedTask.title,\n      priority: selectedTask.priority,\n      dueDate: selectedTask.dueDate,\n      reminderAt: selectedTask.reminderAt,\n      // âœ… FIX 2: Read from 'recurringSchedule'\n      recurringSchedule: selectedTask.recurringSchedule || \"none\",\n    });\n    setNotes(selectedTask.notes || \"\");\n  };\n\n  const handleAddTag = (e: FormEvent) => {\n    e.preventDefault();\n    const tag = newTag.trim();\n    if (tag && !selectedTask.tags.includes(tag))\n      updateTask(selectedTask.id, { tags: [...selectedTask.tags, tag] });\n    setNewTag(\"\");\n  };\n\n  const handleRemoveTag = (tag: string) =>\n    updateTask(selectedTask.id, {\n      tags: selectedTask.tags.filter((t) => t !== tag),\n    });\n\n  const handleAddSubtask = (e: FormEvent) => {\n    e.preventDefault();\n    if (!newSubtaskTitle.trim()) return;\n    addTask(newSubtaskTitle, {\n      parentId: selectedTask.id,\n      projectId: selectedTask.projectId,\n    });\n    setNewSubtaskTitle(\"\");\n  };\n\n  const handleDeleteTask = () => {\n    if (confirm(\"Delete this task and all its subtasks?\")) {\n      deleteTask(selectedTask.id);\n      handleClose();\n    }\n  };\n\n  // âœ… FIX 1: Wrap 'localTask.reminderAt' (which is a string) with Number()\n  const reminderDate = localTask.reminderAt\n    ? new Date(Number(localTask.reminderAt))\n    : null;\n\n  const recurringOptions: RecurringOption[] = [\n    \"none\",\n    \"daily\",\n    \"weekly\",\n    \"monthly\",\n  ];\n  // âœ… FIX 2: Read from 'recurringSchedule'\n  const currentRecurring = localTask.recurringSchedule || \"none\";\n\n  const detailsChanged =\n    localTask.title !== selectedTask.title ||\n    localTask.priority !== selectedTask.priority ||\n    localTask.dueDate !== selectedTask.dueDate ||\n    localTask.reminderAt !== selectedTask.reminderAt ||\n    // âœ… FIX 2: Compare 'recurringSchedule'\n    localTask.recurringSchedule !== (selectedTask.recurringSchedule || \"none\");\n\n  const notesChanged = notes !== (selectedTask.notes || \"\");\n\n  // --- Helper for styling Popover buttons ---\n  const PopoverButton = ({\n    icon: Icon,\n    label,\n    value,\n    onClick,\n  }: {\n    icon: React.ElementType;\n    label: string;\n    value?: string | null;\n    onClick?: () => void;\n  }) => (\n    <div className=\"flex items-center justify-between\">\n      <span className=\"text-sm font-medium text-gray-700\">{label}</span>\n      <button\n        onClick={onClick}\n        className=\"flex items-center gap-1.5 text-sm text-gray-600 hover:text-gray-900 p-1.5 rounded-md hover:bg-gray-100 transition-colors\"\n      >\n        <Icon\n          className={`w-4 h-4 ${value ? \"text-gray-700\" : \"text-gray-400\"}`}\n        />\n        <span className={value ? \"text-gray-900\" : \"text-gray-500\"}>\n          {value || `Set ${label}`}\n        </span>\n      </button>\n    </div>\n  );\n\n  return (\n    <Transition.Root show={!!selectedTask} as={Fragment}>\n      <Dialog as=\"div\" className=\"relative z-50\" onClose={handleClose}>\n        {/* Overlay - No blur */}\n        <Transition.Child\n          as={Fragment}\n          enter=\"ease-out duration-300\"\n          enterFrom=\"opacity-0\"\n          enterTo=\"opacity-100\"\n          leave=\"ease-in duration-200\"\n          leaveFrom=\"opacity-100\"\n          leaveTo=\"opacity-0\"\n        >\n          <div className=\"fixed inset-0 bg-black/30\" />\n        </Transition.Child>\n\n        {/* Drawer on Right */}\n        <div className=\"fixed inset-0 overflow-hidden\">\n          <div className=\"absolute inset-0 overflow-hidden\">\n            <div className=\"pointer-events-none fixed inset-y-0 right-0 flex max-w-full justify-end\">\n              <Transition.Child\n                as={Fragment}\n                enter=\"transform transition ease-in-out duration-300 sm:duration-500\"\n                enterFrom=\"translate-x-full\"\n                enterTo=\"translate-x-0\"\n                leave=\"transform transition ease-in-out duration-300 sm:duration-500\"\n                leaveFrom=\"translate-x-0\"\n                leaveTo=\"translate-x-full\"\n              >\n                {/* --- CORRECT ARCHITECTURE --- */}\n                <Dialog.Panel className=\"pointer-events-auto flex flex-col\">\n                  <motion.div\n                    animate={{\n                      width: isExpanded ? \"36rem\" : \"24rem\", // 576px / 384px\n                    }}\n                    transition={{ type: \"spring\", stiffness: 260, damping: 28 }}\n                    // --- Scroll is on the CONTENT, not the panel ---\n                    className=\"flex h-full flex-col bg-white shadow-2xl ring-1 ring-gray-900/5\"\n                  >\n                    {/* Header */}\n                    <div className=\"bg-white p-4 flex items-center justify-between flex-shrink-0\">\n                      <button\n                        onClick={() => setIsExpanded(!isExpanded)}\n                        className=\"p-2 rounded-full text-gray-500 hover:bg-gray-100 transition-colors\"\n                        title={isExpanded ? \"Collapse\" : \"Expand\"}\n                      >\n                        {isExpanded ? (\n                          <ChevronRightIcon className=\"w-5 h-5\" />\n                        ) : (\n                          <ChevronLeftIcon className=\"w-5 h-5\" />\n                        )}\n                      </button>\n                      <button\n                        type=\"button\"\n                        className=\"rounded-md p-2 text-gray-500 hover:text-gray-900 hover:bg-gray-100 transition-colors\"\n                        onClick={handleClose}\n                      >\n                        <XMarkIcon className=\"h-5 w-5\" />\n                      </button>\n                    </div>\n\n                    {/* Content - overflow-y-auto is here */}\n                    <div className=\"flex-1 px-6 pt-2 space-y-5 pb-6 overflow-y-auto\">\n                      {/* Title Section */}\n                      <div className=\"py-2\">\n                        <input\n                          type=\"text\"\n                          name=\"title\"\n                          value={localTask.title}\n                          onChange={handleTitleChange}\n                          className=\"w-full text-3xl font-bold text-gray-900 bg-transparent border-none outline-none focus:ring-0 focus:border-transparent p-0 placeholder-gray-400\"\n                          placeholder=\"Task Title\"\n                        />\n                      </div>\n\n                      <hr className=\"border-gray-100\" />\n\n                      {/* --- PROPERTY GRID --- */}\n                      <div\n                        className={`grid ${\n                          isExpanded ? \"grid-cols-2\" : \"grid-cols-1\"\n                        } gap-x-6 gap-y-3 py-3`}\n                      >\n                        {/* Col 1 */}\n                        <div className=\"space-y-3\">\n                          <PopoverButton\n                            label=\"Priority\"\n                            icon={FlagIcon}\n                            value={localTask.priority}\n                            onClick={cyclePriority}\n                          />\n\n                          {/* --- RECURRING POPOVER --- */}\n                          <div className=\"flex items-center justify-between\">\n                            <span className=\"text-sm font-medium text-gray-700\">\n                              Recurring\n                            </span>\n                            <Popover className=\"relative\">\n                              {({ close }) => (\n                                <>\n                                  <Popover.Button className=\"flex items-center gap-1.5 text-sm text-gray-600 hover:text-gray-900 p-1.5 rounded-md hover:bg-gray-100 transition-colors\">\n                                    <ArrowPathIcon\n                                      className={`w-4 h-4 ${\n                                        currentRecurring !== \"none\"\n                                          ? \"text-gray-700\"\n                                          : \"text-gray-400\"\n                                      }`}\n                                    />\n                                    <span\n                                      className={\n                                        currentRecurring !== \"none\"\n                                          ? \"text-gray-900 capitalize\"\n                                          : \"text-gray-500\"\n                                      }\n                                    >\n                                      {currentRecurring === \"none\"\n                                        ? \"Set Recurring\"\n                                        : currentRecurring}\n                                    </span>\n                                  </Popover.Button>\n                                  {/* --- Removed the broken Popover.Portal --- */}\n                                  <Transition\n                                    as={Fragment}\n                                    enter=\"transition duration-200\"\n                                    enterFrom=\"opacity-0 translate-y-1\"\n                                    enterTo=\"opacity-100 translate-y-0\"\n                                    leave=\"transition duration-150\"\n                                    leaveFrom=\"opacity-100 translate-y-0\"\n                                    leaveTo=\"opacity-0 translate-y-1\"\n                                  >\n                                    <Popover.Panel className=\"absolute z-10 mt-3 w-48 left-0\">\n                                      <div className=\"overflow-hidden rounded-lg shadow-lg ring-1 ring-black/5 bg-white\">\n                                        <div className=\"relative flex flex-col p-1\">\n                                          {recurringOptions.map((option) => (\n                                            <button\n                                              key={option}\n                                              onClick={() => {\n                                                handleSetRecurring(option);\n                                                close();\n                                              }}\n                                              className={`w-full text-left px-3 py-2 rounded text-sm capitalize flex items-center justify-between ${\n                                                currentRecurring === option\n                                                  ? \"bg-gray-900 text-white\"\n                                                  : \"text-gray-900 hover:bg-gray-100 transition-colors\"\n                                              }`}\n                                            >\n                                              {option === \"none\"\n                                                ? \"No Repeat\"\n                                                : option}\n                                              {currentRecurring === option && (\n                                                <CheckIcon className=\"w-4 h-4\" />\n                                              )}\n                                            </button>\n                                          ))}\n                                        </div>\n                                      </div>\n                                    </Popover.Panel>\n                                  </Transition>\n                                </>\n                              )}\n                            </Popover>\n                          </div>\n                        </div>\n                        {/* Col 2 */}\n                        <div className=\"space-y-3\">\n                          {/* --- \"DUE DATE\" --- */}\n                          <div className=\"flex items-center justify-between\">\n                            <span className=\"text-sm font-medium text-gray-700\">\n                              Due Date\n                            </span>\n                            <Popover className=\"relative\">\n                              {({ close }) => (\n                                <>\n                                  <Popover.Button className=\"flex items-center gap-1.5 text-sm text-gray-600 hover:text-gray-900 p-1.5 rounded-md hover:bg-gray-100 transition-colors\">\n                                    <CalendarIcon\n                                      className={`w-4 h-4 ${\n                                        localTask.dueDate\n                                          ? \"text-gray-700\"\n                                          : \"text-gray-400\"\n                                      }`}\n                                    />\n                                    <span\n                                      className={\n                                        localTask.dueDate\n                                          ? \"text-gray-900\"\n                                          : \"text-gray-500\"\n                                      }\n                                    >\n                                      {/* âœ… FIX 1: Wrap 'localTask.dueDate' (string) with Number() */}\n                                      {localTask.dueDate\n                                        ? format(\n                                            Number(localTask.dueDate),\n                                            \"MMM d\"\n                                          )\n                                        : \"Set date\"}\n                                    </span>\n                                  </Popover.Button>\n                                  {/* --- Removed the broken Popover.Portal --- */}\n                                  <Transition\n                                    as={Fragment}\n                                    enter=\"transition duration-200\"\n                                    enterFrom=\"opacity-0 translate-y-1\"\n                                    enterTo=\"opacity-100 translate-y-0\"\n                                    leave=\"transition duration-150\"\n                                    leaveFrom=\"opacity-100 translate-y-0\"\n                                    leaveTo=\"opacity-0 translate-y-1\"\n                                  >\n                                    <Popover.Panel className=\"absolute z-10 mt-3 right-0\">\n                                      <div className=\"bg-white p-3 shadow-lg rounded-lg ring-1 ring-black/5\">\n                                        <DatePicker\n                                          // âœ… FIX 1: Wrap 'localTask.dueDate' (string) with Number()\n                                          selected={\n                                            localTask.dueDate\n                                              ? new Date(\n                                                  Number(localTask.dueDate)\n                                                )\n                                              : null\n                                          }\n                                          onChange={(date) => {\n                                            handleSetDueDate(date);\n                                            close();\n                                          }}\n                                          inline\n                                          portalId=\"root\" // <-- FIX: Add portal\n                                          calendarClassName={\n                                            !isExpanded\n                                              ? \"datepicker-collapsed\"\n                                              : \"\"\n                                          }\n                                        />\n                                      </div>\n                                    </Popover.Panel>\n                                  </Transition>\n                                </>\n                              )}\n                            </Popover>\n                          </div>\n\n                          {/* --- \"REMINDER\" --- */}\n                          <div className=\"flex items-center justify-between\">\n                            <span className=\"text-sm font-medium text-gray-700\">\n                              Reminder\n                            </span>\n                            <Popover className=\"relative\">\n                              <Popover.Button className=\"flex items-center gap-1.5 text-sm text-gray-600 hover:text-gray-900 p-1.5 rounded-md hover:bg-gray-100 transition-colors\">\n                                <BellIcon\n                                  className={`w-4 h-4 ${\n                                    reminderDate\n                                      ? \"text-gray-700\"\n                                      : \"text-gray-400\"\n                                  }`}\n                                />\n                                <span\n                                  className={\n                                    reminderDate\n                                      ? \"text-gray-900\"\n                                      : \"text-gray-500\"\n                                  }\n                                >\n                                  {/* This line (476) is now fixed because 'reminderDate' is created correctly */}\n                                  {reminderDate\n                                    ? format(reminderDate, \"MMM d, p\")\n                                    : \"Add Reminder\"}\n                                </span>\n                              </Popover.Button>\n                              {/* --- Removed the broken Popover.Portal --- */}\n                              <Transition\n                                as={Fragment}\n                                enter=\"transition duration-200\"\n                                enterFrom=\"opacity-0 translate-y-1\"\n                                enterTo=\"opacity-100 translate-y-0\"\n                                leave=\"transition duration-150\"\n                                leaveFrom=\"opacity-100 translate-y-0\"\n                                leaveTo=\"opacity-0 translate-y-1\"\n                              >\n                                {/* --- FIX: Alignment fix --- */}\n                                <Popover.Panel className=\"absolute z-10 mt-3 right-0\">\n                                  <div className=\"bg-white p-3 shadow-lg rounded-lg ring-1 ring-black/5\">\n                                    <DatePicker\n                                      selected={reminderDate}\n                                      onChange={handleSetReminder}\n                                      showTimeSelect\n                                      inline\n                                      portalId=\"root\" // <-- FIX: Add portal\n                                      calendarClassName={\n                                        !isExpanded\n                                          ? \"datepicker-collapsed\"\n                                          : \"\"\n                                      }\n                                    />\n                                  </div>\n                                </Popover.Panel>\n                              </Transition>\n                            </Popover>\n                          </div>\n                        </div>\n                      </div>\n\n                      <hr className=\"border-gray-100\" />\n\n                      {/* Notes Section */}\n                      <div className=\"pt-3\">\n                        <label className=\"text-sm font-semibold text-gray-700 flex items-center gap-2.5 mb-2\">\n                          <ChatBubbleBottomCenterTextIcon className=\"w-5 h-5 text-gray-500\" />\n                          Notes\n                        </label>\n                        <textarea\n                          name=\"notes\"\n                          value={notes}\n                          onChange={(e) => setNotes(e.target.value)}\n                          onBlur={handleSaveNotes} // Auto-saves on blur\n                          placeholder=\"Add details, links, or anything else...\"\n                          className=\"w-full text-sm p-3 border border-gray-200 rounded-lg bg-gray-50 text-gray-900 resize-y outline-none focus:ring-2 focus:ring-gray-900 focus:border-gray-900 transition-colors placeholder-gray-500\"\n                          rows={6}\n                        />\n                      </div>\n\n                      <hr className=\"border-gray-100\" />\n\n                      {/* Tags Section */}\n                      <div className=\"pt-3\">\n                        <label className=\"text-sm font-semibold text-gray-700 flex items-center gap-2.5 mb-3\">\n                          <TagIcon className=\"w-5 h-5 text-gray-500\" />\n                          Tags\n                        </label>\n                        <div className=\"flex flex-wrap gap-2 mb-3\">\n                          {selectedTask.tags.map((tag) => (\n                            <span\n                              key={tag}\n                              className=\"flex items-center gap-1.5 bg-gray-100 text-gray-800 text-xs px-3 py-1 rounded-full shadow-sm\"\n                            >\n                              {tag}\n                              <button\n                                onClick={() => handleRemoveTag(tag)}\n                                className=\"hover:text-red-500 transition-colors\"\n                                title=\"Remove tag\"\n                              >\n                                <XCircleIcon className=\"w-4 h-4\" />\n                              </button>\n                            </span>\n                          ))}\n                        </div>\n                        <form\n                          onSubmit={handleAddTag}\n                          className=\"flex items-center gap-2 border border-gray-200 rounded-lg bg-gray-50 focus-within:ring-2 focus-within:ring-gray-900 transition-all\"\n                        >\n                          <input\n                            type=\"text\"\n                            value={newTag}\n                            onChange={(e) => setNewTag(e.target.value)}\n                            placeholder=\"Add a tag...\"\n                            className=\"flex-1 text-sm p-3 bg-transparent border-none outline-none text-gray-900 placeholder-gray-500\"\n                          />\n                          <button\n                            type=\"submit\"\n                            className=\"p-3 text-gray-400 hover:text-gray-900 transition-colors\"\n                            title=\"Add tag\"\n                          >\n                            <PlusIcon className=\"w-5 h-5\" />\n                          </button>\n                        </form>\n                      </div>\n\n                      <hr className=\"border-gray-100\" />\n\n                      {/* Subtasks Section */}\n                      <div className=\"pt-3\">\n                        <label className=\"text-sm font-semibold text-gray-700 flex items-center gap-2.5 mb-3\">\n                          <SubtaskIcon className=\"w-5 h-5 text-gray-500\" />\n                          Subtasks\n                        </label>\n                        <ul className=\"mb-3 -mx-6\">\n                          <AnimatePresence initial={false}>\n                            {subtasks.map((t) => (\n                              <SubtaskItem key={t.id} task={t} />\n                            ))}\n                          </AnimatePresence>\n                        </ul>\n                        <form\n                          onSubmit={handleAddSubtask}\n                          className=\"flex items-center gap-2 border border-gray-200 rounded-lg bg-gray-50 focus-within:ring-2 focus-within:ring-gray-900 transition-all\"\n                        >\n                          <input\n                            type=\"text\"\n                            value={newSubtaskTitle}\n                            onChange={(e) => setNewSubtaskTitle(e.target.value)}\n                            placeholder=\"Add a subtask...\"\n                            className=\"flex-1 text-sm p-3 bg-transparent border-none outline-none text-gray-900 placeholder-gray-500\"\n                          />\n                          <button\n                            type=\"submit\"\n                            className=\"p-3 text-gray-400 hover:text-gray-900 transition-colors\"\n                            title=\"Add subtask\"\n                          >\n                            <PlusIcon className=\"w-5 h-5\" />\n                          </button>\n                        </form>\n                      </div>\n\n                      <hr className=\"border-gray-100\" />\n\n                      {/* Delete Section */}\n                      <div className=\"pt-3\">\n                        <button\n                          onClick={handleDeleteTask}\n                          className=\"flex items-center gap-2 text-red-600 text-sm font-medium hover:text-red-700 transition-colors\"\n                        >\n                          <TrashIcon className=\"w-5 h-5\" />\n                          Delete this task\n                        </button>\n                      </div>\n                    </div>\n\n                    {/* --- STICKY FOOTER (sibling to content) --- */}\n                    <motion.div\n                      animate={{\n                        width: isExpanded ? \"36rem\" : \"24rem\", // 576px / 384px\n                      }}\n                      transition={{\n                        type: \"spring\",\n                        stiffness: 260,\n                        damping: 28,\n                      }}\n                      className=\"w-full p-4 bg-white border-t border-gray-200 flex justify-end gap-3 z-10 flex-shrink-0\"\n                    >\n                      <StylishButton\n                        onClick={handleResetDetails}\n                        variant=\"secondary\"\n                        disabled={!detailsChanged && !notesChanged}\n                        icon={ArrowUturnLeftIcon}\n                      >\n                        Reset\n                      </StylishButton>\n                      <StylishButton\n                        onClick={handleSaveDetails}\n                        variant=\"primary\"\n                        disabled={!detailsChanged || isSavingDetails}\n                        icon={ArrowDownOnSquareIcon}\n                      >\n                        {isSavingDetails ? \"Saving...\" : \"Save Changes\"}\n                      </StylishButton>\n                    </motion.div>\n                  </motion.div>\n                </Dialog.Panel>\n              </Transition.Child>\n            </div>\n          </div>\n        </div>\n      </Dialog>\n    </Transition.Root>\n  );\n}\n"],"names":[],"mappings":"AAAA,qDAAqD;;;;;AAGrD;AACA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAkBA;AAAA;AACA;AACA;AAEA;AAIA,4BAA4B;AAC5B,8OAAwD,iBAAiB;AACzE,0OAAoD,iBAAiB;AACrE;;;AAjCA;;;;;;;;;;;;;AA+Ce,SAAS;;IACtB,MAAM,EAAE,cAAc,uBAAuB,EAAE,UAAU,EAAE,GAAG,IAAA,gKAAa;IAC3E,MAAM,EAAE,KAAK,EAAE,OAAO,EAAE,UAAU,EAAE,UAAU,EAAE,GAAG,IAAA,2IAAQ;IAE3D,MAAM,eAAe,IAAA,wKAAO;kDAAC;YAC3B,IAAI,CAAC,yBAAyB,OAAO;YACrC,OACE,CAAA,kBAAA,4BAAA,MAAO,IAAI;0DAAC,CAAC,IAAY,EAAE,EAAE,KAAK,wBAAwB,EAAE;6DAAK;QAErE;iDAAG;QAAC;QAAO;KAAwB;IAEnC,sBAAsB;IACtB,MAAM,CAAC,WAAW,aAAa,GAAG,IAAA,yKAAQ,EAA0B;IACpE,MAAM,CAAC,OAAO,SAAS,GAAG,IAAA,yKAAQ,EAAC;IACnC,MAAM,CAAC,QAAQ,UAAU,GAAG,IAAA,yKAAQ,EAAC;IACrC,MAAM,CAAC,iBAAiB,mBAAmB,GAAG,IAAA,yKAAQ,EAAC;IACvD,MAAM,CAAC,YAAY,cAAc,GAAG,IAAA,yKAAQ,EAAC;IAC7C,MAAM,CAAC,iBAAiB,mBAAmB,GAAG,IAAA,yKAAQ,EAAC;IAEvD,MAAM,WAAW,IAAA,wKAAO;8CAAC;YACvB,IAAI,CAAC,cAAc,OAAO,EAAE;YAC5B,OAAO,MACJ,MAAM;sDAAC,CAAC,IAAY,EAAE,QAAQ,KAAK,aAAa,EAAE;qDAClD,IAAI;sDAAC,CAAC,GAAG,IAAM,EAAE,SAAS,GAAG,EAAE,SAAS;;QAC7C;6CAAG;QAAC;QAAO;KAAa;IAExB,4DAA4D;IAC5D,IAAA,0KAAS;sCAAC;YACR,IAAI,cAAc;gBAChB,aAAa;oBACX,OAAO,aAAa,KAAK;oBACzB,UAAU,aAAa,QAAQ;oBAC/B,SAAS,aAAa,OAAO;oBAC7B,YAAY,aAAa,UAAU;oBACnC,yCAAyC;oBACzC,mBAAmB,aAAa,iBAAiB,IAAI;gBACvD;gBACA,SAAS,aAAa,KAAK,IAAI;YACjC,OAAO;gBACL,aAAa;gBACb,SAAS;YACX;QACF;qCAAG;QAAC;KAAa;IAEjB,IAAI,CAAC,gBAAgB,CAAC,WAAW,OAAO,MAAM,6BAA6B;IAE3E,yCAAyC;IACzC,MAAM,cAAc,IAAM,WAAW;IAErC,MAAM,oBAAoB,CAAC,IACzB,aAAa;YAAE,GAAG,SAAS;YAAE,OAAO,EAAE,MAAM,CAAC,KAAK;QAAC;IAErD,MAAM,gBAAgB;QACpB,MAAM,aAAyB;YAAC;YAAQ;YAAO;YAAU;SAAO;QAChE,MAAM,MAAM,WAAW,OAAO,CAAC,UAAU,QAAQ;QACjD,MAAM,OAAO,UAAU,CAAC,CAAC,MAAM,CAAC,IAAI,WAAW,MAAM,CAAC;QACtD,aAAa;YAAE,GAAG,SAAS;YAAE,UAAU;QAAK;IAC9C;IAEA,MAAM,mBAAmB,CAAC,OACxB,aAAa;YAAE,GAAG,SAAS;YAAE,SAAS,OAAO,KAAK,OAAO,KAAK;QAAK;IAErE,MAAM,oBAAoB,CAAC,OACzB,aAAa;YAAE,GAAG,SAAS;YAAE,YAAY,OAAO,KAAK,OAAO,KAAK;QAAK;IAExE,MAAM,qBAAqB,CAAC,SAC1B,sCAAsC;QACtC,aAAa;YAAE,GAAG,SAAS;YAAE,mBAAmB;QAAO;IAEzD,qCAAqC;IAErC,MAAM,kBAAkB;QACtB,IAAI,UAAU,CAAC,aAAa,KAAK,IAAI,EAAE,GAAG;YACxC,MAAM,WAAW,aAAa,EAAE,EAAE;gBAAE;YAAM;QAC5C;IACF;IAEA,MAAM,oBAAoB;QACxB,IAAI,CAAC,WAAW;QAChB,mBAAmB;QAEnB,oEAAoE;QACpE,MAAM,WAAW,aAAa,EAAE,EAAE;YAChC,GAAG,SAAS;YACZ,OAAO,UAAU,KAAK,CAAC,IAAI,MAAM;QACnC;QAEA,WAAW,IAAM,mBAAmB,QAAQ;IAC9C;IAEA,MAAM,qBAAqB;QACzB,aAAa;YACX,OAAO,aAAa,KAAK;YACzB,UAAU,aAAa,QAAQ;YAC/B,SAAS,aAAa,OAAO;YAC7B,YAAY,aAAa,UAAU;YACnC,yCAAyC;YACzC,mBAAmB,aAAa,iBAAiB,IAAI;QACvD;QACA,SAAS,aAAa,KAAK,IAAI;IACjC;IAEA,MAAM,eAAe,CAAC;QACpB,EAAE,cAAc;QAChB,MAAM,MAAM,OAAO,IAAI;QACvB,IAAI,OAAO,CAAC,aAAa,IAAI,CAAC,QAAQ,CAAC,MACrC,WAAW,aAAa,EAAE,EAAE;YAAE,MAAM;mBAAI,aAAa,IAAI;gBAAE;aAAI;QAAC;QAClE,UAAU;IACZ;IAEA,MAAM,kBAAkB,CAAC,MACvB,WAAW,aAAa,EAAE,EAAE;YAC1B,MAAM,aAAa,IAAI,CAAC,MAAM,CAAC,CAAC,IAAM,MAAM;QAC9C;IAEF,MAAM,mBAAmB,CAAC;QACxB,EAAE,cAAc;QAChB,IAAI,CAAC,gBAAgB,IAAI,IAAI;QAC7B,QAAQ,iBAAiB;YACvB,UAAU,aAAa,EAAE;YACzB,WAAW,aAAa,SAAS;QACnC;QACA,mBAAmB;IACrB;IAEA,MAAM,mBAAmB;QACvB,IAAI,QAAQ,2CAA2C;YACrD,WAAW,aAAa,EAAE;YAC1B;QACF;IACF;IAEA,yEAAyE;IACzE,MAAM,eAAe,UAAU,UAAU,GACrC,IAAI,KAAK,OAAO,UAAU,UAAU,KACpC;IAEJ,MAAM,mBAAsC;QAC1C;QACA;QACA;QACA;KACD;IACD,yCAAyC;IACzC,MAAM,mBAAmB,UAAU,iBAAiB,IAAI;IAExD,MAAM,iBACJ,UAAU,KAAK,KAAK,aAAa,KAAK,IACtC,UAAU,QAAQ,KAAK,aAAa,QAAQ,IAC5C,UAAU,OAAO,KAAK,aAAa,OAAO,IAC1C,UAAU,UAAU,KAAK,aAAa,UAAU,IAChD,uCAAuC;IACvC,UAAU,iBAAiB,KAAK,CAAC,aAAa,iBAAiB,IAAI,MAAM;IAE3E,MAAM,eAAe,UAAU,CAAC,aAAa,KAAK,IAAI,EAAE;IAExD,6CAA6C;IAC7C,MAAM,gBAAgB;YAAC,EACrB,MAAM,IAAI,EACV,KAAK,EACL,KAAK,EACL,OAAO,EAMR;6BACC,6LAAC;YAAI,WAAU;;8BACb,6LAAC;oBAAK,WAAU;8BAAqC;;;;;;8BACrD,6LAAC;oBACC,SAAS;oBACT,WAAU;;sCAEV,6LAAC;4BACC,WAAW,AAAC,WAAoD,OAA1C,QAAQ,kBAAkB;;;;;;sCAElD,6LAAC;4BAAK,WAAW,QAAQ,kBAAkB;sCACxC,SAAS,AAAC,OAAY,OAAN;;;;;;;;;;;;;;;;;;;IAMzB,qBACE,6LAAC,wMAAU,CAAC,IAAI;QAAC,MAAM,CAAC,CAAC;QAAc,IAAI,yKAAQ;kBACjD,cAAA,6LAAC,4LAAM;YAAC,IAAG;YAAM,WAAU;YAAgB,SAAS;;8BAElD,6LAAC,wMAAU,CAAC,KAAK;oBACf,IAAI,yKAAQ;oBACZ,OAAM;oBACN,WAAU;oBACV,SAAQ;oBACR,OAAM;oBACN,WAAU;oBACV,SAAQ;8BAER,cAAA,6LAAC;wBAAI,WAAU;;;;;;;;;;;8BAIjB,6LAAC;oBAAI,WAAU;8BACb,cAAA,6LAAC;wBAAI,WAAU;kCACb,cAAA,6LAAC;4BAAI,WAAU;sCACb,cAAA,6LAAC,wMAAU,CAAC,KAAK;gCACf,IAAI,yKAAQ;gCACZ,OAAM;gCACN,WAAU;gCACV,SAAQ;gCACR,OAAM;gCACN,WAAU;gCACV,SAAQ;0CAGR,cAAA,6LAAC,4LAAM,CAAC,KAAK;oCAAC,WAAU;8CACtB,cAAA,6LAAC,uMAAM,CAAC,GAAG;wCACT,SAAS;4CACP,OAAO,aAAa,UAAU;wCAChC;wCACA,YAAY;4CAAE,MAAM;4CAAU,WAAW;4CAAK,SAAS;wCAAG;wCAC1D,kDAAkD;wCAClD,WAAU;;0DAGV,6LAAC;gDAAI,WAAU;;kEACb,6LAAC;wDACC,SAAS,IAAM,cAAc,CAAC;wDAC9B,WAAU;wDACV,OAAO,aAAa,aAAa;kEAEhC,2BACC,6LAAC,sPAAgB;4DAAC,WAAU;;;;;iFAE5B,6LAAC,mPAAe;4DAAC,WAAU;;;;;;;;;;;kEAG/B,6LAAC;wDACC,MAAK;wDACL,WAAU;wDACV,SAAS;kEAET,cAAA,6LAAC,iOAAS;4DAAC,WAAU;;;;;;;;;;;;;;;;;0DAKzB,6LAAC;gDAAI,WAAU;;kEAEb,6LAAC;wDAAI,WAAU;kEACb,cAAA,6LAAC;4DACC,MAAK;4DACL,MAAK;4DACL,OAAO,UAAU,KAAK;4DACtB,UAAU;4DACV,WAAU;4DACV,aAAY;;;;;;;;;;;kEAIhB,6LAAC;wDAAG,WAAU;;;;;;kEAGd,6LAAC;wDACC,WAAW,AAAC,QAEX,OADC,aAAa,gBAAgB,eAC9B;;0EAGD,6LAAC;gEAAI,WAAU;;kFACb,6LAAC;wEACC,OAAM;wEACN,MAAM,8NAAQ;wEACd,OAAO,UAAU,QAAQ;wEACzB,SAAS;;;;;;kFAIX,6LAAC;wEAAI,WAAU;;0FACb,6LAAC;gFAAK,WAAU;0FAAoC;;;;;;0FAGpD,6LAAC,+LAAO;gFAAC,WAAU;0FAChB;wFAAC,EAAE,KAAK,EAAE;yGACT;;0GACE,6LAAC,+LAAO,CAAC,MAAM;gGAAC,WAAU;;kHACxB,6LAAC,6OAAa;wGACZ,WAAW,AAAC,WAIX,OAHC,qBAAqB,SACjB,kBACA;;;;;;kHAGR,6LAAC;wGACC,WACE,qBAAqB,SACjB,6BACA;kHAGL,qBAAqB,SAClB,kBACA;;;;;;;;;;;;0GAIR,6LAAC,wMAAU;gGACT,IAAI,yKAAQ;gGACZ,OAAM;gGACN,WAAU;gGACV,SAAQ;gGACR,OAAM;gGACN,WAAU;gGACV,SAAQ;0GAER,cAAA,6LAAC,+LAAO,CAAC,KAAK;oGAAC,WAAU;8GACvB,cAAA,6LAAC;wGAAI,WAAU;kHACb,cAAA,6LAAC;4GAAI,WAAU;sHACZ,iBAAiB,GAAG,CAAC,CAAC,uBACrB,6LAAC;oHAEC,SAAS;wHACP,mBAAmB;wHACnB;oHACF;oHACA,WAAW,AAAC,2FAIX,OAHC,qBAAqB,SACjB,2BACA;;wHAGL,WAAW,SACR,cACA;wHACH,qBAAqB,wBACpB,6LAAC,iOAAS;4HAAC,WAAU;;;;;;;mHAflB;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;0EA6B3B,6LAAC;gEAAI,WAAU;;kFAEb,6LAAC;wEAAI,WAAU;;0FACb,6LAAC;gFAAK,WAAU;0FAAoC;;;;;;0FAGpD,6LAAC,+LAAO;gFAAC,WAAU;0FAChB;wFAAC,EAAE,KAAK,EAAE;yGACT;;0GACE,6LAAC,+LAAO,CAAC,MAAM;gGAAC,WAAU;;kHACxB,6LAAC,0OAAY;wGACX,WAAW,AAAC,WAIX,OAHC,UAAU,OAAO,GACb,kBACA;;;;;;kHAGR,6LAAC;wGACC,WACE,UAAU,OAAO,GACb,kBACA;kHAIL,UAAU,OAAO,GACd,IAAA,kKAAM,EACJ,OAAO,UAAU,OAAO,GACxB,WAEF;;;;;;;;;;;;0GAIR,6LAAC,wMAAU;gGACT,IAAI,yKAAQ;gGACZ,OAAM;gGACN,WAAU;gGACV,SAAQ;gGACR,OAAM;gGACN,WAAU;gGACV,SAAQ;0GAER,cAAA,6LAAC,+LAAO,CAAC,KAAK;oGAAC,WAAU;8GACvB,cAAA,6LAAC;wGAAI,WAAU;kHACb,cAAA,6LAAC,wKAAU;4GACT,2DAA2D;4GAC3D,UACE,UAAU,OAAO,GACb,IAAI,KACF,OAAO,UAAU,OAAO,KAE1B;4GAEN,UAAU,CAAC;gHACT,iBAAiB;gHACjB;4GACF;4GACA,MAAM;4GACN,UAAS;4GACT,mBACE,CAAC,aACG,yBACA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;kFAYtB,6LAAC;wEAAI,WAAU;;0FACb,6LAAC;gFAAK,WAAU;0FAAoC;;;;;;0FAGpD,6LAAC,+LAAO;gFAAC,WAAU;;kGACjB,6LAAC,+LAAO,CAAC,MAAM;wFAAC,WAAU;;0GACxB,6LAAC,8NAAQ;gGACP,WAAW,AAAC,WAIX,OAHC,eACI,kBACA;;;;;;0GAGR,6LAAC;gGACC,WACE,eACI,kBACA;0GAIL,eACG,IAAA,kKAAM,EAAC,cAAc,cACrB;;;;;;;;;;;;kGAIR,6LAAC,wMAAU;wFACT,IAAI,yKAAQ;wFACZ,OAAM;wFACN,WAAU;wFACV,SAAQ;wFACR,OAAM;wFACN,WAAU;wFACV,SAAQ;kGAGR,cAAA,6LAAC,+LAAO,CAAC,KAAK;4FAAC,WAAU;sGACvB,cAAA,6LAAC;gGAAI,WAAU;0GACb,cAAA,6LAAC,wKAAU;oGACT,UAAU;oGACV,UAAU;oGACV,cAAc;oGACd,MAAM;oGACN,UAAS;oGACT,mBACE,CAAC,aACG,yBACA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;kEAWtB,6LAAC;wDAAG,WAAU;;;;;;kEAGd,6LAAC;wDAAI,WAAU;;0EACb,6LAAC;gEAAM,WAAU;;kFACf,6LAAC,gSAA8B;wEAAC,WAAU;;;;;;oEAA0B;;;;;;;0EAGtE,6LAAC;gEACC,MAAK;gEACL,OAAO;gEACP,UAAU,CAAC,IAAM,SAAS,EAAE,MAAM,CAAC,KAAK;gEACxC,QAAQ;gEACR,aAAY;gEACZ,WAAU;gEACV,MAAM;;;;;;;;;;;;kEAIV,6LAAC;wDAAG,WAAU;;;;;;kEAGd,6LAAC;wDAAI,WAAU;;0EACb,6LAAC;gEAAM,WAAU;;kFACf,6LAAC,2NAAO;wEAAC,WAAU;;;;;;oEAA0B;;;;;;;0EAG/C,6LAAC;gEAAI,WAAU;0EACZ,aAAa,IAAI,CAAC,GAAG,CAAC,CAAC,oBACtB,6LAAC;wEAEC,WAAU;;4EAET;0FACD,6LAAC;gFACC,SAAS,IAAM,gBAAgB;gFAC/B,WAAU;gFACV,OAAM;0FAEN,cAAA,6LAAC,uOAAW;oFAAC,WAAU;;;;;;;;;;;;uEATpB;;;;;;;;;;0EAcX,6LAAC;gEACC,UAAU;gEACV,WAAU;;kFAEV,6LAAC;wEACC,MAAK;wEACL,OAAO;wEACP,UAAU,CAAC,IAAM,UAAU,EAAE,MAAM,CAAC,KAAK;wEACzC,aAAY;wEACZ,WAAU;;;;;;kFAEZ,6LAAC;wEACC,MAAK;wEACL,WAAU;wEACV,OAAM;kFAEN,cAAA,6LAAC,8NAAQ;4EAAC,WAAU;;;;;;;;;;;;;;;;;;;;;;;kEAK1B,6LAAC;wDAAG,WAAU;;;;;;kEAGd,6LAAC;wDAAI,WAAU;;0EACb,6LAAC;gEAAM,WAAU;;kFACf,6LAAC,mPAAW;wEAAC,WAAU;;;;;;oEAA0B;;;;;;;0EAGnD,6LAAC;gEAAG,WAAU;0EACZ,cAAA,6LAAC,+MAAe;oEAAC,SAAS;8EACvB,SAAS,GAAG,CAAC,CAAC,kBACb,6LAAC,+IAAW;4EAAY,MAAM;2EAAZ,EAAE,EAAE;;;;;;;;;;;;;;;0EAI5B,6LAAC;gEACC,UAAU;gEACV,WAAU;;kFAEV,6LAAC;wEACC,MAAK;wEACL,OAAO;wEACP,UAAU,CAAC,IAAM,mBAAmB,EAAE,MAAM,CAAC,KAAK;wEAClD,aAAY;wEACZ,WAAU;;;;;;kFAEZ,6LAAC;wEACC,MAAK;wEACL,WAAU;wEACV,OAAM;kFAEN,cAAA,6LAAC,8NAAQ;4EAAC,WAAU;;;;;;;;;;;;;;;;;;;;;;;kEAK1B,6LAAC;wDAAG,WAAU;;;;;;kEAGd,6LAAC;wDAAI,WAAU;kEACb,cAAA,6LAAC;4DACC,SAAS;4DACT,WAAU;;8EAEV,6LAAC,iOAAS;oEAAC,WAAU;;;;;;gEAAY;;;;;;;;;;;;;;;;;;0DAOvC,6LAAC,uMAAM,CAAC,GAAG;gDACT,SAAS;oDACP,OAAO,aAAa,UAAU;gDAChC;gDACA,YAAY;oDACV,MAAM;oDACN,WAAW;oDACX,SAAS;gDACX;gDACA,WAAU;;kEAEV,6LAAC,iJAAa;wDACZ,SAAS;wDACT,SAAQ;wDACR,UAAU,CAAC,kBAAkB,CAAC;wDAC9B,MAAM,4PAAkB;kEACzB;;;;;;kEAGD,6LAAC,iJAAa;wDACZ,SAAS;wDACT,SAAQ;wDACR,UAAU,CAAC,kBAAkB;wDAC7B,MAAM,qQAAqB;kEAE1B,kBAAkB,cAAc;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAYzD;GA3nBwB;;QACwC,gKAAa;QACxB,2IAAQ;;;KAFrC","debugId":null}},
    {"offset": {"line": 2434, "column": 0}, "map": {"version":3,"sources":["file:///Users/ramanakumar/TaskGlyph/src/app/app/layout.tsx"],"sourcesContent":["\"use client\";\n\nimport AppNavbar from \"@/components/AppNavbar\";\nimport TaskDetailsPanel from \"@/lib/context/TaskDetailsPanel\";\nimport { TaskDetailProvider } from \"@/lib/context/TaskSidebarContext\";\nimport { useSession } from \"next-auth/react\";\nimport { useRouter } from \"next/navigation\";\nimport { useEffect } from \"react\";\nimport \"react-datepicker/dist/react-datepicker.css\";\n\n// âœ… Corrected imports (context + panel)\n\nexport default function AppLayout({ children }: { children: React.ReactNode }) {\n  const { data: session, status } = useSession();\n  const router = useRouter();\n\n  // Redirect to signin if session missing\n  useEffect(() => {\n    if (status === \"loading\") return;\n    if (!session) {\n      router.push(\"/auth/signin\");\n    }\n  }, [session, status, router]);\n\n  // Loading state\n  if (status === \"loading\") {\n    return (\n      <div className=\"min-h-screen flex items-center justify-center bg-gray-100\">\n        <p className=\"text-gray-600\">Loading session...</p>\n      </div>\n    );\n  }\n\n  // Authenticated layout\n  if (session) {\n    return (\n      <TaskDetailProvider>\n        <div className=\"min-h-screen bg-gray-100\">\n          <AppNavbar />\n          <main className=\"py-10\">\n            <div className=\"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8\">\n              {children}\n            </div>\n          </main>\n          {/* âœ… Context panel placed here */}\n          <TaskDetailsPanel />\n        </div>\n      </TaskDetailProvider>\n    );\n  }\n\n  return null;\n}\n"],"names":[],"mappings":";;;;;AAEA;AACA;AACA;AACA;AACA;AACA;;;AAPA;;;;;;;;AAYe,SAAS,UAAU,KAA2C;QAA3C,EAAE,QAAQ,EAAiC,GAA3C;;IAChC,MAAM,EAAE,MAAM,OAAO,EAAE,MAAM,EAAE,GAAG,IAAA,+JAAU;IAC5C,MAAM,SAAS,IAAA,kJAAS;IAExB,wCAAwC;IACxC,IAAA,0KAAS;+BAAC;YACR,IAAI,WAAW,WAAW;YAC1B,IAAI,CAAC,SAAS;gBACZ,OAAO,IAAI,CAAC;YACd;QACF;8BAAG;QAAC;QAAS;QAAQ;KAAO;IAE5B,gBAAgB;IAChB,IAAI,WAAW,WAAW;QACxB,qBACE,6LAAC;YAAI,WAAU;sBACb,cAAA,6LAAC;gBAAE,WAAU;0BAAgB;;;;;;;;;;;IAGnC;IAEA,uBAAuB;IACvB,IAAI,SAAS;QACX,qBACE,6LAAC,qKAAkB;sBACjB,cAAA,6LAAC;gBAAI,WAAU;;kCACb,6LAAC,6IAAS;;;;;kCACV,6LAAC;wBAAK,WAAU;kCACd,cAAA,6LAAC;4BAAI,WAAU;sCACZ;;;;;;;;;;;kCAIL,6LAAC,wJAAgB;;;;;;;;;;;;;;;;IAIzB;IAEA,OAAO;AACT;GAxCwB;;QACY,+JAAU;QAC7B,kJAAS;;;KAFF","debugId":null}}]
}
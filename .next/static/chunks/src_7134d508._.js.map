{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///Users/ramanakumar/TaskGlyph/src/lib/db/usePomodoro.ts"],"sourcesContent":["\"use client\";\n\nimport { useState, useEffect, useCallback } from \"react\"; // âœ… 1. Import useCallback\nimport db, { PomodoroSession, OperationType, EntityType } from \"./clientDb\";\nimport { v4 as uuidv4 } from \"uuid\";\nimport { useTier } from \"./useTier\";\nimport { triggerSync } from \"../sync/syncService\";\n\nexport function usePomodoro() {\n  const [sessions, setSessions] = useState<PomodoroSession[]>([]);\n  const tier = useTier();\n  const canSync = !!tier;\n\n  // Load Pomodoro sessions from IndexedDB on mount\n  useEffect(() => {\n    const fetchSessions = async () => {\n      const allSessions = await db.pomodoroSessions.toArray();\n      const sorted = allSessions.sort((a, b) => b.completedAt - a.completedAt);\n      setSessions(sorted);\n    };\n    fetchSessions();\n  }, []); // Empty dependency array is correct here\n\n  const logSession = useCallback(\n    async (durationMinutes: number, type: \"work\" | \"break\") => {\n      const newSession: PomodoroSession = {\n        id: uuidv4(),\n        durationMinutes,\n        completedAt: Date.now(),\n        type: type,\n      };\n      await db.pomodoroSessions.add(newSession);\n      setSessions((prev) => [newSession, ...prev]);\n\n      // Add to sync outbox if paid user\n      if (canSync) {\n        const syncOp = {\n          id: uuidv4(),\n          entityType: \"pomodoro\" as EntityType,\n          operation: \"create\" as OperationType,\n          payload: newSession,\n          timestamp: Date.now(),\n        };\n        await db.syncOutbox.add(syncOp);\n        console.log(`ðŸ“¤ Added CREATE Pomodoro ${type} session to sync outbox`);\n        triggerSync(); // Poke the sync service\n      }\n\n      return newSession;\n    },\n    [canSync] // âœ… 3. Add dependencies\n  );\n\n  return {\n    sessions,\n    logSession,\n  };\n}\n"],"names":[],"mappings":";;;;AAEA,mRAA0D,0BAA0B;AACpF;AACA;AACA;AACA;;AANA;;;;;;AAQO,SAAS;;IACd,MAAM,CAAC,UAAU,YAAY,GAAG,IAAA,yKAAQ,EAAoB,EAAE;IAC9D,MAAM,OAAO,IAAA,yIAAO;IACpB,MAAM,UAAU,CAAC,CAAC;IAElB,iDAAiD;IACjD,IAAA,0KAAS;iCAAC;YACR,MAAM;uDAAgB;oBACpB,MAAM,cAAc,MAAM,0IAAE,CAAC,gBAAgB,CAAC,OAAO;oBACrD,MAAM,SAAS,YAAY,IAAI;sEAAC,CAAC,GAAG,IAAM,EAAE,WAAW,GAAG,EAAE,WAAW;;oBACvE,YAAY;gBACd;;YACA;QACF;gCAAG,EAAE,GAAG,yCAAyC;IAEjD,MAAM,aAAa,IAAA,4KAAW;+CAC5B,OAAO,iBAAyB;YAC9B,MAAM,aAA8B;gBAClC,IAAI,IAAA,4KAAM;gBACV;gBACA,aAAa,KAAK,GAAG;gBACrB,MAAM;YACR;YACA,MAAM,0IAAE,CAAC,gBAAgB,CAAC,GAAG,CAAC;YAC9B;uDAAY,CAAC,OAAS;wBAAC;2BAAe;qBAAK;;YAE3C,kCAAkC;YAClC,IAAI,SAAS;gBACX,MAAM,SAAS;oBACb,IAAI,IAAA,4KAAM;oBACV,YAAY;oBACZ,WAAW;oBACX,SAAS;oBACT,WAAW,KAAK,GAAG;gBACrB;gBACA,MAAM,0IAAE,CAAC,UAAU,CAAC,GAAG,CAAC;gBACxB,QAAQ,GAAG,CAAC,AAAC,4BAAgC,OAAL,MAAK;gBAC7C,IAAA,mJAAW,KAAI,wBAAwB;YACzC;YAEA,OAAO;QACT;8CACA;QAAC;KAAQ,CAAC,wBAAwB;;IAGpC,OAAO;QACL;QACA;IACF;AACF;GAjDgB;;QAED,yIAAO","debugId":null}},
    {"offset": {"line": 91, "column": 0}, "map": {"version":3,"sources":["file:///Users/ramanakumar/TaskGlyph/src/app/app/pomodoro/page.tsx"],"sourcesContent":["\"use client\";\n\nimport { useState, useEffect, useRef } from \"react\";\nimport { usePomodoro } from \"@/lib/db/usePomodoro\";\nimport { PomodoroSession } from \"@/lib/db/clientDb\";\nimport { format } from \"date-fns\";\n\n// LocalStorage keys for persistence\nconst STORAGE_KEY = {\n  END_TIME: \"pomodoro_end_time\",\n  IS_RUNNING: \"pomodoro_is_running\",\n  MODE: \"pomodoro_mode\",\n  STARTED_DURATION: \"pomodoro_started_duration\",\n};\n\nexport default function PomodoroPage() {\n  const { sessions, logSession } = usePomodoro();\n\n  // State for configurable times\n  const [workMinutes, setWorkMinutes] = useState(25);\n  const [breakMinutes, setBreakMinutes] = useState(5);\n\n  // Timer state\n  const [timeLeft, setTimeLeft] = useState(workMinutes * 60);\n  const [isRunning, setIsRunning] = useState(false);\n  const [mode, setMode] = useState<\"work\" | \"break\">(\"work\");\n  const intervalRef = useRef<NodeJS.Timeout | null>(null);\n  const hasRunLoadEffect = useRef(false);\n\n  // Lock to prevent duplicate saves\n  const [isLogging, setIsLogging] = useState(false);\n\n  // --- Helper Functions ---\n  const formatTime = (seconds: number) => {\n    const mins = Math.floor(seconds / 60);\n    const secs = seconds % 60;\n    return `${mins.toString().padStart(2, \"0\")}:${secs\n      .toString()\n      .padStart(2, \"0\")}`;\n  };\n\n  // Helper to clear all timer storage\n  const clearStorage = () => {\n    localStorage.removeItem(STORAGE_KEY.END_TIME);\n    localStorage.removeItem(STORAGE_KEY.IS_RUNNING);\n    localStorage.removeItem(STORAGE_KEY.MODE);\n    localStorage.removeItem(STORAGE_KEY.STARTED_DURATION);\n  };\n\n  // --- Timer Effects ---\n\n  // Effect handles \"catching up\" when you switch tabs\n  useEffect(() => {\n    const handleVisibilityChange = () => {\n      if (document.visibilityState === \"visible\") {\n        // Tab is active, let's check the timer\n        const storedEndTime = localStorage.getItem(STORAGE_KEY.END_TIME);\n        const storedIsRunning =\n          localStorage.getItem(STORAGE_KEY.IS_RUNNING) === \"true\";\n        const storedMode = (localStorage.getItem(STORAGE_KEY.MODE) ||\n          \"work\") as \"work\" | \"break\";\n        const storedDuration = parseInt(\n          localStorage.getItem(STORAGE_KEY.STARTED_DURATION) || \"0\"\n        );\n\n        if (storedIsRunning && storedEndTime) {\n          const remainingTime = Math.round(\n            (parseInt(storedEndTime) - Date.now()) / 1000\n          );\n\n          if (remainingTime > 0) {\n            // Timer is still running, catch up\n            setTimeLeft(remainingTime);\n          } else {\n            // Timer finished while tab was in background\n            setIsRunning(false);\n            clearStorage();\n            if (!isLogging) {\n              setIsLogging(true);\n              if (storedMode === \"work\") {\n                logSession(storedDuration, \"work\").then(() =>\n                  setIsLogging(false)\n                );\n                alert(\"Focus session finished while you were away!\");\n              } else {\n                logSession(storedDuration, \"break\").then(() =>\n                  setIsLogging(false)\n                );\n                alert(\"Break finished while you were away!\");\n              }\n            }\n            setMode(\"work\");\n            setTimeLeft(workMinutes * 60);\n          }\n        }\n      }\n    };\n\n    document.addEventListener(\"visibilitychange\", handleVisibilityChange);\n\n    return () => {\n      document.removeEventListener(\"visibilitychange\", handleVisibilityChange);\n    };\n  }, [isLogging, logSession, workMinutes]);\n\n  // Effect runs ONCE on page load to restore the timer\n  useEffect(() => {\n    if (hasRunLoadEffect.current) return;\n    hasRunLoadEffect.current = true;\n\n    const storedEndTime = localStorage.getItem(STORAGE_KEY.END_TIME);\n    const storedIsRunning =\n      localStorage.getItem(STORAGE_KEY.IS_RUNNING) === \"true\";\n    const storedMode = (localStorage.getItem(STORAGE_KEY.MODE) || \"work\") as\n      | \"work\"\n      | \"break\";\n    const storedDuration = parseInt(\n      localStorage.getItem(STORAGE_KEY.STARTED_DURATION) || \"0\"\n    );\n\n    if (storedIsRunning && storedEndTime) {\n      const remainingTime = Math.round(\n        (parseInt(storedEndTime) - Date.now()) / 1000\n      );\n\n      if (remainingTime > 0) {\n        // Timer is still running\n        setMode(storedMode);\n        setTimeLeft(remainingTime);\n        setIsRunning(true);\n      } else {\n        // Timer finished while user was away\n        setIsRunning(false);\n        clearStorage();\n        if (!isLogging) {\n          setIsLogging(true);\n          if (storedMode === \"work\") {\n            logSession(storedDuration, \"work\").then(() => setIsLogging(false));\n            alert(\"Focus session finished while you were away!\");\n          } else {\n            logSession(storedDuration, \"break\").then(() => setIsLogging(false));\n            alert(\"Break finished while you were away!\");\n          }\n        }\n        setMode(\"work\");\n        setTimeLeft(workMinutes * 60);\n      }\n    }\n  }, [logSession, workMinutes, isLogging]);\n\n  // Effect is just the countdown\n  useEffect(() => {\n    if (isRunning && timeLeft > 0) {\n      intervalRef.current = setInterval(() => {\n        setTimeLeft((prev) => prev - 1);\n      }, 1000);\n    } else if (isRunning && timeLeft === 0) {\n      // Timer finished\n      setIsRunning(false);\n      if (intervalRef.current) {\n        clearInterval(intervalRef.current);\n      }\n      clearStorage();\n\n      if (!isLogging) {\n        setIsLogging(true);\n        if (mode === \"work\") {\n          const duration = parseInt(\n            localStorage.getItem(STORAGE_KEY.STARTED_DURATION) ||\n              workMinutes.toString()\n          );\n          logSession(duration, \"work\").then(() => setIsLogging(false));\n          alert(\"Focus session complete! Click 'Break' to start a break.\");\n        } else {\n          const duration = parseInt(\n            localStorage.getItem(STORAGE_KEY.STARTED_DURATION) ||\n              breakMinutes.toString()\n          );\n          logSession(duration, \"break\").then(() => setIsLogging(false));\n          alert(\"Break's over! Click 'Focus' to start a new session.\");\n        }\n      }\n    }\n\n    return () => {\n      if (intervalRef.current) {\n        clearInterval(intervalRef.current);\n      }\n    };\n  }, [\n    isRunning,\n    timeLeft,\n    mode,\n    logSession,\n    workMinutes,\n    breakMinutes,\n    isLogging,\n  ]);\n\n  // --- Button Handlers ---\n\n  const handleStartPause = () => {\n    if (isRunning) {\n      // Pausing\n      setIsRunning(false);\n      localStorage.setItem(STORAGE_KEY.IS_RUNNING, \"false\");\n    } else {\n      // Starting\n      setIsRunning(true);\n      const durationMinutes = mode === \"work\" ? workMinutes : breakMinutes;\n      // Use the *current* timeLeft, not the full time\n      const endTime = Date.now() + timeLeft * 1000;\n\n      localStorage.setItem(STORAGE_KEY.END_TIME, endTime.toString());\n      localStorage.setItem(STORAGE_KEY.IS_RUNNING, \"true\");\n      localStorage.setItem(STORAGE_KEY.MODE, mode);\n      localStorage.setItem(\n        STORAGE_KEY.STARTED_DURATION,\n        durationMinutes.toString()\n      );\n    }\n  };\n\n  const handleStopAndSave = () => {\n    if (!confirm(\"Stop the timer and save this session?\")) {\n      return;\n    }\n\n    setIsRunning(false);\n    const storedDuration = parseInt(\n      localStorage.getItem(STORAGE_KEY.STARTED_DURATION) || \"0\"\n    );\n\n    if (mode === \"work\" && storedDuration > 0) {\n      const elapsedSeconds = storedDuration * 60 - timeLeft;\n      const elapsedMinutes = Math.floor(elapsedSeconds / 60);\n\n      if (elapsedMinutes > 0) {\n        if (!isLogging) {\n          setIsLogging(true);\n          logSession(elapsedMinutes, \"work\").then(() => setIsLogging(false));\n          alert(`Session saved! You completed ${elapsedMinutes} minutes.`);\n        }\n      } else {\n        alert(\"Timer reset. No time logged.\");\n      }\n    }\n    clearStorage();\n    setMode(\"work\");\n    setTimeLeft(workMinutes * 60);\n  };\n\n  // âœ… --- THE FIX: Updated the check for an active session ---\n  const handleModeSwitch = (newMode: \"work\" | \"break\") => {\n    // Check if trying to switch to a different mode\n    if (newMode !== mode) {\n      // Check if the timer is *actually* active (running or paused mid-session)\n      const fullCurrentTime =\n        (mode === \"work\" ? workMinutes : breakMinutes) * 60;\n      const isActuallyActive =\n        isRunning || (!isRunning && timeLeft > 0 && timeLeft < fullCurrentTime);\n\n      if (isActuallyActive) {\n        alert(\n          `You are in an active ${mode} session. Please stop or finish it before switching to ${newMode}.`\n        );\n        return; // Prevent switching\n      }\n    }\n\n    // Allow switching if session is finished (timeLeft === 0) or not started\n    setIsRunning(false);\n    clearStorage();\n    setMode(newMode);\n    setTimeLeft((newMode === \"work\" ? workMinutes : breakMinutes) * 60);\n  };\n\n  const handleWorkMinutesChange = (e: React.ChangeEvent<HTMLInputElement>) => {\n    const minutes = parseInt(e.target.value);\n    if (minutes > 0) {\n      setWorkMinutes(minutes);\n      if (mode === \"work\" && !isRunning) {\n        setTimeLeft(minutes * 60);\n      }\n    }\n  };\n\n  const handleBreakMinutesChange = (e: React.ChangeEvent<HTMLInputElement>) => {\n    const minutes = parseInt(e.target.value);\n    if (minutes > 0) {\n      setBreakMinutes(minutes);\n      if (mode === \"break\" && !isRunning) {\n        setTimeLeft(minutes * 60);\n      }\n    }\n  };\n\n  // --- History Logic (Unchanged) ---\n  const groupedSessions = sessions.reduce((acc, session) => {\n    const day = format(new Date(session.completedAt), \"MMMM d, yyyy\");\n    if (!acc[day]) {\n      acc[day] = [];\n    }\n    acc[day].push(session);\n    return acc;\n  }, {} as Record<string, PomodoroSession[]>);\n  const sortedDays = Object.keys(groupedSessions).sort(\n    (a, b) => new Date(b).getTime() - new Date(a).getTime()\n  );\n\n  return (\n    <div className=\"min-h-screen bg-gray-50 p-4\">\n      <div className=\"max-w-md mx-auto\">\n        <h1 className=\"text-2xl font-bold text-gray-900 mb-6\">\n          Pomodoro Timer\n        </h1>\n\n        {/* Mode Switcher Buttons */}\n        <div className=\"bg-white rounded-lg shadow-sm border border-gray-200 p-4 mb-4 flex gap-2\">\n          <button\n            onClick={() => handleModeSwitch(\"work\")}\n            className={`flex-1 p-2 rounded ${\n              mode === \"work\"\n                ? \"bg-blue-600 text-white\"\n                : \"bg-gray-100 text-gray-800\"\n            }`}\n          >\n            Focus\n          </button>\n          <button\n            onClick={() => handleModeSwitch(\"break\")}\n            className={`flex-1 p-2 rounded ${\n              mode === \"break\"\n                ? \"bg-green-600 text-white\"\n                : \"bg-gray-100 text-gray-800\"\n            }`}\n          >\n            Break\n          </button>\n        </div>\n\n        {/* Timer Display */}\n        <div className=\"bg-white rounded-lg shadow-sm border border-gray-200 p-8 mb-8 text-center\">\n          <div className=\"text-8xl font-mono font-bold text-gray-900 mb-6\">\n            {formatTime(timeLeft)}\n          </div>\n          <div className=\"flex justify-center gap-3\">\n            <button\n              onClick={handleStartPause}\n              className={`px-6 py-2 rounded text-white ${\n                isRunning\n                  ? \"bg-yellow-600 hover:bg-yellow-700\"\n                  : \"bg-green-600 hover:bg-green-700\"\n              }`}\n            >\n              {/* Change button text based on whether timer is finished */}\n              {isRunning ? \"Pause\" : timeLeft === 0 ? \"Start New\" : \"Start\"}\n            </button>\n\n            {timeLeft > 0 && timeLeft < workMinutes * 60 && mode === \"work\" && (\n              <button\n                onClick={handleStopAndSave}\n                className=\"bg-red-600 text-white px-4 py-2 rounded hover:bg-red-700\"\n              >\n                Stop & Save\n              </button>\n            )}\n          </div>\n        </div>\n\n        {/* Time Configuration */}\n        <div className=\"bg-white rounded-lg shadow-sm border border-gray-200 p-6 mb-8\">\n          <h2 className=\"text-lg font-medium text-gray-900 mb-4\">Settings</h2>\n          <div className=\"flex gap-4\">\n            <div className=\"flex-1\">\n              <label className=\"block text-sm font-medium text-gray-700 mb-1\">\n                Focus (mins)\n              </label>\n              <input\n                type=\"number\"\n                value={workMinutes}\n                onChange={handleWorkMinutesChange}\n                className=\"w-full border border-gray-300 rounded px-3 py-2 text-gray-800\"\n                disabled={isRunning}\n              />\n            </div>\n            <div className=\"flex-1\">\n              <label className=\"block text-sm font-medium text-gray-700 mb-1\">\n                Break (mins)\n              </label>\n              <input\n                type=\"number\"\n                value={breakMinutes}\n                onChange={handleBreakMinutesChange}\n                className=\"w-full border border-gray-300 rounded px-3 py-2 text-gray-800\"\n                disabled={isRunning}\n              />\n            </div>\n          </div>\n        </div>\n\n        {/* Session History */}\n        <div>\n          <h2 className=\"text-lg font-medium text-gray-900 mb-4\">\n            Completed Sessions\n          </h2>\n          {sortedDays.length > 0 ? (\n            <div className=\"space-y-6\">\n              {sortedDays.map((day) => {\n                const daySessions = groupedSessions[day];\n                const totalMinutes = daySessions.reduce(\n                  (sum, s) => sum + s.durationMinutes,\n                  0\n                );\n                return (\n                  <div\n                    key={day}\n                    className=\"bg-white rounded-lg shadow-sm border border-gray-200 p-6\"\n                  >\n                    <div className=\"flex justify-between items-center mb-3 pb-3 border-b border-gray-200\">\n                      <h3 className=\"font-medium text-gray-900\">{day}</h3>\n                      <p className=\"text-sm text-gray-600\">\n                        {daySessions.length} sessions\n                        <span className=\"mx-2\">|</span>\n                        {totalMinutes} minutes total\n                      </p>\n                    </div>\n                    <ul className=\"space-y-2\">\n                      {daySessions\n                        .sort((a, b) => b.completedAt - a.completedAt)\n                        .map((session) => (\n                          <li\n                            key={session.id}\n                            className=\"flex justify-between items-center text-sm\"\n                          >\n                            <span\n                              className={\n                                session.type === \"break\"\n                                  ? \"text-green-700\"\n                                  : \"text-gray-800\"\n                              }\n                            >\n                              {session.durationMinutes} minute {session.type}{\" \"}\n                              session\n                            </span>\n                            <span className=\"text-gray-500\">\n                              {format(new Date(session.completedAt), \"h:mm a\")}\n                            </span>\n                          </li>\n                        ))}\n                    </ul>\n                  </div>\n                );\n              })}\n            </div>\n          ) : (\n            <p className=\"text-gray-500 text-center mt-8\">\n              No sessions yet. Start a timer!\n            </p>\n          )}\n        </div>\n      </div>\n    </div>\n  );\n}\n"],"names":[],"mappings":"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","debugId":null}}]
}